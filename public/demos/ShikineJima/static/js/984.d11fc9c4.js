/*! For license information please see 984.d11fc9c4.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["984"],{158:function(t,e,n){n.d(e,{v9:()=>s});var r=n(249),i=n(452);function o(t,e){return t===e}function s(t,e,n=o){let u=(0,r.useCallback)(e=>{if(!t)return()=>{};let{unsubscribe:n}=t.subscribe(e);return n},[t]),a=(0,r.useCallback)(()=>t?.getSnapshot(),[t]);return(0,i.useSyncExternalStoreWithSelector)(u,a,a,e,n)}n(807)},649:function(t,e,n){let r;function i(t,e,n){let r="object"==typeof t,i=r?t:void 0;return{next:(r?t.next:t)?.bind(i),error:(r?t.error:e)?.bind(i),complete:(r?t.complete:n)?.bind(i)}}n.d(e,{a:()=>m});let o=[],{link:s,unlink:u,propagate:a,checkDirty:c,endTracking:f,startTracking:l,shallowPropagate:p}=function({update:t,notify:e,unwatched:n}){return{link:function(t,e){let n,r=e._depsTail;if(void 0!==r&&r.dep===t)return;let i=4&e._flags;if(i&&void 0!==(n=void 0!==r?r.nextDep:e._deps)&&n.dep===t){e._depsTail=n;return}let s=t._subsTail;if(void 0!==s&&s.sub===e&&(!i||o(s,e)))return;let u=e._depsTail=t._subsTail={dep:t,sub:e,prevDep:r,nextDep:n,prevSub:s,nextSub:void 0};void 0!==n&&(n.prevDep=u),void 0!==r?r.nextDep=u:e._deps=u,void 0!==s?s.nextSub=u:t._subs=u},unlink:r,propagate:function(t){let n,r=t.nextSub;t:for(;;){let i=t.sub,s=i._flags;if(3&s&&(60&s?12&s?4&s?!(48&s)&&o(t,i)?(i._flags=40|s,s&=1):s=0:i._flags=-9&s|32:s=0:i._flags=32|s,2&s&&e(i),1&s)){let e=i._subs;if(void 0!==e){t=e,void 0!==e.nextSub&&(n={value:r,prev:n},r=t.nextSub);continue}}if(void 0!==(t=r)){r=t.nextSub;continue}for(;void 0!==n;)if(t=n.value,n=n.prev,void 0!==t){r=t.nextSub;continue t}break}},checkDirty:function(e,n){let r,o=0;t:for(;;){let s=e.dep,u=s._flags,a=!1;if(16&n._flags)a=!0;else if((17&u)==17){if(t(s)){let t=s._subs;void 0!==t.nextSub&&i(t),a=!0}}else if((33&u)==33){(void 0!==e.nextSub||void 0!==e.prevSub)&&(r={value:e,prev:r}),e=s._deps,n=s,++o;continue}if(!a&&void 0!==e.nextDep){e=e.nextDep;continue}for(;o;){--o;let s=n._subs,u=void 0!==s.nextSub;if(u?(e=r.value,r=r.prev):e=s,a){if(t(n)){u&&i(s),n=e.sub;continue}}else n._flags&=-33;if(n=e.sub,void 0!==e.nextDep){e=e.nextDep;continue t}a=!1}return a}},endTracking:function(t){let e=t._depsTail,n=void 0!==e?e.nextDep:t._deps;for(;void 0!==n;)n=r(n,t);t._flags&=-5},startTracking:function(t){t._depsTail=void 0,t._flags=-57&t._flags|4},shallowPropagate:i};function r(t,e=t.sub){let i=t.dep,o=t.prevDep,s=t.nextDep,u=t.nextSub,a=t.prevSub;return void 0!==s?s.prevDep=o:e._depsTail=o,void 0!==o?o.nextDep=s:e._deps=s,void 0!==u?u.prevSub=a:i._subsTail=a,void 0!==a?a.nextSub=u:void 0===(i._subs=u)&&n(i),s}function i(t){do{let n=t.sub,r=t.nextSub,i=n._flags;(48&i)==32&&(n._flags=16|i,2&i&&e(n)),t=r}while(void 0!==t)}function o(t,e){let n=e._depsTail;if(void 0!==n){let r=e._deps;do{if(r===t)return!0;if(r===n)break;r=r.nextDep}while(void 0!==r)}return!1}}({update:t=>t._update(),notify(t){o[h++]=t},unwatched(t){let e=t._deps;if(void 0!==e){t._flags=17;do e=u(e,t);while(void 0!==e)}}}),d=0,h=0;function v(t,e){let n="function"==typeof t,u={_snapshot:n?void 0:t,_subs:void 0,_subsTail:void 0,_flags:0,get:()=>(void 0!==r&&s(u,r),u._snapshot),subscribe(t){let e=i(t),n={current:!1},o=function(t){let e=()=>{let e=r;r=n,l(n);try{return t()}finally{r=e,f(n)}},n={_deps:void 0,_depsTail:void 0,_flags:2,notify(){let t=this._flags;16&t||32&t&&c(this._deps,this)?e():32&t&&(this._flags=-33&t)},stop(){l(this),f(this)}};return e(),n}(()=>{u.get(),n.current?e.next?.(u._snapshot):n.current=!0});return{unsubscribe:()=>{o.stop()}}},_update(i){let o=r,s=e?.compare??Object.is;r=u,l(u);try{let e=u._snapshot,r="function"==typeof i?i(e):void 0===i&&n?t(t=>t.get()):i;if(void 0===e||!s(e,r))return u._snapshot=r,!0;return!1}finally{r=o,f(u)}}};return n?Object.assign(u,{_deps:void 0,_depsTail:void 0,_flags:17,get(){let t=this._flags;if(16&t||32&t&&c(u._deps,u)){if(u._update()){let t=u._subs;void 0!==t&&p(t)}}else 32&t&&(u._flags=-33&t);return void 0!==r&&s(u,r),u._snapshot}}):Object.assign(u,{set(t){if(u._update(t)){let t=u._subs;if(void 0!==t){for(a(t),p(t);d<h;){let t=o[d];o[d++]=void 0,t.notify()}d=0,h=0}}}}),u}let y="function"==typeof Symbol&&Symbol.observable||"@@observable",g=new WeakMap;function _(t,e){let n,r=t.getInitialSnapshot(),o=r,s=v(o),u=t=>{if(!n)return;let e=t.type,r=n.get(e);r&&r.forEach(e=>e(t))},a=t.transition,c={get _snapshot(){return s._snapshot},on(t,e){n||(n=new Map);let r=n.get(t);r||(r=new Set,n.set(t,r));let i=e.bind(void 0);return r.add(i),{unsubscribe(){r.delete(i)}}},transition:t.transition,sessionId:Math.random().toString(36).slice(6),send(t){let n;g.get(c)?.forEach(e=>{e.next?.({type:"@xstate.event",event:t,sourceRef:void 0,actorRef:c,rootId:c.sessionId})});for(let r of([o,n]=a(o,t),g.get(c)?.forEach(e=>{e.next?.({type:"@xstate.snapshot",event:t,snapshot:o,actorRef:c,rootId:c.sessionId})}),s.set(o),n))"function"==typeof r?r():(e?.[r.type]?.(r),u(r))},getSnapshot:()=>o,get:()=>s.get(),getInitialSnapshot:()=>r,subscribe:s.subscribe.bind(s),[y](){return this},inspect:t=>{let e=i(t);return g.set(c,g.get(c)??new Set),g.get(c).add(e),e.next?.({type:"@xstate.actor",actorRef:c,rootId:c.sessionId}),e.next?.({type:"@xstate.snapshot",snapshot:r,event:{type:"@xstate.init"},actorRef:c,rootId:c.sessionId}),{unsubscribe:()=>g.get(c)?.delete(e)}},trigger:new Proxy({},{get:(t,e)=>t=>{c.send({type:e,...t})}}),select:(t,e=Object.is)=>v(()=>t(c.get().context),{compare:e})};return c}function m(t){var e,n;if("transition"in t)return _(t);return _({getInitialSnapshot:()=>({status:"active",context:t.context,output:void 0,error:void 0}),transition:(e=t.on,(t,n)=>{let r=t.context,i=e?.[n.type],o=[],s={emit:new Proxy({},{get:(t,e)=>t=>{o.push({...t,type:e})}}),effect:t=>{o.push(t)}};if(!i)return[t,o];if("function"==typeof i){let t;r=(t=r,Object.assign({},r,i?.(t,n,s)))}else{let t={};for(let e of Object.keys(i)){let o=i[e];t[e]="function"==typeof o?o(r,n,s):o}r=Object.assign({},r,t)}return[{...t,context:r},o]})},t.emits)}},701:function(t,e,n){n(249)},185:function(t,e,n){function r(t){return function(e,n){return t.chain(e,function(e){return t.map(n(e),function(){return e})})}}n.d(e,{ij:()=>g,G:()=>c,YP:()=>a,g_:()=>y});var i,o=n(945);function s(t){return function(e,n){return t.map(e,function(){return n})}}var u=n(527),a=u.YP,c=u.G,f=function(t,e){return(0,o.zG)(t,p(e))},l="Option",p=function(t){return function(e){return v(e)?a:c(t(e.value))}},d={URI:l,map:f};(0,o.OB)(2,s(d)),s(d);var h={URI:l,map:f,ap:function(t,e){var n;return(0,o.zG)(t,(n=e,function(t){return v(t)||v(n)?a:c(t.value(n.value))}))},chain:(0,o.OB)(2,function(t,e){return v(t)?a:e(t.value)})};(0,o.OB)(2,function(t,e){return v(t)?e():t}),u.pC;var v=function(t){return"None"===t._tag},y=function(t,e){return function(n){return v(n)?t():e(n.value)}};r(h),i={URI:l,fromEither:function(t){return"Left"===t._tag?a:c(t.right)}},r(h);var g=function(t){return null==t?a:c(t)};u.F4,u.Xl},750:function(t,e,n){n.d(e,{Zt:()=>i});var r=n(945),i=function(t){return{equals:function(e,n){return e===n||0===t(e,n)},compare:function(e,n){return e===n?0:t(e,n)}}};r.W8},58:function(t,e,n){n.d(e,{pR:()=>l,jG:()=>f,zo:()=>u,DZ:()=>c,UI:()=>a});var r=n(527),i=n(592),o=n(750);n(945);r.Xl;r.Od,r.ri,r.YM,r.F4;r.Gb;var s=function(t){return 0===t.length},u=function(t){return function(e){return s(e)?t:s(t)?e:e.concat(t)}},a=function(t){return function(e){return e.map(function(e){return t(e)})}},c=function(t){var e;return e=function(e,n){return t(n)},function(t){for(var n=[],i=0;i<t.length;i++){var o=e(i,t[i]);r.pC(o)&&n.push(o.value)}return n}},f=function(){return{concat:function(t,e){return s(t)?e:s(e)?t:t.concat(e)}}},l=function(t){return(0,o.Zt)(function(e,n){for(var r=e.length,o=n.length,s=Math.min(r,o),u=0;u<s;u++){var a=t.compare(e[u],n[u]);if(0!==a)return a}return i.Df.compare(r,o)})};r.F4},544:function(t,e,n){n.d(e,{uZ:()=>f,YH:()=>A,VO:()=>a,qO:()=>I});var r=n(945),i=n(527),o=function(t,e){return{left:t,right:e}},s=function(t){return 0===t.size},u=function(t){return function(e){return Array.from(e.keys()).sort(t.compare)}},a=function(t){return function(e){return Array.from(e.values()).sort(t.compare)}},c=new Map;function f(t,e){var n=function t(e){return function(n,r){if(void 0===r){var o,s=t(e);return function(t){return s(n,t)}}for(var u=r.entries();!(o=u.next()).done;){var a=o.value,c=a[0],f=a[1];if(e.equals(c,n))return i.G([c,f])}return i.YP}}(t);return{concat:function(t,r){if(s(t))return r;if(s(r))return t;for(var o,u=new Map(t),a=r.entries();!(o=a.next()).done;){var c=o.value,f=c[0],l=c[1],p=n(f,t);i.pC(p)?u.set(p.value[0],e.concat(p.value[1],l)):u.set(f,l)}return u},empty:c}}var l=function(t,e){for(var n,r=new Map,i=t.entries();!(n=i.next()).done;){var o=n.value,s=o[0],u=o[1];r.set(s,e(s,u))}return r},p=function(t,e){return l(t,function(t,n){return e(n)})},d=function(t,e){return g(t,function(t,n){return e(n)})},h=function(t,e){return _(t,function(t,n){return e(n)})},v=function(t,e){return m(t,function(t,n){return e(n)})},y=function(t,e){return x(t,function(t,n){return e(n)})},g=function(t,e){return(0,r.zG)(t,function(t){for(var n,r=new Map,i=t.entries();!(n=i.next()).done;){var o=n.value,s=o[0],u=o[1];e(s,u)&&r.set(s,u)}return r})},_=function(t,e){return(0,r.zG)(t,function(t){for(var n,r=new Map,o=t.entries();!(n=o.next()).done;){var s=n.value,u=s[0],a=e(u,s[1]);i.pC(a)&&r.set(u,a.value)}return r})},m=function(t,e){return(0,r.zG)(t,function(t){for(var n,r=new Map,i=new Map,s=t.entries();!(n=s.next()).done;){var u=n.value,a=u[0],c=u[1];e(a,c)?i.set(a,c):r.set(a,c)}return o(r,i)})},x=function(t,e){return(0,r.zG)(t,function(t){for(var n,r=new Map,s=new Map,u=t.entries();!(n=u.next()).done;){var a=n.value,c=a[0],f=e(c,a[1]);i.nM(f)?r.set(c,f.left):s.set(c,f.right)}return o(r,s)})},b=function(t){for(var e,n=new Map,r=t.entries();!(e=r.next()).done;){var o=e.value,s=o[0],u=o[1];i.pC(u)&&n.set(s,u.value)}return n},S=function(t){for(var e,n=new Map,r=new Map,s=t.entries();!(e=s.next()).done;){var u=e.value,a=u[0],c=u[1];i.nM(c)?n.set(a,c.left):r.set(a,c.right)}return o(n,r)},w="ReadonlyMap";function I(){return{URI:w,_E:void 0,map:p,mapWithIndex:l,compact:b,separate:S,filter:d,filterMap:h,partition:v,partitionMap:y,partitionMapWithIndex:x,partitionWithIndex:m,filterMapWithIndex:_,filterWithIndex:g}}var E={URI:w,compact:b,separate:S},k=function(t){var e=O(t);return function(t,n){return e(t,function(t,e,r){return n(e,r)})}},M=function(t){var e=T(t);return function(t){var n=e(t);return function(t){return n(function(e,n){return t(n)})}}},R=function(t){var e=W(t);return function(t,n){return e(t,function(t,e,r){return n(e,r)})}},$=function(t){var e=k(t),n=M(t),i=R(t);return{URI:w,_E:void 0,reduce:function(t,n,i){return(0,r.zG)(t,e(n,i))},foldMap:function(t){var e=n(t);return function(t,n){return(0,r.zG)(t,e(n))}},reduceRight:function(t,e,n){return(0,r.zG)(t,i(e,n))}}},O=function(t){var e=u(t);return function(t,n){return function(r){for(var i=t,o=0,s=e(r);o<s.length;o++){var u=s[o];i=n(u,i,r.get(u))}return i}}},T=function(t){var e=u(t);return function(t){return function(n){return function(r){for(var i=t.empty,o=0,s=e(r);o<s.length;o++){var u=s[o];i=t.concat(i,n(u,r.get(u)))}return i}}}},W=function(t){var e=u(t);return function(t,n){return function(r){for(var i=t,o=e(r),s=o.length,u=s-1;u>=0;u--){var a=o[u];i=n(a,r.get(a),i)}return i}}},j=function(t){var e=$(t),n=O(t),i=T(t),o=W(t);return{URI:w,_E:void 0,reduce:e.reduce,foldMap:e.foldMap,reduceRight:e.reduceRight,reduceWithIndex:function(t,e,i){return(0,r.zG)(t,n(e,i))},foldMapWithIndex:function(t){var e=i(t);return function(t,n){return(0,r.zG)(t,e(n))}},reduceRightWithIndex:function(t,e,n){return(0,r.zG)(t,o(e,n))}}},D=function(t){var e=j(t),n=u(t),i=function(t){return function(e,r){for(var i=t.of(new Map),o=n(e),s=o.length,u=0;u<s;u++)!function(n){var s=o[n],u=e.get(s);i=t.ap(t.map(i,function(t){return function(e){return t.set(s,e)}}),r(s,u))}(u);return i}};return{URI:w,_E:void 0,map:p,mapWithIndex:l,reduce:e.reduce,foldMap:e.foldMap,reduceRight:e.reduceRight,reduceWithIndex:e.reduceWithIndex,foldMapWithIndex:e.foldMapWithIndex,reduceRightWithIndex:e.reduceRightWithIndex,traverse:function(t){var e=i(t);return function(t,n){return e(t,function(t,e){return n(e)})}},sequence:function(t){var e=i(t);return function(t){return e(t,r.SK)}},traverseWithIndex:i}};function A(t){var e=D(t);return{URI:w,_E:void 0,map:p,compact:b,separate:S,filter:d,filterMap:h,partition:v,partitionMap:y,reduce:e.reduce,foldMap:e.foldMap,reduceRight:e.reduceRight,traverse:e.traverse,sequence:e.sequence,mapWithIndex:l,reduceWithIndex:e.reduceWithIndex,foldMapWithIndex:e.foldMapWithIndex,reduceRightWithIndex:e.reduceRightWithIndex,traverseWithIndex:e.traverseWithIndex,wilt:function(t){var n=e.traverse(t);return function(e,r){return t.map(n(e,r),E.separate)}},wither:function(t){var n=e.traverse(t);return function(e,r){return t.map(n(e,r),E.compact)}}}}},945:function(t,e,n){n.d(e,{OB:()=>c,SK:()=>a,W8:()=>o,a9:()=>i,ls:()=>s,zG:()=>u});var r=function(t,e,n){if(n||2==arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))};function i(t){return function(){return t}}var o=i(!0);function s(t,e,n,r,i,o,s,u,a){switch(arguments.length){case 1:return t;case 2:return function(){return e(t.apply(this,arguments))};case 3:return function(){return n(e(t.apply(this,arguments)))};case 4:return function(){return r(n(e(t.apply(this,arguments))))};case 5:return function(){return i(r(n(e(t.apply(this,arguments)))))};case 6:return function(){return o(i(r(n(e(t.apply(this,arguments))))))};case 7:return function(){return s(o(i(r(n(e(t.apply(this,arguments)))))))};case 8:return function(){return u(s(o(i(r(n(e(t.apply(this,arguments))))))))};case 9:return function(){return a(u(s(o(i(r(n(e(t.apply(this,arguments)))))))))}}}function u(t,e,n,r,i,o,s,u,a){switch(arguments.length){case 1:return t;case 2:return e(t);case 3:return n(e(t));case 4:return r(n(e(t)));case 5:return i(r(n(e(t))));case 6:return o(i(r(n(e(t)))));case 7:return s(o(i(r(n(e(t))))));case 8:return u(s(o(i(r(n(e(t)))))));case 9:return a(u(s(o(i(r(n(e(t))))))));default:for(var c=arguments[0],f=1;f<arguments.length;f++)c=arguments[f](c);return c}}var a=function(t,e){return e},c=function(t,e){var n="number"==typeof t?function(e){return e.length>=t}:t;return function(){var t=Array.from(arguments);return n(arguments)?e.apply(this,t):function(n){return e.apply(void 0,r([n],t,!1))}}}},527:function(t,e,n){n.d(e,{F4:()=>d,G:()=>s,Gb:()=>l,Od:()=>c,Xl:()=>p,YM:()=>f,YP:()=>o,nM:()=>u,pC:()=>i,r1:()=>h,ri:()=>a});var r=function(t,e,n){if(n||2==arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},i=function(t){return"Some"===t._tag},o={_tag:"None"},s=function(t){return{_tag:"Some",value:t}},u=function(t){return"Left"===t._tag},a=function(t){return[t]},c=function(t){return t.length>0},f=function(t){return t[0]},l=function(t){return t.slice(1)},p=[],d={};Object.prototype.hasOwnProperty;var h=function(t){return r([t[0]],t.slice(1),!0)}},592:function(t,e,n){n.d(e,{Df:()=>i,Eq:()=>r});var r={equals:function(t,e){return t===e}},i={equals:r.equals,compare:function(t,e){return t<e?-1:+(t>e)}};r.equals,i.compare},78:function(t,e,n){var r=n(249),i="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},o=r.useState,s=r.useEffect,u=r.useLayoutEffect,a=r.useDebugValue;function c(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!i(t,n)}catch(t){return!0}}var f="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(t,e){return e()}:function(t,e){var n=e(),r=o({inst:{value:n,getSnapshot:e}}),i=r[0].inst,f=r[1];return u(function(){i.value=n,i.getSnapshot=e,c(i)&&f({inst:i})},[t,n,e]),s(function(){return c(i)&&f({inst:i}),t(function(){c(i)&&f({inst:i})})},[t]),a(n),n};e.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:f},140:function(t,e,n){var r=n(249),i=n(807),o="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},s=i.useSyncExternalStore,u=r.useRef,a=r.useEffect,c=r.useMemo,f=r.useDebugValue;e.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var l=u(null);if(null===l.current){var p={hasValue:!1,value:null};l.current=p}else p=l.current;var d=s(t,(l=c(function(){function t(t){if(!a){if(a=!0,s=t,t=r(t),void 0!==i&&p.hasValue){var e=p.value;if(i(e,t))return u=e}return u=t}if(e=u,o(s,t))return e;var n=r(t);return void 0!==i&&i(e,n)?(s=t,e):(s=t,u=n)}var s,u,a=!1,c=void 0===n?null:n;return[function(){return t(e())},null===c?void 0:function(){return t(c())}]},[e,n,r,i]))[0],l[1]);return a(function(){p.hasValue=!0,p.value=d},[d]),f(d),d}},807:function(t,e,n){t.exports=n(78)},452:function(t,e,n){t.exports=n(140)},11:function(t,e,n){n.d(e,{p4:()=>a});var r,i=n(662);let o="xstate.promise.resolve",s="xstate.promise.reject",u=new WeakMap;function a(t){return{config:t,transition:(t,e,n)=>{if("active"!==t.status)return t;switch(e.type){case o:{let n=e.data;return{...t,status:"done",output:n,input:void 0}}case s:return{...t,status:"error",error:e.data,input:void 0};case i.X:return u.get(n.self)?.abort(),{...t,status:"stopped",input:void 0};default:return t}},start:(e,{self:n,system:r,emit:i})=>{if("active"!==e.status)return;let a=new AbortController;u.set(n,a),Promise.resolve(t({input:e.input,system:r,self:n,signal:a.signal,emit:i})).then(t=>{"active"===n.getSnapshot().status&&(u.delete(n),r._relay(n,n,{type:o,data:t}))},t=>{"active"===n.getSnapshot().status&&(u.delete(n),r._relay(n,n,{type:s,data:t}))})},getInitialSnapshot:(t,e)=>({status:"active",output:void 0,error:void 0,input:e}),getPersistedSnapshot:t=>t,restoreSnapshot:t=>t}}r=void 0,t=>t},582:function(t,e,n){n.d(e,{a:()=>v,e:()=>a});var r,i=n(662),o=n(64);function s(t,e,n,r,{event:i}){return[e,{event:"function"==typeof i?i(n,r):i},void 0]}function u(t,{event:e}){t.defer(()=>t.emit(e))}function a(t){function e(t,e){}return e.type="xstate.emit",e.event=t,e.resolve=s,e.execute=u,e}let c=((r={}).Parent="#_parent",r.Internal="#_internal",r);function f(t,e,n,r,{to:i,event:o,id:s,delay:u},a){let f,l,p=e.machine.implementations.delays;if("string"==typeof o)throw Error(`Only event objects may be used with sendTo; use sendTo({ type: "${o}" }) instead`);let d="function"==typeof o?o(n,r):o;if("string"==typeof u){let t=p&&p[u];f="function"==typeof t?t(n,r):t}else f="function"==typeof u?u(n,r):u;let h="function"==typeof i?i(n,r):i;if("string"==typeof h){if(!(l=h===c.Parent?t.self._parent:h===c.Internal?t.self:h.startsWith("#_")?e.children[h.slice(2)]:a.deferredActorIds?.includes(h)?h:e.children[h]))throw Error(`Unable to send event to actor '${h}' from machine '${e.machine.id}'.`)}else l=h||t.self;return[e,{to:l,targetId:"string"==typeof h?h:void 0,event:d,id:s,delay:f},void 0]}function l(t,e,n){"string"==typeof n.to&&(n.to=e.children[n.to])}function p(t,e){t.defer(()=>{let{to:n,event:r,delay:o,id:s}=e;if("number"==typeof o)return void t.system.scheduler.schedule(t.self,n,r,o,s);t.system._relay(t.self,n,r.type===i.T?(0,i.U)(t.self.id,r.data):r)})}function d(t,e,n){function r(t,e){}return r.type="xstate.sendTo",r.to=t,r.event=e,r.id=n?.id,r.delay=n?.delay,r.resolve=f,r.retryResolve=l,r.execute=p,r}function h(t,e,n,r,{collect:s}){let u=[],f=function(t){u.push(t)};return f.assign=(...t)=>{u.push((0,o.a)(...t))},f.cancel=(...t)=>{u.push((0,i.f)(...t))},f.raise=(...t)=>{u.push((0,i.r)(...t))},f.sendTo=(...t)=>{u.push(d(...t))},f.sendParent=(...t)=>{u.push(function(t,e){return d(c.Parent,t,e)}(...t))},f.spawnChild=(...t)=>{u.push((0,i.h)(...t))},f.stopChild=(...t)=>{u.push((0,i.k)(...t))},f.emit=(...t)=>{u.push(a(...t))},s({context:n.context,event:n.event,enqueue:f,check:t=>(0,i.w)(t,e.context,n.event,e),self:t.self,system:t.system},r),[e,void 0,u]}function v(t){function e(t,e){}return e.type="xstate.enqueueActions",e.collect=t,e.resolve=h,e}},662:function(t,e,n){n.d(e,{$:()=>O,B:()=>tr,C:()=>tM,D:()=>H,E:()=>tj,F:()=>te,G:()=>tI,H:()=>function t(e,n,r,i){if("string"==typeof n){let t=tp(e,n).next(r,i);return t&&t.length?t:e.next(r,i)}if(1===Object.keys(n).length){let o=Object.keys(n),s=t(tp(e,o[0]),n[o[0]],r,i);return s&&s.length?s:e.next(r,i)}let o=[];for(let s of Object.keys(n)){let u=n[s];if(!u)continue;let a=t(tp(e,s),u,r,i);a&&o.push(...a)}return o.length?o:e.next(r,i)},I:()=>tw,J:()=>d,K:()=>tx,L:()=>tl,M:()=>y,N:()=>u,O:()=>tn,P:()=>td,Q:()=>tA,R:()=>k,S:()=>s,T:()=>c,U:()=>p,V:()=>T,W:()=>tD,X:()=>f,a:()=>F,c:()=>D,f:()=>G,g:()=>th,h:()=>N,k:()=>V,l:()=>_,n:()=>L,q:()=>ts,r:()=>tP,t:()=>m,u:()=>S,v:()=>to,w:()=>J,x:()=>E,y:()=>ti,z:()=>tu});var r,i=n(857);class o{constructor(t){this._process=t,this._active=!1,this._current=null,this._last=null}start(){this._active=!0,this.flush()}clear(){this._current&&(this._current.next=null,this._last=this._current)}enqueue(t){let e={value:t,next:null};if(this._current){this._last.next=e,this._last=e;return}this._current=e,this._last=e,this._active&&this.flush()}flush(){for(;this._current;){let t=this._current;this._process(t.value),this._current=t.next}this._last=null}}let s=".",u="",a="xstate.init",c="xstate.error",f="xstate.stop";function l(t,e){return{type:`xstate.done.state.${t}`,output:e}}function p(t,e){return{type:`xstate.error.actor.${t}`,error:e,actorId:t}}function d(t){return{type:a,input:t}}function h(t){setTimeout(()=>{throw t})}let v="function"==typeof Symbol&&Symbol.observable||"@@observable";function y(t){if(b(t))return t;let e=[],n="";for(let r=0;r<t.length;r++){switch(t.charCodeAt(r)){case 92:n+=t[r+1],r++;continue;case 46:e.push(n),n="";continue}n+=t[r]}return e.push(n),e}function g(t){var e;return(e=t)&&"object"==typeof e&&"machine"in e&&"value"in e?t.value:"string"!=typeof t?t:function(t){if(1===t.length)return t[0];let e={},n=e;for(let e=0;e<t.length-1;e++)if(e===t.length-2)n[t[e]]=t[e+1];else{let r=n;n={},r[t[e]]=n}return e}(y(t))}function _(t,e){let n={},r=Object.keys(t);for(let i=0;i<r.length;i++){let o=r[i];n[o]=e(t[o],o,t,i)}return n}function m(t){var e;return void 0===t?[]:b(e=t)?e:[e]}function x(t,e,n,r){return"function"==typeof t?t({context:e,event:n,self:r}):t}function b(t){return Array.isArray(t)}function S(t){var e;return(b(e=t)?e:[e]).map(t=>void 0===t||"string"==typeof t?{target:t}:t)}function w(t){if(void 0!==t&&""!==t)return m(t)}function I(t,e,n){let r="object"==typeof t,i=r?t:void 0;return{next:(r?t.next:t)?.bind(i),error:(r?t.error:e)?.bind(i),complete:(r?t.complete:n)?.bind(i)}}function E(t,e){return`${e}.${t}`}function k(t,e){let n=e.match(/^xstate\.invoke\.(\d+)\.(.*)/);if(!n)return t.implementations.actors[e];let[,r,i]=n,o=t.getStateNodeById(i).config.invoke;return(Array.isArray(o)?o[r]:o).src}function M(t,e){return`${t.sessionId}.${e}`}let R=0,$=!1,O=1,T=((r={})[r.NotStarted=0]="NotStarted",r[r.Running=1]="Running",r[r.Stopped=2]="Stopped",r),W={clock:{setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t)},logger:console.log.bind(console),devTools:!1};class j{constructor(t,e){this.logic=t,this._snapshot=void 0,this.clock=void 0,this.options=void 0,this.id=void 0,this.mailbox=new o(this._process.bind(this)),this.observers=new Set,this.eventListeners=new Map,this.logger=void 0,this._processingStatus=T.NotStarted,this._parent=void 0,this._syncSnapshot=void 0,this.ref=void 0,this._actorScope=void 0,this._systemId=void 0,this.sessionId=void 0,this.system=void 0,this._doneEvent=void 0,this.src=void 0,this._deferred=[];let n={...W,...e},{clock:r,logger:i,parent:s,syncSnapshot:u,id:a,systemId:c,inspect:f}=n;this.system=s?s.system:function(t,e){let n=new Map,r=new Map,i=new WeakMap,o=new Set,s={},{clock:u,logger:a}=e,c={schedule:(t,e,n,r,i=Math.random().toString(36).slice(2))=>{let o={source:t,target:e,event:n,delay:r,id:i,startedAt:Date.now()},a=M(t,i);f._snapshot._scheduledEvents[a]=o;let c=u.setTimeout(()=>{delete s[a],delete f._snapshot._scheduledEvents[a],f._relay(t,e,n)},r);s[a]=c},cancel:(t,e)=>{let n=M(t,e),r=s[n];delete s[n],delete f._snapshot._scheduledEvents[n],void 0!==r&&u.clearTimeout(r)},cancelAll:t=>{for(let e in f._snapshot._scheduledEvents){let n=f._snapshot._scheduledEvents[e];n.source===t&&c.cancel(t,n.id)}}},f={_snapshot:{_scheduledEvents:(e?.snapshot&&e.snapshot.scheduler)??{}},_bookId:()=>`x:${R++}`,_register:(t,e)=>(n.set(t,e),t),_unregister:t=>{n.delete(t.sessionId);let e=i.get(t);void 0!==e&&(r.delete(e),i.delete(t))},get:t=>r.get(t),_set:(t,e)=>{let n=r.get(t);if(n&&n!==e)throw Error(`Actor with system ID '${t}' already exists.`);r.set(t,e),i.set(e,t)},inspect:t=>{let e=I(t);return o.add(e),{unsubscribe(){o.delete(e)}}},_sendInspectionEvent:e=>{if(!o.size)return;let n={...e,rootId:t.sessionId};o.forEach(t=>t.next?.(n))},_relay:(t,e,n)=>{f._sendInspectionEvent({type:"@xstate.event",sourceRef:t,actorRef:e,event:n}),e._send(n)},scheduler:c,getSnapshot:()=>({_scheduledEvents:{...f._snapshot._scheduledEvents}}),start:()=>{let t=f._snapshot._scheduledEvents;for(let e in f._snapshot._scheduledEvents={},t){let{source:n,target:r,event:i,delay:o,id:s}=t[e];c.schedule(n,r,i,o,s)}},_clock:u,_logger:a};return f}(this,{clock:r,logger:i}),f&&!s&&this.system.inspect(I(f)),this.sessionId=this.system._bookId(),this.id=a??this.sessionId,this.logger=e?.logger??this.system._logger,this.clock=e?.clock??this.system._clock,this._parent=s,this._syncSnapshot=u,this.options=n,this.src=n.src??t,this.ref=this,this._actorScope={self:this,id:this.id,sessionId:this.sessionId,logger:this.logger,defer:t=>{this._deferred.push(t)},system:this.system,stopChild:t=>{if(t._parent!==this)throw Error(`Cannot stop child actor ${t.id} of ${this.id} because it is not a child`);t._stop()},emit:t=>{let e=this.eventListeners.get(t.type),n=this.eventListeners.get("*");if(e||n)for(let r of[...e?e.values():[],...n?n.values():[]])try{r(t)}catch(t){h(t)}},actionExecutor:t=>{let e=()=>{if(this._actorScope.system._sendInspectionEvent({type:"@xstate.action",actorRef:this,action:{type:t.type,params:t.params}}),!t.exec)return;let e=$;try{$=!0,t.exec(t.info,t.params)}finally{$=e}};this._processingStatus===T.Running?e():this._deferred.push(e)}},this.send=this.send.bind(this),this.system._sendInspectionEvent({type:"@xstate.actor",actorRef:this}),c&&(this._systemId=c,this.system._set(c,this)),this._initState(e?.snapshot??e?.state),c&&"active"!==this._snapshot.status&&this.system._unregister(this)}_initState(t){try{this._snapshot=t?this.logic.restoreSnapshot?this.logic.restoreSnapshot(t,this._actorScope):t:this.logic.getInitialSnapshot(this._actorScope,this.options?.input)}catch(t){this._snapshot={status:"error",output:void 0,error:t}}}update(t,e){let n;for(this._snapshot=t;n=this._deferred.shift();)try{n()}catch(e){this._deferred.length=0,this._snapshot={...t,status:"error",error:e}}switch(this._snapshot.status){case"active":for(let e of this.observers)try{e.next?.(t)}catch(t){h(t)}break;case"done":var r;for(let e of this.observers)try{e.next?.(t)}catch(t){h(t)}this._stopProcedure(),this._complete(),this._doneEvent=(r=this.id,{type:`xstate.done.actor.${r}`,output:this._snapshot.output,actorId:r}),this._parent&&this.system._relay(this,this._parent,this._doneEvent);break;case"error":this._error(this._snapshot.error)}this.system._sendInspectionEvent({type:"@xstate.snapshot",actorRef:this,event:e,snapshot:t})}subscribe(t,e,n){let r=I(t,e,n);if(this._processingStatus!==T.Stopped)this.observers.add(r);else switch(this._snapshot.status){case"done":try{r.complete?.()}catch(t){h(t)}break;case"error":{let t=this._snapshot.error;if(r.error)try{r.error(t)}catch(t){h(t)}else h(t)}}return{unsubscribe:()=>{this.observers.delete(r)}}}on(t,e){let n=this.eventListeners.get(t);n||(n=new Set,this.eventListeners.set(t,n));let r=e.bind(void 0);return n.add(r),{unsubscribe:()=>{n.delete(r)}}}start(){if(this._processingStatus===T.Running)return this;this._syncSnapshot&&this.subscribe({next:t=>{"active"===t.status&&this.system._relay(this,this._parent,{type:`xstate.snapshot.${this.id}`,snapshot:t})},error:()=>{}}),this.system._register(this.sessionId,this),this._systemId&&this.system._set(this._systemId,this),this._processingStatus=T.Running;let t=d(this.options.input);switch(this.system._sendInspectionEvent({type:"@xstate.event",sourceRef:this._parent,actorRef:this,event:t}),this._snapshot.status){case"done":return this.update(this._snapshot,t),this;case"error":return this._error(this._snapshot.error),this}if(this._parent||this.system.start(),this.logic.start)try{this.logic.start(this._snapshot,this._actorScope)}catch(t){return this._snapshot={...this._snapshot,status:"error",error:t},this._error(t),this}return this.update(this._snapshot,t),this.options.devTools&&this.attachDevTools(),this.mailbox.start(),this}_process(t){let e,n;try{e=this.logic.transition(this._snapshot,t,this._actorScope)}catch(t){n={err:t}}if(n){let{err:t}=n;this._snapshot={...this._snapshot,status:"error",error:t},this._error(t);return}this.update(e,t),t.type===f&&(this._stopProcedure(),this._complete())}_stop(){return this._processingStatus===T.Stopped||((this.mailbox.clear(),this._processingStatus===T.NotStarted)?this._processingStatus=T.Stopped:this.mailbox.enqueue({type:f})),this}stop(){if(this._parent)throw Error("A non-root actor cannot be stopped directly.");return this._stop()}_complete(){for(let t of this.observers)try{t.complete?.()}catch(t){h(t)}this.observers.clear()}_reportError(t){if(!this.observers.size){this._parent||h(t);return}let e=!1;for(let n of this.observers){let r=n.error;e||=!r;try{r?.(t)}catch(t){h(t)}}this.observers.clear(),e&&h(t)}_error(t){this._stopProcedure(),this._reportError(t),this._parent&&this.system._relay(this,this._parent,p(this.id,t))}_stopProcedure(){return this._processingStatus!==T.Running||(this.system.scheduler.cancelAll(this),this.mailbox.clear(),this.mailbox=new o(this._process.bind(this)),this._processingStatus=T.Stopped,this.system._unregister(this)),this}_send(t){this._processingStatus!==T.Stopped&&this.mailbox.enqueue(t)}send(t){this.system._relay(void 0,this,t)}attachDevTools(){let{devTools:t}=this.options;t&&("function"==typeof t?t:i.tm)(this)}toJSON(){return{xstate$$type:O,id:this.id}}getPersistedSnapshot(t){return this.logic.getPersistedSnapshot(this._snapshot,t)}[v](){return this}getSnapshot(){return this._snapshot}}function D(t,...[e]){return new j(t,e)}function A(t,e,n,r,{sendId:i}){return[e,{sendId:"function"==typeof i?i(n,r):i},void 0]}function C(t,e){t.defer(()=>{t.system.scheduler.cancel(t.self,e.sendId)})}function G(t){function e(t,e){}return e.type="xstate.cancel",e.sendId=t,e.resolve=A,e.execute=C,e}function P(t,e,n,r,{id:i,systemId:o,src:s,input:u,syncSnapshot:a}){let c,f,l="string"==typeof s?k(e.machine,s):s,p="function"==typeof i?i(n):i;return l&&(f="function"==typeof u?u({context:e.context,event:n.event,self:t.self}):u,c=D(l,{id:p,src:s,parent:t.self,syncSnapshot:a,systemId:o,input:f})),[tD(e,{children:{...e.children,[p]:c}}),{id:i,systemId:o,actorRef:c,src:s,input:f},void 0]}function z(t,{actorRef:e}){e&&t.defer(()=>{e._processingStatus!==T.Stopped&&e.start()})}function N(...[t,{id:e,systemId:n,input:r,syncSnapshot:i=!1}={}]){function o(t,e){}return o.type="xstate.spawnChild",o.id=e,o.systemId=n,o.src=t,o.input=r,o.syncSnapshot=i,o.resolve=P,o.execute=z,o}function q(t,e,n,r,{actorRef:i}){let o="function"==typeof i?i(n,r):i,s="string"==typeof o?e.children[o]:o,u=e.children;return s&&(u={...u},delete u[s.id]),[tD(e,{children:u}),s,void 0]}function U(t,e){if(e){if(t.system._unregister(e),e._processingStatus!==T.Running)return void t.stopChild(e);t.defer(()=>{t.stopChild(e)})}}function V(t){function e(t,e){}return e.type="xstate.stopChild",e.actorRef=t,e.resolve=q,e.execute=U,e}function B(t,{context:e,event:n},{guards:r}){return!J(r[0],e,n,t)}function L(t){function e(t,e){return!1}return e.check=B,e.guards=[t],e}function Y(t,{context:e,event:n},{guards:r}){return r.every(r=>J(r,e,n,t))}function F(t){function e(t,e){return!1}return e.check=Y,e.guards=t,e}function J(t,e,n,r){let{machine:i}=r,o="function"==typeof t,s=o?t:i.implementations.guards["string"==typeof t?t:t.type];if(!o&&!s)throw Error(`Guard '${"string"==typeof t?t:t.type}' is not implemented.'.`);if("function"!=typeof s)return J(s,e,n,r);let u={context:e,event:n},a=o||"string"==typeof t?void 0:"params"in t?"function"==typeof t.params?t.params({context:e,event:n}):t.params:void 0;return"check"in s?s.check(r,u,s):s(u,a)}let X=t=>"atomic"===t.type||"final"===t.type;function Z(t){return Object.values(t.states).filter(t=>"history"!==t.type)}function K(t,e){let n=[];if(e===t)return n;let r=t.parent;for(;r&&r!==e;)n.push(r),r=r.parent;return n}function H(t){let e=new Set(t),n=Q(e);for(let t of e)if("compound"!==t.type||n.get(t)&&n.get(t).length){if("parallel"===t.type){for(let n of Z(t))if("history"!==n.type&&!e.has(n))for(let t of tf(n))e.add(t)}}else tf(t).forEach(t=>e.add(t));for(let t of e){let n=t.parent;for(;n;)e.add(n),n=n.parent}return e}function Q(t){let e=new Map;for(let n of t)e.has(n)||e.set(n,[]),n.parent&&(e.has(n.parent)||e.set(n.parent,[]),e.get(n.parent).push(n));return e}function tt(t,e){return function t(e,n){let r=n.get(e);if(!r)return{};if("compound"===e.type){let t=r[0];if(!t)return{};if(X(t))return t.key}let i={};for(let e of r)i[e.key]=t(e,n);return i}(t,Q(H(e)))}function te(t,e){return"compound"===e.type?Z(e).some(e=>"final"===e.type&&t.has(e)):"parallel"===e.type?Z(e).every(e=>te(t,e)):"final"===e.type}let tn=t=>"#"===t[0];function tr(t,e){return t.transitions.get(e)||[...t.transitions.keys()].filter(t=>{if("*"===t)return!0;if(!t.endsWith(".*"))return!1;let n=t.split("."),r=e.split(".");for(let t=0;t<n.length;t++){let e=n[t],i=r[t];if("*"===e)return t===n.length-1;if(e!==i)return!1}return!0}).sort((t,e)=>e.length-t.length).flatMap(e=>t.transitions.get(e))}function ti(t){let e=t.config.after;return e?Object.keys(e).flatMap(n=>{let r=e[n],i=Number.isNaN(+n)?n:+n,o=(e=>{var n;let r=(n=t.id,{type:`xstate.after.${e}.${n}`}),i=r.type;return t.entry.push(tP(r,{id:i,delay:e})),t.exit.push(G(i)),i})(i);return m("string"==typeof r?{target:r}:r).map(t=>({...t,event:o,delay:i}))}).map(e=>{let{delay:n}=e;return{...to(t,e.event,e),delay:n}}):[]}function to(t,e,n){let r=w(n.target),i=n.reenter??!1,o=function(t,e){if(void 0!==e)return e.map(e=>{if("string"!=typeof e)return e;if(tn(e))return t.machine.getStateNodeById(e);let n=e[0]===s;if(n&&!t.parent)return td(t,e.slice(1));let r=n?t.key+e:e;if(t.parent)try{return td(t.parent,r)}catch(e){throw Error(`Invalid transition definition for state node '${t.id}':
${e.message}`)}throw Error(`Invalid target: "${e}" is not a valid target from the root node. Did you mean ".${e}"?`)})}(t,r),u={...n,actions:m(n.actions),guard:n.guard,target:o,source:t,reenter:i,eventType:e,toJSON:()=>({...u,source:`#${t.id}`,target:o?o.map(t=>`#${t.id}`):void 0})};return u}function ts(t){let e=new Map;if(t.config.on)for(let n of Object.keys(t.config.on)){if(n===u)throw Error('Null events ("") cannot be specified as a transition key. Use `always: { ... }` instead.');let r=t.config.on[n];e.set(n,S(r).map(e=>to(t,n,e)))}if(t.config.onDone){let n=`xstate.done.state.${t.id}`;e.set(n,S(t.config.onDone).map(e=>to(t,n,e)))}for(let n of t.invoke){if(n.onDone){let r=`xstate.done.actor.${n.id}`;e.set(r,S(n.onDone).map(e=>to(t,r,e)))}if(n.onError){let r=`xstate.error.actor.${n.id}`;e.set(r,S(n.onError).map(e=>to(t,r,e)))}if(n.onSnapshot){let r=`xstate.snapshot.${n.id}`;e.set(r,S(n.onSnapshot).map(e=>to(t,r,e)))}}for(let n of t.after){let t=e.get(n.eventType);t||(t=[],e.set(n.eventType,t)),t.push(n)}return e}function tu(t,e){let n="string"==typeof e?t.states[e]:e?t.states[e.target]:void 0;if(!n&&e)throw Error(`Initial state node "${e}" not found on parent state node #${t.id}`);let r={source:t,actions:e&&"string"!=typeof e?m(e.actions):[],eventType:null,reenter:!1,target:n?[n]:[],toJSON:()=>({...r,source:`#${t.id}`,target:n?[`#${n.id}`]:[]})};return r}function ta(t){let e=w(t.config.target);return e?{target:e.map(e=>"string"==typeof e?td(t.parent,e):e)}:t.parent.initial}function tc(t){return"history"===t.type}function tf(t){let e=tl(t);for(let n of e)for(let r of K(n,t))e.add(r);return e}function tl(t){let e=new Set;return!function t(n){if(!e.has(n)){if(e.add(n),"compound"===n.type)t(n.initial.target[0]);else if("parallel"===n.type)for(let e of Z(n))t(e)}}(t),e}function tp(t,e){if(tn(e))return t.machine.getStateNodeById(e);if(!t.states)throw Error(`Unable to retrieve child state '${e}' from '${t.id}'; no child states exist.`);let n=t.states[e];if(!n)throw Error(`Child state '${e}' does not exist on '${t.id}'`);return n}function td(t,e){if("string"==typeof e&&tn(e))try{return t.machine.getStateNodeById(e)}catch{}let n=y(e).slice(),r=t;for(;n.length;){let t=n.shift();if(!t.length)break;r=tp(r,t)}return r}function th(t,e){if("string"==typeof e){let n=t.states[e];if(!n)throw Error(`State '${e}' does not exist on '${t.id}'`);return[t,n]}let n=Object.keys(e),r=n.map(e=>tp(t,e)).filter(Boolean);return[t.machine.root,t].concat(r,n.reduce((n,r)=>{let i=tp(t,r);if(!i)return n;let o=th(i,e[r]);return n.concat(o)},[]))}function tv(t,e){let n=t;for(;n.parent&&n.parent!==e;)n=n.parent;return n.parent===e}function ty(t,e,n){let r=new Set;for(let i of t){let t=!1,o=new Set;for(let s of r)if(function(t,e){let n=new Set(t),r=new Set(e);for(let t of n)if(r.has(t))return!0;for(let t of r)if(n.has(t))return!0;return!1}(tm([i],e,n),tm([s],e,n)))if(tv(i.source,s.source))o.add(s);else{t=!0;break}if(!t){for(let t of o)r.delete(t);r.add(i)}}return Array.from(r)}function tg(t,e){if(!t.target)return[];let n=new Set;for(let r of t.target)if(tc(r))if(e[r.id])for(let t of e[r.id])n.add(t);else for(let t of tg(ta(r),e))n.add(t);else n.add(r);return[...n]}function t_(t,e){let n=tg(t,e);if(!n)return;if(!t.reenter&&n.every(e=>e===t.source||tv(e,t.source)))return t.source;let r=function(t){let[e,...n]=t;for(let t of K(e,void 0))if(n.every(e=>tv(e,t)))return t}(n.concat(t.source));return r||(t.reenter?void 0:t.source.machine.root)}function tm(t,e,n){let r=new Set;for(let i of t)if(i.target?.length){let t=t_(i,n);for(let n of(i.reenter&&i.source===t&&r.add(t),e))tv(n,t)&&r.add(n)}return[...r]}function tx(t,e,n,r,i,o){if(!t.length)return e;let s=new Set(e._nodes),u=e.historyValue,a=ty(t,s,u),c=e;i||([c,u]=function(t,e,n,r,i,o,s,u){let a,c=t,f=tm(r,i,o);for(let t of(f.sort((t,e)=>e.order-t.order),f))for(let e of function(t){return Object.keys(t.states).map(e=>t.states[e]).filter(t=>"history"===t.type)}(t)){let n;n="deep"===e.history?e=>X(e)&&tv(e,t):e=>e.parent===t,(a??={...o})[e.id]=Array.from(i).filter(n)}for(let t of f)c=tw(c,e,n,[...t.exit,...t.invoke.map(t=>V(t.id))],s,void 0),i.delete(t);return[c,a||o]}(c,r,n,a,s,u,o,n.actionExecutor)),c=function(t,e,n,r,i,o,s,u){let a=t,c=new Set,f=new Set;(function(t,e,n,r){for(let i of t){let t=t_(i,e);for(let o of i.target||[])!tc(o)&&(i.source!==o||i.source!==t||i.reenter)&&(r.add(o),n.add(o)),tb(o,e,n,r);for(let o of tg(i,e)){let s=K(o,t);t?.type==="parallel"&&s.push(t),tS(r,e,n,s,!i.source.parent&&i.reenter?void 0:t)}}})(r,s,f,c),u&&f.add(t.machine.root);let p=new Set;for(let t of[...c].sort((t,e)=>t.order-e.order)){i.add(t);let r=[];for(let e of(r.push(...t.entry),t.invoke))r.push(N(e.src,{...e,syncSnapshot:!!e.onSnapshot}));if(f.has(t)){let e=t.initial.actions;r.push(...e)}if(a=tw(a,e,n,r,o,t.invoke.map(t=>t.id)),"final"===t.type){let r=t.parent,s=r?.type==="parallel"?r:r?.parent,u=s||t;for(r?.type==="compound"&&o.push(l(r.id,void 0!==t.output?x(t.output,a.context,e,n.self):void 0));s?.type==="parallel"&&!p.has(s)&&te(i,s);)p.add(s),o.push(l(s.id)),u=s,s=s.parent;if(s)continue;a=tD(a,{status:"done",output:function(t,e,n,r,i){if(void 0===r.output)return;let o=l(i.id,void 0!==i.output&&i.parent?x(i.output,t.context,e,n.self):void 0);return x(r.output,t.context,o,n.self)}(a,e,n,a.machine.root,u)})}}return a}(c=tw(c,r,n,a.flatMap(t=>t.actions),o,void 0),r,n,a,s,o,u,i);let f=[...s];"done"===c.status&&(c=tw(c,r,n,f.sort((t,e)=>e.order-t.order).flatMap(t=>t.exit),o,void 0));try{if(u===e.historyValue&&function(t,e){if(t.length!==e.size)return!1;for(let n of t)if(!e.has(n))return!1;return!0}(e._nodes,s))return c;return tD(c,{_nodes:f,historyValue:u})}catch(t){throw t}}function tb(t,e,n,r){var i,o,s,u;if(tc(t))if(e[t.id]){let s=e[t.id];for(let t of s)r.add(t),tb(t,e,n,r);for(let u of s){i=u,o=t.parent,tS(r,e,n,K(i,o))}}else{let i=ta(t);for(let o of i.target)r.add(o),i===t.parent?.initial&&n.add(t.parent),tb(o,e,n,r);for(let o of i.target){s=o,u=t.parent,tS(r,e,n,K(s,u))}}else if("compound"===t.type){let[i]=t.initial.target;tc(i)||(r.add(i),n.add(i)),tb(i,e,n,r),tS(r,e,n,K(i,t))}else if("parallel"===t.type)for(let i of Z(t).filter(t=>!tc(t)))[...r].some(t=>tv(t,i))||(tc(i)||(r.add(i),n.add(i)),tb(i,e,n,r))}function tS(t,e,n,r,i){for(let o of r)if((!i||tv(o,i))&&t.add(o),"parallel"===o.type)for(let r of Z(o).filter(t=>!tc(t)))[...t].some(t=>tv(t,r))||(t.add(r),tb(r,e,n,t))}function tw(t,e,n,r,i,o){let s=o?[]:void 0,u=function t(e,n,r,i,o,s){let{machine:u}=e,a=e;for(let e of i){var c;let i="function"==typeof e,f=i?e:(c="string"==typeof e?e:e.type,u.implementations.actions[c]),l={context:a.context,event:n,self:r.self,system:r.system},p=i||"string"==typeof e?void 0:"params"in e?"function"==typeof e.params?e.params({context:a.context,event:n}):e.params:void 0;if(!f||!("resolve"in f)){r.actionExecutor({type:"string"==typeof e?e:"object"==typeof e?e.type:e.name||"(anonymous)",info:l,params:p,exec:f});continue}let[d,h,v]=f.resolve(r,a,l,p,f,o);a=d,"retryResolve"in f&&s?.push([f,h]),"execute"in f&&r.actionExecutor({type:f.type,info:l,params:h,exec:f.execute.bind(null,r,h)}),v&&(a=t(a,n,r,v,o,s))}return a}(t,e,n,r,{internalQueue:i,deferredActorIds:o},s);return s?.forEach(([t,e])=>{t.retryResolve(n,u,e)}),u}function tI(t,e,n,r){let i=t,o=[];function s(t,e,r){n.system._sendInspectionEvent({type:"@xstate.microstep",actorRef:n.self,event:e,snapshot:t,_transitions:r}),o.push(t)}if(e.type===f)return s(i=tD(tE(i,e,n),{status:"stopped"}),e,[]),{snapshot:i,microstates:o};let u=e;if(u.type!==a){let e=u,a=e.type.startsWith("xstate.error.actor"),c=tk(e,i);if(a&&!c.length)return s(i=tD(t,{status:"error",error:e.error}),e,[]),{snapshot:i,microstates:o};s(i=tx(c,t,n,u,!1,r),e,c)}let c=!0;for(;"active"===i.status;){let t=c?function(t,e){let n=new Set;for(let r of t._nodes.filter(X))e:for(let i of[r].concat(K(r,void 0)))if(i.always){for(let r of i.always)if(void 0===r.guard||J(r.guard,t.context,e,t)){n.add(r);break e}}return ty(Array.from(n),new Set(t._nodes),t.historyValue)}(i,u):[],e=t.length?i:void 0;if(!t.length){if(!r.length)break;t=tk(u=r.shift(),i)}c=(i=tx(t,i,n,u,!1,r))!==e,s(i,u,t)}return"active"!==i.status&&tE(i,u,n),{snapshot:i,microstates:o}}function tE(t,e,n){return tw(t,e,n,Object.values(t.children).map(t=>V(t)),[],void 0)}function tk(t,e){return e.machine.getTransitionData(e,t)}function tM(t,e){let n=H(th(t,e));return tt(t,[...n])}let tR=function(t){return function t(e,n){let r=g(e),i=g(n);return"string"==typeof i?"string"==typeof r&&i===r:"string"==typeof r?r in i:Object.keys(r).every(e=>e in i&&t(r[e],i[e]))}(t,this.value)},t$=function(t){return this.tags.has(t)},tO=function(t){let e=this.machine.getTransitionData(this,t);return!!e?.length&&e.some(t=>void 0!==t.target||t.actions.length)},tT=function(){let{_nodes:t,tags:e,machine:n,getMeta:r,toJSON:i,can:o,hasTag:s,matches:u,...a}=this;return{...a,tags:Array.from(e)}},tW=function(){return this._nodes.reduce((t,e)=>(void 0!==e.meta&&(t[e.id]=e.meta),t),{})};function tj(t,e){return{status:t.status,output:t.output,error:t.error,machine:e,context:t.context,_nodes:t._nodes,value:tt(e.root,t._nodes),tags:new Set(t._nodes.flatMap(t=>t.tags)),children:t.children,historyValue:t.historyValue||{},matches:tR,hasTag:t$,can:tO,getMeta:tW,toJSON:tT}}function tD(t,e={}){return tj({...t,...e},t.machine)}function tA(t,e){let{_nodes:n,tags:r,machine:i,children:o,context:s,can:u,hasTag:a,matches:c,getMeta:f,toJSON:l,...p}=t,d={};for(let t in o){let n=o[t];d[t]={snapshot:n.getPersistedSnapshot(e),src:n.src,systemId:n._systemId,syncSnapshot:n._syncSnapshot}}return{...p,context:function t(e){let n;for(let r in e){let i=e[r];if(i&&"object"==typeof i)if("sessionId"in i&&"send"in i&&"ref"in i)(n??=Array.isArray(e)?e.slice():{...e})[r]={xstate$$type:O,id:i.id};else{let o=t(i);o!==i&&((n??=Array.isArray(e)?e.slice():{...e})[r]=o)}}return n??e}(s),children:d,historyValue:function(t){if("object"!=typeof t||null===t)return{};let e={};for(let n in t){let r=t[n];Array.isArray(r)&&(e[n]=r.map(t=>({id:t.id})))}return e}(p.historyValue)}}function tC(t,e,n,r,{event:i,id:o,delay:s},{internalQueue:u}){let a,c=e.machine.implementations.delays;if("string"==typeof i)throw Error(`Only event objects may be used with raise; use raise({ type: "${i}" }) instead`);let f="function"==typeof i?i(n,r):i;if("string"==typeof s){let t=c&&c[s];a="function"==typeof t?t(n,r):t}else a="function"==typeof s?s(n,r):s;return"number"!=typeof a&&u.push(f),[e,{event:f,id:o,delay:a},void 0]}function tG(t,e){let{event:n,delay:r,id:i}=e;if("number"==typeof r)return void t.defer(()=>{let e=t.self;t.system.scheduler.schedule(e,e,n,r,i)})}function tP(t,e){function n(t,e){}return n.type="xstate.raise",n.event=t,n.id=e?.id,n.delay=e?.delay,n.resolve=tC,n.execute=tG,n}}}]);