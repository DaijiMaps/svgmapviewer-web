"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["366"],{11:function(){var t;new WeakMap,t=void 0,t=>t},662:function(t,e,s){s.d(e,{$:()=>$,B:()=>G,C:()=>tv,D:()=>L,E:()=>tI,F:()=>J,G:()=>t_,H:()=>function t(e,s,r,i){if("string"==typeof s){let t=ti(e,s).next(r,i);return t&&t.length?t:e.next(r,i)}if(1===Object.keys(s).length){let n=Object.keys(s),o=t(ti(e,n[0]),s[n[0]],r,i);return o&&o.length?o:e.next(r,i)}let n=[];for(let o of Object.keys(s)){let a=s[o];if(!a)continue;let h=t(ti(e,o),a,r,i);h&&n.push(...h)}return n.length?n:e.next(r,i)},I:()=>ty,J:()=>f,K:()=>tc,L:()=>tr,M:()=>p,N:()=>a,O:()=>W,P:()=>tn,Q:()=>tA,R:()=>E,S:()=>o,V:()=>M,W:()=>tk,c:()=>R,g:()=>to,l:()=>_,q:()=>Q,t:()=>m,u:()=>x,v:()=>K,w:()=>z,x:()=>w,y:()=>H,z:()=>Z});var r,i=s(857);class n{constructor(t){this._process=t,this._active=!1,this._current=null,this._last=null}start(){this._active=!0,this.flush()}clear(){this._current&&(this._current.next=null,this._last=this._current)}enqueue(t){let e={value:t,next:null};if(this._current){this._last.next=e,this._last=e;return}this._current=e,this._last=e,this._active&&this.flush()}flush(){for(;this._current;){let t=this._current;this._process(t.value),this._current=t.next}this._last=null}}let o=".",a="",h="xstate.init",l="xstate.stop";function u(t,e){return{type:`xstate.done.state.${t}`,output:e}}function f(t){return{type:h,input:t}}function c(t){setTimeout(()=>{throw t})}let d="function"==typeof Symbol&&Symbol.observable||"@@observable";function p(t){if(v(t))return t;let e=[],s="";for(let r=0;r<t.length;r++){switch(t.charCodeAt(r)){case 92:s+=t[r+1],r++;continue;case 46:e.push(s),s="";continue}s+=t[r]}return e.push(s),e}function y(t){var e;return(e=t)&&"object"==typeof e&&"machine"in e&&"value"in e?t.value:"string"!=typeof t?t:function(t){if(1===t.length)return t[0];let e={},s=e;for(let e=0;e<t.length-1;e++)if(e===t.length-2)s[t[e]]=t[e+1];else{let r=s;s={},r[t[e]]=s}return e}(p(t))}function _(t,e){let s={},r=Object.keys(t);for(let i=0;i<r.length;i++){let n=r[i];s[n]=e(t[n],n,t,i)}return s}function m(t){var e;return void 0===t?[]:v(e=t)?e:[e]}function g(t,e,s,r){return"function"==typeof t?t({context:e,event:s,self:r}):t}function v(t){return Array.isArray(t)}function x(t){var e;return(v(e=t)?e:[e]).map(t=>void 0===t||"string"==typeof t?{target:t}:t)}function b(t){if(void 0!==t&&""!==t)return m(t)}function S(t,e,s){let r="object"==typeof t,i=r?t:void 0;return{next:(r?t.next:t)?.bind(i),error:(r?t.error:e)?.bind(i),complete:(r?t.complete:s)?.bind(i)}}function w(t,e){return`${e}.${t}`}function E(t,e){let s=e.match(/^xstate\.invoke\.(\d+)\.(.*)/);if(!s)return t.implementations.actors[e];let[,r,i]=s,n=t.getStateNodeById(i).config.invoke;return(Array.isArray(n)?n[r]:n).src}function I(t,e){return`${t.sessionId}.${e}`}let k=0,A=!1,$=1,M=((r={})[r.NotStarted=0]="NotStarted",r[r.Running=1]="Running",r[r.Stopped=2]="Stopped",r),T={clock:{setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t)},logger:console.log.bind(console),devTools:!1};class N{constructor(t,e){this.logic=t,this._snapshot=void 0,this.clock=void 0,this.options=void 0,this.id=void 0,this.mailbox=new n(this._process.bind(this)),this.observers=new Set,this.eventListeners=new Map,this.logger=void 0,this._processingStatus=M.NotStarted,this._parent=void 0,this._syncSnapshot=void 0,this.ref=void 0,this._actorScope=void 0,this._systemId=void 0,this.sessionId=void 0,this.system=void 0,this._doneEvent=void 0,this.src=void 0,this._deferred=[];let s={...T,...e},{clock:r,logger:i,parent:o,syncSnapshot:a,id:h,systemId:l,inspect:u}=s;this.system=o?o.system:function(t,e){let s=new Map,r=new Map,i=new WeakMap,n=new Set,o={},{clock:a,logger:h}=e,l={schedule:(t,e,s,r,i=Math.random().toString(36).slice(2))=>{let n={source:t,target:e,event:s,delay:r,id:i,startedAt:Date.now()},h=I(t,i);u._snapshot._scheduledEvents[h]=n;let l=a.setTimeout(()=>{delete o[h],delete u._snapshot._scheduledEvents[h],u._relay(t,e,s)},r);o[h]=l},cancel:(t,e)=>{let s=I(t,e),r=o[s];delete o[s],delete u._snapshot._scheduledEvents[s],void 0!==r&&a.clearTimeout(r)},cancelAll:t=>{for(let e in u._snapshot._scheduledEvents){let s=u._snapshot._scheduledEvents[e];s.source===t&&l.cancel(t,s.id)}}},u={_snapshot:{_scheduledEvents:(e?.snapshot&&e.snapshot.scheduler)??{}},_bookId:()=>`x:${k++}`,_register:(t,e)=>(s.set(t,e),t),_unregister:t=>{s.delete(t.sessionId);let e=i.get(t);void 0!==e&&(r.delete(e),i.delete(t))},get:t=>r.get(t),_set:(t,e)=>{let s=r.get(t);if(s&&s!==e)throw Error(`Actor with system ID '${t}' already exists.`);r.set(t,e),i.set(e,t)},inspect:t=>{let e=S(t);return n.add(e),{unsubscribe(){n.delete(e)}}},_sendInspectionEvent:e=>{if(!n.size)return;let s={...e,rootId:t.sessionId};n.forEach(t=>t.next?.(s))},_relay:(t,e,s)=>{u._sendInspectionEvent({type:"@xstate.event",sourceRef:t,actorRef:e,event:s}),e._send(s)},scheduler:l,getSnapshot:()=>({_scheduledEvents:{...u._snapshot._scheduledEvents}}),start:()=>{let t=u._snapshot._scheduledEvents;for(let e in u._snapshot._scheduledEvents={},t){let{source:s,target:r,event:i,delay:n,id:o}=t[e];l.schedule(s,r,i,n,o)}},_clock:a,_logger:h};return u}(this,{clock:r,logger:i}),u&&!o&&this.system.inspect(S(u)),this.sessionId=this.system._bookId(),this.id=h??this.sessionId,this.logger=e?.logger??this.system._logger,this.clock=e?.clock??this.system._clock,this._parent=o,this._syncSnapshot=a,this.options=s,this.src=s.src??t,this.ref=this,this._actorScope={self:this,id:this.id,sessionId:this.sessionId,logger:this.logger,defer:t=>{this._deferred.push(t)},system:this.system,stopChild:t=>{if(t._parent!==this)throw Error(`Cannot stop child actor ${t.id} of ${this.id} because it is not a child`);t._stop()},emit:t=>{let e=this.eventListeners.get(t.type),s=this.eventListeners.get("*");if(e||s)for(let r of[...e?e.values():[],...s?s.values():[]])try{r(t)}catch(t){c(t)}},actionExecutor:t=>{let e=()=>{if(this._actorScope.system._sendInspectionEvent({type:"@xstate.action",actorRef:this,action:{type:t.type,params:t.params}}),!t.exec)return;let e=A;try{A=!0,t.exec(t.info,t.params)}finally{A=e}};this._processingStatus===M.Running?e():this._deferred.push(e)}},this.send=this.send.bind(this),this.system._sendInspectionEvent({type:"@xstate.actor",actorRef:this}),l&&(this._systemId=l,this.system._set(l,this)),this._initState(e?.snapshot??e?.state),l&&"active"!==this._snapshot.status&&this.system._unregister(this)}_initState(t){try{this._snapshot=t?this.logic.restoreSnapshot?this.logic.restoreSnapshot(t,this._actorScope):t:this.logic.getInitialSnapshot(this._actorScope,this.options?.input)}catch(t){this._snapshot={status:"error",output:void 0,error:t}}}update(t,e){let s;for(this._snapshot=t;s=this._deferred.shift();)try{s()}catch(e){this._deferred.length=0,this._snapshot={...t,status:"error",error:e}}switch(this._snapshot.status){case"active":for(let e of this.observers)try{e.next?.(t)}catch(t){c(t)}break;case"done":var r;for(let e of this.observers)try{e.next?.(t)}catch(t){c(t)}this._stopProcedure(),this._complete(),this._doneEvent=(r=this.id,{type:`xstate.done.actor.${r}`,output:this._snapshot.output,actorId:r}),this._parent&&this.system._relay(this,this._parent,this._doneEvent);break;case"error":this._error(this._snapshot.error)}this.system._sendInspectionEvent({type:"@xstate.snapshot",actorRef:this,event:e,snapshot:t})}subscribe(t,e,s){let r=S(t,e,s);if(this._processingStatus!==M.Stopped)this.observers.add(r);else switch(this._snapshot.status){case"done":try{r.complete?.()}catch(t){c(t)}break;case"error":{let t=this._snapshot.error;if(r.error)try{r.error(t)}catch(t){c(t)}else c(t)}}return{unsubscribe:()=>{this.observers.delete(r)}}}on(t,e){let s=this.eventListeners.get(t);s||(s=new Set,this.eventListeners.set(t,s));let r=e.bind(void 0);return s.add(r),{unsubscribe:()=>{s.delete(r)}}}start(){if(this._processingStatus===M.Running)return this;this._syncSnapshot&&this.subscribe({next:t=>{"active"===t.status&&this.system._relay(this,this._parent,{type:`xstate.snapshot.${this.id}`,snapshot:t})},error:()=>{}}),this.system._register(this.sessionId,this),this._systemId&&this.system._set(this._systemId,this),this._processingStatus=M.Running;let t=f(this.options.input);switch(this.system._sendInspectionEvent({type:"@xstate.event",sourceRef:this._parent,actorRef:this,event:t}),this._snapshot.status){case"done":return this.update(this._snapshot,t),this;case"error":return this._error(this._snapshot.error),this}if(this._parent||this.system.start(),this.logic.start)try{this.logic.start(this._snapshot,this._actorScope)}catch(t){return this._snapshot={...this._snapshot,status:"error",error:t},this._error(t),this}return this.update(this._snapshot,t),this.options.devTools&&this.attachDevTools(),this.mailbox.start(),this}_process(t){let e,s;try{e=this.logic.transition(this._snapshot,t,this._actorScope)}catch(t){s={err:t}}if(s){let{err:t}=s;this._snapshot={...this._snapshot,status:"error",error:t},this._error(t);return}this.update(e,t),t.type===l&&(this._stopProcedure(),this._complete())}_stop(){return this._processingStatus===M.Stopped||((this.mailbox.clear(),this._processingStatus===M.NotStarted)?this._processingStatus=M.Stopped:this.mailbox.enqueue({type:l})),this}stop(){if(this._parent)throw Error("A non-root actor cannot be stopped directly.");return this._stop()}_complete(){for(let t of this.observers)try{t.complete?.()}catch(t){c(t)}this.observers.clear()}_reportError(t){if(!this.observers.size){this._parent||c(t);return}let e=!1;for(let s of this.observers){let r=s.error;e||=!r;try{r?.(t)}catch(t){c(t)}}this.observers.clear(),e&&c(t)}_error(t){var e;this._stopProcedure(),this._reportError(t),this._parent&&this.system._relay(this,this._parent,(e=this.id,{type:`xstate.error.actor.${e}`,error:t,actorId:e}))}_stopProcedure(){return this._processingStatus!==M.Running||(this.system.scheduler.cancelAll(this),this.mailbox.clear(),this.mailbox=new n(this._process.bind(this)),this._processingStatus=M.Stopped,this.system._unregister(this)),this}_send(t){this._processingStatus!==M.Stopped&&this.mailbox.enqueue(t)}send(t){this.system._relay(void 0,this,t)}attachDevTools(){let{devTools:t}=this.options;t&&("function"==typeof t?t:i.tm)(this)}toJSON(){return{xstate$$type:$,id:this.id}}getPersistedSnapshot(t){return this.logic.getPersistedSnapshot(this._snapshot,t)}[d](){return this}getSnapshot(){return this._snapshot}}function R(t,...[e]){return new N(t,e)}function O(t,e,s,r,{sendId:i}){return[e,{sendId:"function"==typeof i?i(s,r):i},void 0]}function U(t,e){t.defer(()=>{t.system.scheduler.cancel(t.self,e.sendId)})}function j(t,e,s,r,{id:i,systemId:n,src:o,input:a,syncSnapshot:h}){let l,u,f="string"==typeof o?E(e.machine,o):o,c="function"==typeof i?i(s):i;return f&&(u="function"==typeof a?a({context:e.context,event:s.event,self:t.self}):a,l=R(f,{id:c,src:o,parent:t.self,syncSnapshot:h,systemId:n,input:u})),[tk(e,{children:{...e.children,[c]:l}}),{id:i,systemId:n,actorRef:l,src:o,input:u},void 0]}function B(t,{actorRef:e}){e&&t.defer(()=>{e._processingStatus!==M.Stopped&&e.start()})}function D(t,e,s,r,{actorRef:i}){let n="function"==typeof i?i(s,r):i,o="string"==typeof n?e.children[n]:n,a=e.children;return o&&(a={...a},delete a[o.id]),[tk(e,{children:a}),o,void 0]}function Y(t,e){if(e){if(t.system._unregister(e),e._processingStatus!==M.Running)return void t.stopChild(e);t.defer(()=>{t.stopChild(e)})}}function X(t){function e(t,e){}return e.type="xstate.stopChild",e.actorRef=t,e.resolve=D,e.execute=Y,e}function z(t,e,s,r){let{machine:i}=r,n="function"==typeof t,o=n?t:i.implementations.guards["string"==typeof t?t:t.type];if(!n&&!o)throw Error(`Guard '${"string"==typeof t?t:t.type}' is not implemented.'.`);if("function"!=typeof o)return z(o,e,s,r);let a={context:e,event:s},h=n||"string"==typeof t?void 0:"params"in t?"function"==typeof t.params?t.params({context:e,event:s}):t.params:void 0;return"check"in o?o.check(r,a,o):o(a,h)}let C=t=>"atomic"===t.type||"final"===t.type;function P(t){return Object.values(t.states).filter(t=>"history"!==t.type)}function V(t,e){let s=[];if(e===t)return s;let r=t.parent;for(;r&&r!==e;)s.push(r),r=r.parent;return s}function L(t){let e=new Set(t),s=q(e);for(let t of e)if("compound"!==t.type||s.get(t)&&s.get(t).length){if("parallel"===t.type){for(let s of P(t))if("history"!==s.type&&!e.has(s))for(let t of ts(s))e.add(t)}}else ts(t).forEach(t=>e.add(t));for(let t of e){let s=t.parent;for(;s;)e.add(s),s=s.parent}return e}function q(t){let e=new Map;for(let s of t)e.has(s)||e.set(s,[]),s.parent&&(e.has(s.parent)||e.set(s.parent,[]),e.get(s.parent).push(s));return e}function F(t,e){return function t(e,s){let r=s.get(e);if(!r)return{};if("compound"===e.type){let t=r[0];if(!t)return{};if(C(t))return t.key}let i={};for(let e of r)i[e.key]=t(e,s);return i}(t,q(L(e)))}function J(t,e){return"compound"===e.type?P(e).some(e=>"final"===e.type&&t.has(e)):"parallel"===e.type?P(e).every(e=>J(t,e)):"final"===e.type}let W=t=>"#"===t[0];function G(t,e){return t.transitions.get(e)||[...t.transitions.keys()].filter(t=>{if("*"===t)return!0;if(!t.endsWith(".*"))return!1;let s=t.split("."),r=e.split(".");for(let t=0;t<s.length;t++){let e=s[t],i=r[t];if("*"===e)return t===s.length-1;if(e!==i)return!1}return!0}).sort((t,e)=>e.length-t.length).flatMap(e=>t.transitions.get(e))}function H(t){let e=t.config.after;return e?Object.keys(e).flatMap(s=>{let r=e[s],i=Number.isNaN(+s)?s:+s,n=(e=>{var s;let r=(s=t.id,{type:`xstate.after.${e}.${s}`}),i=r.type;return t.entry.push(function(t,e){function s(t,e){}return s.type="xstate.raise",s.event=t,s.id=e?.id,s.delay=e?.delay,s.resolve=t$,s.execute=tM,s}(r,{id:i,delay:e})),t.exit.push(function(t){function e(t,e){}return e.type="xstate.cancel",e.sendId=t,e.resolve=O,e.execute=U,e}(i)),i})(i);return m("string"==typeof r?{target:r}:r).map(t=>({...t,event:n,delay:i}))}).map(e=>{let{delay:s}=e;return{...K(t,e.event,e),delay:s}}):[]}function K(t,e,s){let r=b(s.target),i=s.reenter??!1,n=function(t,e){if(void 0!==e)return e.map(e=>{if("string"!=typeof e)return e;if(W(e))return t.machine.getStateNodeById(e);let s=e[0]===o;if(s&&!t.parent)return tn(t,e.slice(1));let r=s?t.key+e:e;if(t.parent)try{return tn(t.parent,r)}catch(e){throw Error(`Invalid transition definition for state node '${t.id}':
${e.message}`)}throw Error(`Invalid target: "${e}" is not a valid target from the root node. Did you mean ".${e}"?`)})}(t,r),a={...s,actions:m(s.actions),guard:s.guard,target:n,source:t,reenter:i,eventType:e,toJSON:()=>({...a,source:`#${t.id}`,target:n?n.map(t=>`#${t.id}`):void 0})};return a}function Q(t){let e=new Map;if(t.config.on)for(let s of Object.keys(t.config.on)){if(s===a)throw Error('Null events ("") cannot be specified as a transition key. Use `always: { ... }` instead.');let r=t.config.on[s];e.set(s,x(r).map(e=>K(t,s,e)))}if(t.config.onDone){let s=`xstate.done.state.${t.id}`;e.set(s,x(t.config.onDone).map(e=>K(t,s,e)))}for(let s of t.invoke){if(s.onDone){let r=`xstate.done.actor.${s.id}`;e.set(r,x(s.onDone).map(e=>K(t,r,e)))}if(s.onError){let r=`xstate.error.actor.${s.id}`;e.set(r,x(s.onError).map(e=>K(t,r,e)))}if(s.onSnapshot){let r=`xstate.snapshot.${s.id}`;e.set(r,x(s.onSnapshot).map(e=>K(t,r,e)))}}for(let s of t.after){let t=e.get(s.eventType);t||(t=[],e.set(s.eventType,t)),t.push(s)}return e}function Z(t,e){let s="string"==typeof e?t.states[e]:e?t.states[e.target]:void 0;if(!s&&e)throw Error(`Initial state node "${e}" not found on parent state node #${t.id}`);let r={source:t,actions:e&&"string"!=typeof e?m(e.actions):[],eventType:null,reenter:!1,target:s?[s]:[],toJSON:()=>({...r,source:`#${t.id}`,target:s?[`#${s.id}`]:[]})};return r}function tt(t){let e=b(t.config.target);return e?{target:e.map(e=>"string"==typeof e?tn(t.parent,e):e)}:t.parent.initial}function te(t){return"history"===t.type}function ts(t){let e=tr(t);for(let s of e)for(let r of V(s,t))e.add(r);return e}function tr(t){let e=new Set;return!function t(s){if(!e.has(s)){if(e.add(s),"compound"===s.type)t(s.initial.target[0]);else if("parallel"===s.type)for(let e of P(s))t(e)}}(t),e}function ti(t,e){if(W(e))return t.machine.getStateNodeById(e);if(!t.states)throw Error(`Unable to retrieve child state '${e}' from '${t.id}'; no child states exist.`);let s=t.states[e];if(!s)throw Error(`Child state '${e}' does not exist on '${t.id}'`);return s}function tn(t,e){if("string"==typeof e&&W(e))try{return t.machine.getStateNodeById(e)}catch{}let s=p(e).slice(),r=t;for(;s.length;){let t=s.shift();if(!t.length)break;r=ti(r,t)}return r}function to(t,e){if("string"==typeof e){let s=t.states[e];if(!s)throw Error(`State '${e}' does not exist on '${t.id}'`);return[t,s]}let s=Object.keys(e),r=s.map(e=>ti(t,e)).filter(Boolean);return[t.machine.root,t].concat(r,s.reduce((s,r)=>{let i=ti(t,r);if(!i)return s;let n=to(i,e[r]);return s.concat(n)},[]))}function ta(t,e){let s=t;for(;s.parent&&s.parent!==e;)s=s.parent;return s.parent===e}function th(t,e,s){let r=new Set;for(let i of t){let t=!1,n=new Set;for(let o of r)if(function(t,e){let s=new Set(t),r=new Set(e);for(let t of s)if(r.has(t))return!0;for(let t of r)if(s.has(t))return!0;return!1}(tf([i],e,s),tf([o],e,s)))if(ta(i.source,o.source))n.add(o);else{t=!0;break}if(!t){for(let t of n)r.delete(t);r.add(i)}}return Array.from(r)}function tl(t,e){if(!t.target)return[];let s=new Set;for(let r of t.target)if(te(r))if(e[r.id])for(let t of e[r.id])s.add(t);else for(let t of tl(tt(r),e))s.add(t);else s.add(r);return[...s]}function tu(t,e){let s=tl(t,e);if(!s)return;if(!t.reenter&&s.every(e=>e===t.source||ta(e,t.source)))return t.source;let r=function(t){let[e,...s]=t;for(let t of V(e,void 0))if(s.every(e=>ta(e,t)))return t}(s.concat(t.source));return r||(t.reenter?void 0:t.source.machine.root)}function tf(t,e,s){let r=new Set;for(let i of t)if(i.target?.length){let t=tu(i,s);for(let s of(i.reenter&&i.source===t&&r.add(t),e))ta(s,t)&&r.add(s)}return[...r]}function tc(t,e,s,r,i,n){if(!t.length)return e;let o=new Set(e._nodes),a=e.historyValue,h=th(t,o,a),l=e;i||([l,a]=function(t,e,s,r,i,n,o,a){let h,l=t,u=tf(r,i,n);for(let t of(u.sort((t,e)=>e.order-t.order),u))for(let e of function(t){return Object.keys(t.states).map(e=>t.states[e]).filter(t=>"history"===t.type)}(t)){let s;s="deep"===e.history?e=>C(e)&&ta(e,t):e=>e.parent===t,(h??={...n})[e.id]=Array.from(i).filter(s)}for(let t of u)l=ty(l,e,s,[...t.exit,...t.invoke.map(t=>X(t.id))],o,void 0),i.delete(t);return[l,h||n]}(l,r,s,h,o,a,n,s.actionExecutor)),l=function(t,e,s,r,i,n,o,a){let h=t,l=new Set,f=new Set;(function(t,e,s,r){for(let i of t){let t=tu(i,e);for(let n of i.target||[])!te(n)&&(i.source!==n||i.source!==t||i.reenter)&&(r.add(n),s.add(n)),td(n,e,s,r);for(let n of tl(i,e)){let o=V(n,t);t?.type==="parallel"&&o.push(t),tp(r,e,s,o,!i.source.parent&&i.reenter?void 0:t)}}})(r,o,f,l),a&&f.add(t.machine.root);let c=new Set;for(let t of[...l].sort((t,e)=>t.order-e.order)){i.add(t);let r=[];for(let e of(r.push(...t.entry),t.invoke))r.push(function(...[t,{id:e,systemId:s,input:r,syncSnapshot:i=!1}={}]){function n(t,e){}return n.type="xstate.spawnChild",n.id=e,n.systemId=s,n.src=t,n.input=r,n.syncSnapshot=i,n.resolve=j,n.execute=B,n}(e.src,{...e,syncSnapshot:!!e.onSnapshot}));if(f.has(t)){let e=t.initial.actions;r.push(...e)}if(h=ty(h,e,s,r,n,t.invoke.map(t=>t.id)),"final"===t.type){let r=t.parent,o=r?.type==="parallel"?r:r?.parent,a=o||t;for(r?.type==="compound"&&n.push(u(r.id,void 0!==t.output?g(t.output,h.context,e,s.self):void 0));o?.type==="parallel"&&!c.has(o)&&J(i,o);)c.add(o),n.push(u(o.id)),a=o,o=o.parent;if(o)continue;h=tk(h,{status:"done",output:function(t,e,s,r,i){if(void 0===r.output)return;let n=u(i.id,void 0!==i.output&&i.parent?g(i.output,t.context,e,s.self):void 0);return g(r.output,t.context,n,s.self)}(h,e,s,h.machine.root,a)})}}return h}(l=ty(l,r,s,h.flatMap(t=>t.actions),n,void 0),r,s,h,o,n,a,i);let f=[...o];"done"===l.status&&(l=ty(l,r,s,f.sort((t,e)=>e.order-t.order).flatMap(t=>t.exit),n,void 0));try{if(a===e.historyValue&&function(t,e){if(t.length!==e.size)return!1;for(let s of t)if(!e.has(s))return!1;return!0}(e._nodes,o))return l;return tk(l,{_nodes:f,historyValue:a})}catch(t){throw t}}function td(t,e,s,r){var i,n,o,a;if(te(t))if(e[t.id]){let o=e[t.id];for(let t of o)r.add(t),td(t,e,s,r);for(let a of o){i=a,n=t.parent,tp(r,e,s,V(i,n))}}else{let i=tt(t);for(let n of i.target)r.add(n),i===t.parent?.initial&&s.add(t.parent),td(n,e,s,r);for(let n of i.target){o=n,a=t.parent,tp(r,e,s,V(o,a))}}else if("compound"===t.type){let[i]=t.initial.target;te(i)||(r.add(i),s.add(i)),td(i,e,s,r),tp(r,e,s,V(i,t))}else if("parallel"===t.type)for(let i of P(t).filter(t=>!te(t)))[...r].some(t=>ta(t,i))||(te(i)||(r.add(i),s.add(i)),td(i,e,s,r))}function tp(t,e,s,r,i){for(let n of r)if((!i||ta(n,i))&&t.add(n),"parallel"===n.type)for(let r of P(n).filter(t=>!te(t)))[...t].some(t=>ta(t,r))||(t.add(r),td(r,e,s,t))}function ty(t,e,s,r,i,n){let o=n?[]:void 0,a=function t(e,s,r,i,n,o){let{machine:a}=e,h=e;for(let e of i){var l;let i="function"==typeof e,u=i?e:(l="string"==typeof e?e:e.type,a.implementations.actions[l]),f={context:h.context,event:s,self:r.self,system:r.system},c=i||"string"==typeof e?void 0:"params"in e?"function"==typeof e.params?e.params({context:h.context,event:s}):e.params:void 0;if(!u||!("resolve"in u)){r.actionExecutor({type:"string"==typeof e?e:"object"==typeof e?e.type:e.name||"(anonymous)",info:f,params:c,exec:u});continue}let[d,p,y]=u.resolve(r,h,f,c,u,n);h=d,"retryResolve"in u&&o?.push([u,p]),"execute"in u&&r.actionExecutor({type:u.type,info:f,params:p,exec:u.execute.bind(null,r,p)}),y&&(h=t(h,s,r,y,n,o))}return h}(t,e,s,r,{internalQueue:i,deferredActorIds:n},o);return o?.forEach(([t,e])=>{t.retryResolve(s,a,e)}),a}function t_(t,e,s,r){let i=t,n=[];function o(t,e,r){s.system._sendInspectionEvent({type:"@xstate.microstep",actorRef:s.self,event:e,snapshot:t,_transitions:r}),n.push(t)}if(e.type===l)return o(i=tk(tm(i,e,s),{status:"stopped"}),e,[]),{snapshot:i,microstates:n};let a=e;if(a.type!==h){let e=a,h=e.type.startsWith("xstate.error.actor"),l=tg(e,i);if(h&&!l.length)return o(i=tk(t,{status:"error",error:e.error}),e,[]),{snapshot:i,microstates:n};o(i=tc(l,t,s,a,!1,r),e,l)}let u=!0;for(;"active"===i.status;){let t=u?function(t,e){let s=new Set;for(let r of t._nodes.filter(C))t:for(let i of[r].concat(V(r,void 0)))if(i.always){for(let r of i.always)if(void 0===r.guard||z(r.guard,t.context,e,t)){s.add(r);break t}}return th(Array.from(s),new Set(t._nodes),t.historyValue)}(i,a):[],e=t.length?i:void 0;if(!t.length){if(!r.length)break;t=tg(a=r.shift(),i)}u=(i=tc(t,i,s,a,!1,r))!==e,o(i,a,t)}return"active"!==i.status&&tm(i,a,s),{snapshot:i,microstates:n}}function tm(t,e,s){return ty(t,e,s,Object.values(t.children).map(t=>X(t)),[],void 0)}function tg(t,e){return e.machine.getTransitionData(e,t)}function tv(t,e){let s=L(to(t,e));return F(t,[...s])}let tx=function(t){return function t(e,s){let r=y(e),i=y(s);return"string"==typeof i?"string"==typeof r&&i===r:"string"==typeof r?r in i:Object.keys(r).every(e=>e in i&&t(r[e],i[e]))}(t,this.value)},tb=function(t){return this.tags.has(t)},tS=function(t){let e=this.machine.getTransitionData(this,t);return!!e?.length&&e.some(t=>void 0!==t.target||t.actions.length)},tw=function(){let{_nodes:t,tags:e,machine:s,getMeta:r,toJSON:i,can:n,hasTag:o,matches:a,...h}=this;return{...h,tags:Array.from(e)}},tE=function(){return this._nodes.reduce((t,e)=>(void 0!==e.meta&&(t[e.id]=e.meta),t),{})};function tI(t,e){return{status:t.status,output:t.output,error:t.error,machine:e,context:t.context,_nodes:t._nodes,value:F(e.root,t._nodes),tags:new Set(t._nodes.flatMap(t=>t.tags)),children:t.children,historyValue:t.historyValue||{},matches:tx,hasTag:tb,can:tS,getMeta:tE,toJSON:tw}}function tk(t,e={}){return tI({...t,...e},t.machine)}function tA(t,e){let{_nodes:s,tags:r,machine:i,children:n,context:o,can:a,hasTag:h,matches:l,getMeta:u,toJSON:f,...c}=t,d={};for(let t in n){let s=n[t];d[t]={snapshot:s.getPersistedSnapshot(e),src:s.src,systemId:s._systemId,syncSnapshot:s._syncSnapshot}}return{...c,context:function t(e){let s;for(let r in e){let i=e[r];if(i&&"object"==typeof i)if("sessionId"in i&&"send"in i&&"ref"in i)(s??=Array.isArray(e)?e.slice():{...e})[r]={xstate$$type:$,id:i.id};else{let n=t(i);n!==i&&((s??=Array.isArray(e)?e.slice():{...e})[r]=n)}}return s??e}(o),children:d,historyValue:function(t){if("object"!=typeof t||null===t)return{};let e={};for(let s in t){let r=t[s];Array.isArray(r)&&(e[s]=r.map(t=>({id:t.id})))}return e}(c.historyValue)}}function t$(t,e,s,r,{event:i,id:n,delay:o},{internalQueue:a}){let h,l=e.machine.implementations.delays;if("string"==typeof i)throw Error(`Only event objects may be used with raise; use raise({ type: "${i}" }) instead`);let u="function"==typeof i?i(s,r):i;if("string"==typeof o){let t=l&&l[o];h="function"==typeof t?t(s,r):t}else h="function"==typeof o?o(s,r):o;return"number"!=typeof h&&a.push(u),[e,{event:u,id:n,delay:h},void 0]}function tM(t,e){let{event:s,delay:r,id:i}=e;if("number"==typeof r)return void t.defer(()=>{let e=t.self;t.system.scheduler.schedule(e,e,s,r,i)})}},607:function(t,e,s){s.d(e,{Z:()=>n});class r{constructor(){this.ids=[],this.values=[],this.length=0}clear(){this.length=0}push(t,e){let s=this.length++;for(;s>0;){let t=s-1>>1,r=this.values[t];if(e>=r)break;this.ids[s]=this.ids[t],this.values[s]=r,s=t}this.ids[s]=t,this.values[s]=e}pop(){if(0===this.length)return;let t=this.ids,e=this.values,s=t[0],r=--this.length;if(r>0){let s=t[r],i=e[r],n=0,o=r>>1;for(;n<o;){let s=(n<<1)+1,o=s+1,a=s+(o<r&e[o]<e[s]);if(e[a]>=i)break;t[n]=t[a],e[n]=e[a],n=a}t[n]=s,e[n]=i}return s}peek(){return this.length>0?this.ids[0]:void 0}peekValue(){return this.length>0?this.values[0]:void 0}shrink(){this.ids.length=this.values.length=this.length}}let i=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class n{static from(t,e=0){if(e%8!=0)throw Error("byteOffset must be 8-byte aligned.");if(!t||void 0===t.byteLength||t.buffer)throw Error("Data must be an instance of ArrayBuffer or SharedArrayBuffer.");let[s,r]=new Uint8Array(t,e+0,2);if(251!==s)throw Error("Data does not appear to be in a Flatbush format.");let o=r>>4;if(3!==o)throw Error(`Got v${o} data when expected v3.`);let a=i[15&r];if(!a)throw Error("Unrecognized array type.");let[h]=new Uint16Array(t,e+2,1),[l]=new Uint32Array(t,e+4,1);return new n(l,h,a,void 0,t,e)}constructor(t,e=16,s=Float64Array,n=ArrayBuffer,o,a=0){if(void 0===t)throw Error("Missing required argument: numItems.");if(isNaN(t)||t<=0)throw Error(`Unexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+e,2),65535),this.byteOffset=a;let h=t,l=h;this._levelBounds=[4*h];do l+=h=Math.ceil(h/this.nodeSize),this._levelBounds.push(4*l);while(1!==h);this.ArrayType=s,this.IndexArrayType=l<16384?Uint16Array:Uint32Array;let u=i.indexOf(s),f=4*l*s.BYTES_PER_ELEMENT;if(u<0)throw Error(`Unexpected typed array class: ${s}.`);if(o)this.data=o,this._boxes=new s(o,a+8,4*l),this._indices=new this.IndexArrayType(o,a+8+f,l),this._pos=4*l,this.minX=this._boxes[this._pos-4],this.minY=this._boxes[this._pos-3],this.maxX=this._boxes[this._pos-2],this.maxY=this._boxes[this._pos-1];else{let r=this.data=new n(8+f+l*this.IndexArrayType.BYTES_PER_ELEMENT);this._boxes=new s(r,8,4*l),this._indices=new this.IndexArrayType(r,8+f,l),this._pos=0,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,new Uint8Array(r,0,2).set([251,48+u]),new Uint16Array(r,2,1)[0]=e,new Uint32Array(r,4,1)[0]=t}this._queue=new r}add(t,e,s=t,r=e){let i=this._pos>>2,n=this._boxes;return this._indices[i]=i,n[this._pos++]=t,n[this._pos++]=e,n[this._pos++]=s,n[this._pos++]=r,t<this.minX&&(this.minX=t),e<this.minY&&(this.minY=e),s>this.maxX&&(this.maxX=s),r>this.maxY&&(this.maxY=r),i}finish(){if(this._pos>>2!==this.numItems)throw Error(`Added ${this._pos>>2} items when expected ${this.numItems}.`);let t=this._boxes;if(this.numItems<=this.nodeSize){t[this._pos++]=this.minX,t[this._pos++]=this.minY,t[this._pos++]=this.maxX,t[this._pos++]=this.maxY;return}let e=this.maxX-this.minX||1,s=this.maxY-this.minY||1,r=new Uint32Array(this.numItems);for(let i=0,n=0;i<this.numItems;i++){let o=t[n++],a=t[n++],h=t[n++],l=t[n++],u=Math.floor(65535*((o+h)/2-this.minX)/e),f=Math.floor(65535*((a+l)/2-this.minY)/s);r[i]=function(t,e){let s=t^e,r=65535^s,i=65535^(t|e),n=t&(65535^e),o=s|r>>1,a=s>>1^s,h=i>>1^r&n>>1^i,l=s&i>>1^n>>1^n;s=o,r=a,i=h,n=l,o=s&s>>2^r&r>>2,a=s&r>>2^r&(s^r)>>2,h^=s&i>>2^r&n>>2,l^=r&i>>2^(s^r)&n>>2,s=o,r=a,i=h,n=l,o=s&s>>4^r&r>>4,a=s&r>>4^r&(s^r)>>4,h^=s&i>>4^r&n>>4,l^=r&i>>4^(s^r)&n>>4,s=o,r=a,i=h,h^=s&i>>8^r&(n=l)>>8,l^=r&i>>8^(s^r)&n>>8,s=h^h>>1;let u=t^e,f=(r=l^l>>1)|65535^(u|s);return((f=((f=((f=((f=(f|f<<8)&0xff00ff)|f<<4)&0xf0f0f0f)|f<<2)&0x33333333)|f<<1)&0x55555555)<<1|(u=((u=((u=((u=(u|u<<8)&0xff00ff)|u<<4)&0xf0f0f0f)|u<<2)&0x33333333)|u<<1)&0x55555555))>>>0}(u,f)}!function t(e,s,r,i,n,o){if(Math.floor(i/o)>=Math.floor(n/o))return;let a=e[i],h=e[i+n>>1],l=e[n],u=l,f=Math.max(a,h);l>f?u=f:f===a?u=Math.max(h,l):f===h&&(u=Math.max(a,l));let c=i-1,d=n+1;for(;;){do c++;while(e[c]<u);do d--;while(e[d]>u);if(c>=d)break;!function(t,e,s,r,i){let n=t[r];t[r]=t[i],t[i]=n;let o=4*r,a=4*i,h=e[o],l=e[o+1],u=e[o+2],f=e[o+3];e[o]=e[a],e[o+1]=e[a+1],e[o+2]=e[a+2],e[o+3]=e[a+3],e[a]=h,e[a+1]=l,e[a+2]=u,e[a+3]=f;let c=s[r];s[r]=s[i],s[i]=c}(e,s,r,c,d)}t(e,s,r,i,d,o),t(e,s,r,d+1,n,o)}(r,t,this._indices,0,this.numItems-1,this.nodeSize);for(let e=0,s=0;e<this._levelBounds.length-1;e++){let r=this._levelBounds[e];for(;s<r;){let e=s,i=t[s++],n=t[s++],o=t[s++],a=t[s++];for(let e=1;e<this.nodeSize&&s<r;e++)i=Math.min(i,t[s++]),n=Math.min(n,t[s++]),o=Math.max(o,t[s++]),a=Math.max(a,t[s++]);this._indices[this._pos>>2]=e,t[this._pos++]=i,t[this._pos++]=n,t[this._pos++]=o,t[this._pos++]=a}}}search(t,e,s,r,i){if(this._pos!==this._boxes.length)throw Error("Data not yet indexed - call index.finish().");let n=this._boxes.length-4,a=[],h=[];for(;void 0!==n;){let l=Math.min(n+4*this.nodeSize,o(n,this._levelBounds));for(let o=n;o<l;o+=4){let l=this._boxes[o];if(s<l)continue;let u=this._boxes[o+1];if(r<u)continue;let f=this._boxes[o+2];if(t>f)continue;let c=this._boxes[o+3];if(e>c)continue;let d=0|this._indices[o>>2];n>=4*this.numItems?a.push(d):(void 0===i||i(d,l,u,f,c))&&h.push(d)}n=a.pop()}return h}neighbors(t,e,s=1/0,r=1/0,i){if(this._pos!==this._boxes.length)throw Error("Data not yet indexed - call index.finish().");let n=this._boxes.length-4,a=this._queue,h=[],l=r*r;e:for(;void 0!==n;){let r=Math.min(n+4*this.nodeSize,o(n,this._levelBounds));for(let s=n;s<r;s+=4){let r=0|this._indices[s>>2],o=this._boxes[s],h=this._boxes[s+1],u=this._boxes[s+2],f=this._boxes[s+3],c=t<o?o-t:t>u?t-u:0,d=e<h?h-e:e>f?e-f:0,p=c*c+d*d;!(p>l)&&(n>=4*this.numItems?a.push(r<<1,p):(void 0===i||i(r))&&a.push((r<<1)+1,p))}for(;a.length&&1&a.peek();)if(a.peekValue()>l||(h.push(a.pop()>>1),h.length===s))break e;n=a.length?a.pop()>>1:void 0}return a.clear(),h}}function o(t,e){let s=0,r=e.length-1;for(;s<r;){let i=s+r>>1;e[i]>t?r=i:s=i+1}return e[s]}}}]);