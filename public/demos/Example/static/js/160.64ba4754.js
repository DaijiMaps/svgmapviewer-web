"use strict";(self.webpackChunksvgmapviewer_example=self.webpackChunksvgmapviewer_example||[]).push([["160"],{848:function(t,i,e){e.d(i,{tm:()=>s});let s=t=>{if("undefined"==typeof window)return;let i=function(){let t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e.g?e.g:void 0;if(t.__xstate__)return t.__xstate__}();i&&i.register(t)}},435:function(t,i,e){e.d(i,{a:()=>o});var s=e(377);function n(t,i,e,n,{assignment:o}){if(!i.context)throw Error("Cannot assign to undefined `context`. Ensure that `context` is defined in the machine config.");let r={},a={context:i.context,event:e.event,spawn:function(t,{machine:i,context:e},n,o){return(r,a)=>{let h=((r,a)=>{if("string"!=typeof r)return(0,s.c)(r,{id:a?.id,parent:t.self,syncSnapshot:a?.syncSnapshot,input:a?.input,src:r,systemId:a?.systemId});{let h=(0,s.R)(i,r);if(!h)throw Error(`Actor logic '${r}' not implemented in machine '${i.id}'`);let c=(0,s.c)(h,{id:a?.id,parent:t.self,syncSnapshot:a?.syncSnapshot,input:"function"==typeof a?.input?a.input({context:e,event:n,self:t.self}):a?.input,src:r,systemId:a?.systemId});return o[c.id]=c,c}})(r,a);return o[h.id]=h,t.defer(()=>{h._processingStatus!==s.V.Stopped&&h.start()}),h}}(t,i,e.event,r),self:t.self,system:t.system},h={};if("function"==typeof o)h=o(a,n);else for(let t of Object.keys(o)){let i=o[t];h[t]="function"==typeof i?i(a,n):i}let c=Object.assign({},i.context,h);return[(0,s.W)(i,{context:c,children:Object.keys(r).length?{...i.children,...r}:i.children}),void 0,void 0]}function o(t){function i(t,i){}return i.type="xstate.assign",i.assignment=t,i.resolve=n,i}},74:function(t,i,e){e.d(i,{cY:()=>l}),e(684);var s=e(377),n=e(435);let o=new WeakMap;function r(t,i,e){let s=o.get(t);return s?i in s||(s[i]=e()):(s={[i]:e()},o.set(t,s)),s[i]}let a={},h=t=>"string"==typeof t?{type:t}:"function"==typeof t?"resolve"in t?{type:t.type}:{type:t.name}:t;class c{constructor(t,i){if(this.config=t,this.key=void 0,this.id=void 0,this.type=void 0,this.path=void 0,this.states=void 0,this.history=void 0,this.entry=void 0,this.exit=void 0,this.parent=void 0,this.machine=void 0,this.meta=void 0,this.output=void 0,this.order=-1,this.description=void 0,this.tags=[],this.transitions=void 0,this.always=void 0,this.parent=i._parent,this.key=i._key,this.machine=i._machine,this.path=this.parent?this.parent.path.concat(this.key):[],this.id=this.config.id||[this.machine.id,...this.path].join(s.S),this.type=this.config.type||(this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.description=this.config.description,this.order=this.machine.idMap.size,this.machine.idMap.set(this.id,this),this.states=this.config.states?(0,s.l)(this.config.states,(t,i)=>new c(t,{_parent:this,_key:i,_machine:this.machine})):a,"compound"===this.type&&!this.config.initial)throw Error(`No initial state specified for compound state node "#${this.id}". Try adding { initial: "${Object.keys(this.states)[0]}" } to the state config.`);this.history=!0===this.config.history?"shallow":this.config.history||!1,this.entry=(0,s.t)(this.config.entry).slice(),this.exit=(0,s.t)(this.config.exit).slice(),this.meta=this.config.meta,this.output="final"!==this.type&&this.parent?void 0:this.config.output,this.tags=(0,s.t)(t.tags).slice()}_initialize(){this.transitions=(0,s.q)(this),this.config.always&&(this.always=(0,s.u)(this.config.always).map(t=>(0,s.v)(this,s.N,t))),Object.keys(this.states).forEach(t=>{this.states[t]._initialize()})}get definition(){return{id:this.id,key:this.key,version:this.machine.version,type:this.type,initial:this.initial?{target:this.initial.target,source:this,actions:this.initial.actions.map(h),eventType:null,reenter:!1,toJSON:()=>({target:this.initial.target.map(t=>`#${t.id}`),source:`#${this.id}`,actions:this.initial.actions.map(h),eventType:null})}:void 0,history:this.history,states:(0,s.l)(this.states,t=>t.definition),on:this.on,transitions:[...this.transitions.values()].flat().map(t=>({...t,actions:t.actions.map(h)})),entry:this.entry.map(h),exit:this.exit.map(h),meta:this.meta,order:this.order||-1,output:this.output,invoke:this.invoke,description:this.description,tags:this.tags}}toJSON(){return this.definition}get invoke(){return r(this,"invoke",()=>(0,s.t)(this.config.invoke).map((t,i)=>{let{src:e,systemId:n}=t,o=t.id??(0,s.x)(this.id,i),r="string"==typeof e?e:`xstate.invoke.${(0,s.x)(this.id,i)}`;return{...t,src:r,id:o,systemId:n,toJSON(){let{onDone:i,onError:e,...s}=t;return{...s,type:"xstate.invoke",src:r,id:o}}}}))}get on(){return r(this,"on",()=>[...this.transitions].flatMap(([t,i])=>i.map(i=>[t,i])).reduce((t,[i,e])=>(t[i]=t[i]||[],t[i].push(e),t),{}))}get after(){return r(this,"delayedTransitions",()=>(0,s.y)(this))}get initial(){return r(this,"initial",()=>(0,s.z)(this,this.config.initial))}next(t,i){let e,n=i.type,o=[];for(let a of r(this,`candidates-${n}`,()=>(0,s.B)(this,n))){let{guard:r}=a,h=t.context,c=!1;try{c=!r||(0,s.w)(r,h,i,t)}catch(i){let t="string"==typeof r?r:"object"==typeof r?r.type:void 0;throw Error(`Unable to evaluate guard ${t?`'${t}' `:""}in transition for event '${n}' in state node '${this.id}':
${i.message}`)}if(c){o.push(...a.actions),e=a;break}}return e?[e]:void 0}get events(){return r(this,"events",()=>{let{states:t}=this,i=new Set(this.ownEvents);if(t)for(let e of Object.keys(t)){let s=t[e];if(s.states)for(let t of s.events)i.add(`${t}`)}return Array.from(i)})}get ownEvents(){return Array.from(new Set([...this.transitions.keys()].filter(t=>this.transitions.get(t).some(t=>!(!t.target&&!t.actions.length&&!t.reenter)))))}}class d{constructor(t,i){this.config=t,this.version=void 0,this.schemas=void 0,this.implementations=void 0,this.__xstatenode=!0,this.idMap=new Map,this.root=void 0,this.id=void 0,this.states=void 0,this.events=void 0,this.id=t.id||"(machine)",this.implementations={actors:i?.actors??{},actions:i?.actions??{},delays:i?.delays??{},guards:i?.guards??{}},this.version=this.config.version,this.schemas=this.config.schemas,this.transition=this.transition.bind(this),this.getInitialSnapshot=this.getInitialSnapshot.bind(this),this.getPersistedSnapshot=this.getPersistedSnapshot.bind(this),this.restoreSnapshot=this.restoreSnapshot.bind(this),this.start=this.start.bind(this),this.root=new c(t,{_key:this.id,_machine:this}),this.root._initialize(),this.states=this.root.states,this.events=this.root.events}provide(t){let{actions:i,guards:e,actors:s,delays:n}=this.implementations;return new d(this.config,{actions:{...i,...t.actions},guards:{...e,...t.guards},actors:{...s,...t.actors},delays:{...n,...t.delays}})}resolveState(t){let i=(0,s.C)(this.root,t.value),e=(0,s.D)((0,s.g)(this.root,i));return(0,s.E)({_nodes:[...e],context:t.context||{},children:{},status:(0,s.F)(e,this.root)?"done":t.status||"active",output:t.output,error:t.error,historyValue:t.historyValue},this)}transition(t,i,e){return(0,s.G)(t,i,e,[]).snapshot}microstep(t,i,e){return(0,s.G)(t,i,e,[]).microstates}getTransitionData(t,i){return(0,s.H)(this.root,t.value,t,i)||[]}getPreInitialState(t,i,e){let{context:o}=this.config,r=(0,s.E)({context:"function"!=typeof o&&o?o:{},_nodes:[this.root],children:{},status:"active"},this);return"function"==typeof o?(0,s.I)(r,i,t,[(0,n.a)(({spawn:t,event:i,self:e})=>o({spawn:t,input:i.input,self:e}))],e,void 0):r}getInitialSnapshot(t,i){let e=(0,s.J)(i),n=[],o=this.getPreInitialState(t,e,n),r=(0,s.K)([{target:[...(0,s.L)(this.root)],source:this.root,reenter:!0,actions:[],eventType:null,toJSON:null}],o,t,e,!0,n),{snapshot:a}=(0,s.G)(r,e,t,n);return a}start(t){Object.values(t.children).forEach(t=>{"active"===t.getSnapshot().status&&t.start()})}getStateNodeById(t){let i=(0,s.M)(t),e=i.slice(1),n=(0,s.O)(i[0])?i[0].slice(1):i[0],o=this.idMap.get(n);if(!o)throw Error(`Child state node '#${n}' does not exist on machine '${this.id}'`);return(0,s.P)(o,e)}get definition(){return this.root.definition}toJSON(){return this.definition}getPersistedSnapshot(t,i){return(0,s.Q)(t,i)}restoreSnapshot(t,i){let e={},n=t.children;Object.keys(n).forEach(t=>{let o=n[t],r=o.snapshot,a=o.src,h="string"==typeof a?(0,s.R)(this,a):a;if(!h)return;let c=(0,s.c)(h,{id:t,parent:i.self,syncSnapshot:o.syncSnapshot,snapshot:r,src:a,systemId:o.systemId});e[t]=c});let o=function(t,i){if(!i||"object"!=typeof i)return{};let e={};for(let s in i)for(let n of i[s]){let i=function(t,i){if(i instanceof c)return i;try{return t.machine.getStateNodeById(i.id)}catch{}}(t,n);i&&(e[s]??=[],e[s].push(i))}return e}(this.root,t.historyValue),r=(0,s.E)({...t,children:e,_nodes:Array.from((0,s.D)((0,s.g)(this.root,t.value))),historyValue:o},this),a=new Set;return!function t(i,e){if(!a.has(i))for(let n in a.add(i),i){let o=i[n];if(o&&"object"==typeof o){if("xstate$$type"in o&&o.xstate$$type===s.$){i[n]=e[o.id];continue}t(o,e)}}}(r.context,e),r}}function l({schemas:t,actors:i,actions:e,guards:s,delays:n}){return{createMachine:o=>new d({...o,schemas:t},{actors:i,actions:e,guards:s,delays:n})}}}}]);