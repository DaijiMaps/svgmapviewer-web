/*! For license information please see 639.cdcd1261.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["639"],{2158:function(t,e,n){n.d(e,{v9:()=>a});var r=n(4249),o=n(6452);function i(t,e){return t===e}function a(t,e,n=i){let u=(0,r.useCallback)(e=>{if(!t)return()=>{};let{unsubscribe:n}=t.subscribe(e);return n},[t]),s=(0,r.useCallback)(()=>t?.getSnapshot(),[t]);return(0,o.useSyncExternalStoreWithSelector)(u,s,s,e,n)}n(807)},4649:function(t,e,n){let r;function o(t,e,n){let r="object"==typeof t,o=r?t:void 0;return{next:(r?t.next:t)?.bind(o),error:(r?t.error:e)?.bind(o),complete:(r?t.complete:n)?.bind(o)}}n.d(e,{a:()=>x});let i=[],{link:a,unlink:u,propagate:s,checkDirty:c,endTracking:l,startTracking:f,shallowPropagate:d}=function({update:t,notify:e,unwatched:n}){return{link:function(t,e){let n,r=e._depsTail;if(void 0!==r&&r.dep===t)return;let o=4&e._flags;if(o&&void 0!==(n=void 0!==r?r.nextDep:e._deps)&&n.dep===t){e._depsTail=n;return}let a=t._subsTail;if(void 0!==a&&a.sub===e&&(!o||i(a,e)))return;let u=e._depsTail=t._subsTail={dep:t,sub:e,prevDep:r,nextDep:n,prevSub:a,nextSub:void 0};void 0!==n&&(n.prevDep=u),void 0!==r?r.nextDep=u:e._deps=u,void 0!==a?a.nextSub=u:t._subs=u},unlink:r,propagate:function(t){let n,r=t.nextSub;t:for(;;){let o=t.sub,a=o._flags;if(3&a&&(60&a?12&a?4&a?!(48&a)&&i(t,o)?(o._flags=40|a,a&=1):a=0:o._flags=-9&a|32:a=0:o._flags=32|a,2&a&&e(o),1&a)){let e=o._subs;if(void 0!==e){t=e,void 0!==e.nextSub&&(n={value:r,prev:n},r=t.nextSub);continue}}if(void 0!==(t=r)){r=t.nextSub;continue}for(;void 0!==n;)if(t=n.value,n=n.prev,void 0!==t){r=t.nextSub;continue t}break}},checkDirty:function(e,n){let r,i=0;t:for(;;){let a=e.dep,u=a._flags,s=!1;if(16&n._flags)s=!0;else if((17&u)==17){if(t(a)){let t=a._subs;void 0!==t.nextSub&&o(t),s=!0}}else if((33&u)==33){(void 0!==e.nextSub||void 0!==e.prevSub)&&(r={value:e,prev:r}),e=a._deps,n=a,++i;continue}if(!s&&void 0!==e.nextDep){e=e.nextDep;continue}for(;i;){--i;let a=n._subs,u=void 0!==a.nextSub;if(u?(e=r.value,r=r.prev):e=a,s){if(t(n)){u&&o(a),n=e.sub;continue}}else n._flags&=-33;if(n=e.sub,void 0!==e.nextDep){e=e.nextDep;continue t}s=!1}return s}},endTracking:function(t){let e=t._depsTail,n=void 0!==e?e.nextDep:t._deps;for(;void 0!==n;)n=r(n,t);t._flags&=-5},startTracking:function(t){t._depsTail=void 0,t._flags=-57&t._flags|4},shallowPropagate:o};function r(t,e=t.sub){let o=t.dep,i=t.prevDep,a=t.nextDep,u=t.nextSub,s=t.prevSub;return void 0!==a?a.prevDep=i:e._depsTail=i,void 0!==i?i.nextDep=a:e._deps=a,void 0!==u?u.prevSub=s:o._subsTail=s,void 0!==s?s.nextSub=u:void 0===(o._subs=u)&&n(o),a}function o(t){do{let n=t.sub,r=t.nextSub,o=n._flags;(48&o)==32&&(n._flags=16|o,2&o&&e(n)),t=r}while(void 0!==t)}function i(t,e){let n=e._depsTail;if(void 0!==n){let r=e._deps;do{if(r===t)return!0;if(r===n)break;r=r.nextDep}while(void 0!==r)}return!1}}({update:t=>t._update(),notify(t){i[h++]=t},unwatched(t){let e=t._deps;if(void 0!==e){t._flags=17;do e=u(e,t);while(void 0!==e)}}}),p=0,h=0;function g(t,e){let n="function"==typeof t,u={_snapshot:n?void 0:t,_subs:void 0,_subsTail:void 0,_flags:0,get:()=>(void 0!==r&&a(u,r),u._snapshot),subscribe(t){let e=o(t),n={current:!1},i=function(t){let e=()=>{let e=r;r=n,f(n);try{return t()}finally{r=e,l(n)}},n={_deps:void 0,_depsTail:void 0,_flags:2,notify(){let t=this._flags;16&t||32&t&&c(this._deps,this)?e():32&t&&(this._flags=-33&t)},stop(){f(this),l(this)}};return e(),n}(()=>{u.get(),n.current?e.next?.(u._snapshot):n.current=!0});return{unsubscribe:()=>{i.stop()}}},_update(o){let i=r,a=e?.compare??Object.is;r=u,f(u);try{let e=u._snapshot,r="function"==typeof o?o(e):void 0===o&&n?t(t=>t.get()):o;if(void 0===e||!a(e,r))return u._snapshot=r,!0;return!1}finally{r=i,l(u)}}};return n?Object.assign(u,{_deps:void 0,_depsTail:void 0,_flags:17,get(){let t=this._flags;if(16&t||32&t&&c(u._deps,u)){if(u._update()){let t=u._subs;void 0!==t&&d(t)}}else 32&t&&(u._flags=-33&t);return void 0!==r&&a(u,r),u._snapshot}}):Object.assign(u,{set(t){if(u._update(t)){let t=u._subs;if(void 0!==t){for(s(t),d(t);p<h;){let t=i[p];i[p++]=void 0,t.notify()}p=0,h=0}}}}),u}let m="function"==typeof Symbol&&Symbol.observable||"@@observable",y=new WeakMap;function v(t,e){let n,r=t.getInitialSnapshot(),i=r,a=g(i),u=t=>{if(!n)return;let e=t.type,r=n.get(e);r&&r.forEach(e=>e(t))},s=t.transition,c={get _snapshot(){return a._snapshot},on(t,e){n||(n=new Map);let r=n.get(t);r||(r=new Set,n.set(t,r));let o=e.bind(void 0);return r.add(o),{unsubscribe(){r.delete(o)}}},transition:t.transition,sessionId:Math.random().toString(36).slice(6),send(t){let n;y.get(c)?.forEach(e=>{e.next?.({type:"@xstate.event",event:t,sourceRef:void 0,actorRef:c,rootId:c.sessionId})});for(let r of([i,n]=s(i,t),y.get(c)?.forEach(e=>{e.next?.({type:"@xstate.snapshot",event:t,snapshot:i,actorRef:c,rootId:c.sessionId})}),a.set(i),n))"function"==typeof r?r():(e?.[r.type]?.(r),u(r))},getSnapshot:()=>i,get:()=>a.get(),getInitialSnapshot:()=>r,subscribe:a.subscribe.bind(a),[m](){return this},inspect:t=>{let e=o(t);return y.set(c,y.get(c)??new Set),y.get(c).add(e),e.next?.({type:"@xstate.actor",actorRef:c,rootId:c.sessionId}),e.next?.({type:"@xstate.snapshot",snapshot:r,event:{type:"@xstate.init"},actorRef:c,rootId:c.sessionId}),{unsubscribe:()=>y.get(c)?.delete(e)}},trigger:new Proxy({},{get:(t,e)=>t=>{c.send({type:e,...t})}}),select:(t,e=Object.is)=>g(()=>t(c.get().context),{compare:e})};return c}function x(t){var e,n;if("transition"in t)return v(t);return v({getInitialSnapshot:()=>({status:"active",context:t.context,output:void 0,error:void 0}),transition:(e=t.on,(t,n)=>{let r=t.context,o=e?.[n.type],i=[],a={emit:new Proxy({},{get:(t,e)=>t=>{i.push({...t,type:e})}}),effect:t=>{i.push(t)}};if(!o)return[t,i];if("function"==typeof o){let t;r=(t=r,Object.assign({},r,o?.(t,n,a)))}else{let t={};for(let e of Object.keys(o)){let i=o[e];t[e]="function"==typeof i?i(r,n,a):i}r=Object.assign({},r,t)}return[{...t,context:r},i]})},t.emits)}},9701:function(t,e,n){n.d(e,{v9:()=>i});var r=n(4249);function o(t,e){return t===e}function i(t,e,n=o){let a=function(t,e){let n=(0,r.useRef)(void 0);return r=>{let o=t(r);return n.current&&e(n.current,o)?n.current:n.current=o}}(e,n);return(0,r.useSyncExternalStore)((0,r.useCallback)(e=>t.subscribe(e).unsubscribe,[t]),()=>a(t.get()),()=>a(t.get()))}},5185:function(t,e,n){function r(t){return function(e,n){return t.chain(e,function(e){return t.map(n(e),function(){return e})})}}n.d(e,{ij:()=>y,G:()=>c,YP:()=>s,g_:()=>m});var o,i=n(8945);function a(t){return function(e,n){return t.map(e,function(){return n})}}var u=n(4527),s=u.YP,c=u.G,l=function(t,e){return(0,i.zG)(t,d(e))},f="Option",d=function(t){return function(e){return g(e)?s:c(t(e.value))}},p={URI:f,map:l};(0,i.OB)(2,a(p)),a(p);var h={URI:f,map:l,ap:function(t,e){var n;return(0,i.zG)(t,(n=e,function(t){return g(t)||g(n)?s:c(t.value(n.value))}))},chain:(0,i.OB)(2,function(t,e){return g(t)?s:e(t.value)})};(0,i.OB)(2,function(t,e){return g(t)?e():t}),u.pC;var g=function(t){return"None"===t._tag},m=function(t,e){return function(n){return g(n)?t():e(n.value)}};r(h),o={URI:f,fromEither:function(t){return"Left"===t._tag?s:c(t.right)}},r(h);var y=function(t){return null==t?s:c(t)};u.F4,u.Xl},6750:function(t,e,n){n.d(e,{Zt:()=>o});var r=n(8945),o=function(t){return{equals:function(e,n){return e===n||0===t(e,n)},compare:function(e,n){return e===n?0:t(e,n)}}};r.W8},6058:function(t,e,n){n.d(e,{pR:()=>v,jj:()=>p,jG:()=>y,zo:()=>h,DZ:()=>m,UI:()=>g,DY:()=>d});var r=n(4527),o=n(592),i=n(6750);n(8945);var a=r.Xl,u=r.Od,s=(r.ri,r.YM);r.F4;var c=s,l=r.Gb,f=function(t){return 0===t.length},d=function(t){return function(e){return e.length<=1?e:e.slice().sort(t.compare)}},p=function(t){var e=function(e){if(1===e.length)return e;for(var n=[c(e)],r=l(e),o=function(e){n.every(function(n){return!t.equals(n,e)})&&n.push(e)},i=0;i<r.length;i++)o(r[i]);return n};return function(t){return u(t)?e(t):t}},h=function(t){return function(e){return f(e)?t:f(t)?e:e.concat(t)}},g=function(t){return function(e){return e.map(function(e){return t(e)})}},m=function(t){var e;return e=function(e,n){return t(n)},function(t){for(var n=[],o=0;o<t.length;o++){var i=e(o,t[o]);r.pC(i)&&n.push(i.value)}return n}},y=function(){return{concat:function(t,e){return f(t)?e:f(e)?t:t.concat(e)}}},v=function(t){return(0,i.Zt)(function(e,n){for(var r=e.length,i=n.length,a=Math.min(r,i),u=0;u<a;u++){var s=t.compare(e[u],n[u]);if(0!==s)return s}return o.Df.compare(r,i)})};r.F4},8544:function(t,e,n){n.d(e,{uZ:()=>l,YH:()=>k,VO:()=>s,qO:()=>E});var r=n(8945),o=n(4527),i=function(t,e){return{left:t,right:e}},a=function(t){return 0===t.size},u=function(t){return function(e){return Array.from(e.keys()).sort(t.compare)}},s=function(t){return function(e){return Array.from(e.values()).sort(t.compare)}},c=new Map;function l(t,e){var n=function t(e){return function(n,r){if(void 0===r){var i,a=t(e);return function(t){return a(n,t)}}for(var u=r.entries();!(i=u.next()).done;){var s=i.value,c=s[0],l=s[1];if(e.equals(c,n))return o.G([c,l])}return o.YP}}(t);return{concat:function(t,r){if(a(t))return r;if(a(r))return t;for(var i,u=new Map(t),s=r.entries();!(i=s.next()).done;){var c=i.value,l=c[0],f=c[1],d=n(l,t);o.pC(d)?u.set(d.value[0],e.concat(d.value[1],f)):u.set(l,f)}return u},empty:c}}var f=function(t,e){for(var n,r=new Map,o=t.entries();!(n=o.next()).done;){var i=n.value,a=i[0],u=i[1];r.set(a,e(a,u))}return r},d=function(t,e){return f(t,function(t,n){return e(n)})},p=function(t,e){return y(t,function(t,n){return e(n)})},h=function(t,e){return v(t,function(t,n){return e(n)})},g=function(t,e){return x(t,function(t,n){return e(n)})},m=function(t,e){return S(t,function(t,n){return e(n)})},y=function(t,e){return(0,r.zG)(t,function(t){for(var n,r=new Map,o=t.entries();!(n=o.next()).done;){var i=n.value,a=i[0],u=i[1];e(a,u)&&r.set(a,u)}return r})},v=function(t,e){return(0,r.zG)(t,function(t){for(var n,r=new Map,i=t.entries();!(n=i.next()).done;){var a=n.value,u=a[0],s=e(u,a[1]);o.pC(s)&&r.set(u,s.value)}return r})},x=function(t,e){return(0,r.zG)(t,function(t){for(var n,r=new Map,o=new Map,a=t.entries();!(n=a.next()).done;){var u=n.value,s=u[0],c=u[1];e(s,c)?o.set(s,c):r.set(s,c)}return i(r,o)})},S=function(t,e){return(0,r.zG)(t,function(t){for(var n,r=new Map,a=new Map,u=t.entries();!(n=u.next()).done;){var s=n.value,c=s[0],l=e(c,s[1]);o.nM(l)?r.set(c,l.left):a.set(c,l.right)}return i(r,a)})},b=function(t){for(var e,n=new Map,r=t.entries();!(e=r.next()).done;){var i=e.value,a=i[0],u=i[1];o.pC(u)&&n.set(a,u.value)}return n},_=function(t){for(var e,n=new Map,r=new Map,a=t.entries();!(e=a.next()).done;){var u=e.value,s=u[0],c=u[1];o.nM(c)?n.set(s,c.left):r.set(s,c.right)}return i(n,r)},M="ReadonlyMap";function E(){return{URI:M,_E:void 0,map:d,mapWithIndex:f,compact:b,separate:_,filter:p,filterMap:h,partition:g,partitionMap:m,partitionMapWithIndex:S,partitionWithIndex:x,filterMapWithIndex:v,filterWithIndex:y}}var w={URI:M,compact:b,separate:_},O=function(t){var e=T(t);return function(t,n){return e(t,function(t,e,r){return n(e,r)})}},j=function(t){var e=A(t);return function(t){var n=e(t);return function(t){return n(function(e,n){return t(n)})}}},R=function(t){var e=D(t);return function(t,n){return e(t,function(t,e,r){return n(e,r)})}},I=function(t){var e=O(t),n=j(t),o=R(t);return{URI:M,_E:void 0,reduce:function(t,n,o){return(0,r.zG)(t,e(n,o))},foldMap:function(t){var e=n(t);return function(t,n){return(0,r.zG)(t,e(n))}},reduceRight:function(t,e,n){return(0,r.zG)(t,o(e,n))}}},T=function(t){var e=u(t);return function(t,n){return function(r){for(var o=t,i=0,a=e(r);i<a.length;i++){var u=a[i];o=n(u,o,r.get(u))}return o}}},A=function(t){var e=u(t);return function(t){return function(n){return function(r){for(var o=t.empty,i=0,a=e(r);i<a.length;i++){var u=a[i];o=t.concat(o,n(u,r.get(u)))}return o}}}},D=function(t){var e=u(t);return function(t,n){return function(r){for(var o=t,i=e(r),a=i.length,u=a-1;u>=0;u--){var s=i[u];o=n(s,r.get(s),o)}return o}}},N=function(t){var e=I(t),n=T(t),o=A(t),i=D(t);return{URI:M,_E:void 0,reduce:e.reduce,foldMap:e.foldMap,reduceRight:e.reduceRight,reduceWithIndex:function(t,e,o){return(0,r.zG)(t,n(e,o))},foldMapWithIndex:function(t){var e=o(t);return function(t,n){return(0,r.zG)(t,e(n))}},reduceRightWithIndex:function(t,e,n){return(0,r.zG)(t,i(e,n))}}},C=function(t){var e=N(t),n=u(t),o=function(t){return function(e,r){for(var o=t.of(new Map),i=n(e),a=i.length,u=0;u<a;u++)!function(n){var a=i[n],u=e.get(a);o=t.ap(t.map(o,function(t){return function(e){return t.set(a,e)}}),r(a,u))}(u);return o}};return{URI:M,_E:void 0,map:d,mapWithIndex:f,reduce:e.reduce,foldMap:e.foldMap,reduceRight:e.reduceRight,reduceWithIndex:e.reduceWithIndex,foldMapWithIndex:e.foldMapWithIndex,reduceRightWithIndex:e.reduceRightWithIndex,traverse:function(t){var e=o(t);return function(t,n){return e(t,function(t,e){return n(e)})}},sequence:function(t){var e=o(t);return function(t){return e(t,r.SK)}},traverseWithIndex:o}};function k(t){var e=C(t);return{URI:M,_E:void 0,map:d,compact:b,separate:_,filter:p,filterMap:h,partition:g,partitionMap:m,reduce:e.reduce,foldMap:e.foldMap,reduceRight:e.reduceRight,traverse:e.traverse,sequence:e.sequence,mapWithIndex:f,reduceWithIndex:e.reduceWithIndex,foldMapWithIndex:e.foldMapWithIndex,reduceRightWithIndex:e.reduceRightWithIndex,traverseWithIndex:e.traverseWithIndex,wilt:function(t){var n=e.traverse(t);return function(e,r){return t.map(n(e,r),w.separate)}},wither:function(t){var n=e.traverse(t);return function(e,r){return t.map(n(e,r),w.compact)}}}}},8945:function(t,e,n){n.d(e,{OB:()=>c,SK:()=>s,W8:()=>i,a9:()=>o,ls:()=>a,zG:()=>u});var r=function(t,e,n){if(n||2==arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};function o(t){return function(){return t}}var i=o(!0);function a(t,e,n,r,o,i,a,u,s){switch(arguments.length){case 1:return t;case 2:return function(){return e(t.apply(this,arguments))};case 3:return function(){return n(e(t.apply(this,arguments)))};case 4:return function(){return r(n(e(t.apply(this,arguments))))};case 5:return function(){return o(r(n(e(t.apply(this,arguments)))))};case 6:return function(){return i(o(r(n(e(t.apply(this,arguments))))))};case 7:return function(){return a(i(o(r(n(e(t.apply(this,arguments)))))))};case 8:return function(){return u(a(i(o(r(n(e(t.apply(this,arguments))))))))};case 9:return function(){return s(u(a(i(o(r(n(e(t.apply(this,arguments)))))))))}}}function u(t,e,n,r,o,i,a,u,s){switch(arguments.length){case 1:return t;case 2:return e(t);case 3:return n(e(t));case 4:return r(n(e(t)));case 5:return o(r(n(e(t))));case 6:return i(o(r(n(e(t)))));case 7:return a(i(o(r(n(e(t))))));case 8:return u(a(i(o(r(n(e(t)))))));case 9:return s(u(a(i(o(r(n(e(t))))))));default:for(var c=arguments[0],l=1;l<arguments.length;l++)c=arguments[l](c);return c}}var s=function(t,e){return e},c=function(t,e){var n="number"==typeof t?function(e){return e.length>=t}:t;return function(){var t=Array.from(arguments);return n(arguments)?e.apply(this,t):function(n){return e.apply(void 0,r([n],t,!1))}}}},4527:function(t,e,n){n.d(e,{F4:()=>p,G:()=>a,Gb:()=>f,Od:()=>c,Xl:()=>d,YM:()=>l,YP:()=>i,nM:()=>u,pC:()=>o,r1:()=>h,ri:()=>s});var r=function(t,e,n){if(n||2==arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))},o=function(t){return"Some"===t._tag},i={_tag:"None"},a=function(t){return{_tag:"Some",value:t}},u=function(t){return"Left"===t._tag},s=function(t){return[t]},c=function(t){return t.length>0},l=function(t){return t[0]},f=function(t){return t.slice(1)},d=[],p={};Object.prototype.hasOwnProperty;var h=function(t){return r([t[0]],t.slice(1),!0)}},592:function(t,e,n){n.d(e,{Df:()=>o,Eq:()=>r});var r={equals:function(t,e){return t===e}},o={equals:r.equals,compare:function(t,e){return t<e?-1:+(t>e)}};r.equals,o.compare},2061:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.getApplicativeMonoid=function(t){var e=(0,r.getApplySemigroup)(t);return function(n){return{concat:e(n).concat,empty:t.of(n.empty)}}},e.getApplicativeComposition=function(t,e){var n=(0,i.getFunctorComposition)(t,e).map,a=(0,r.ap)(t,e);return{map:n,of:function(n){return t.of(e.of(n))},ap:function(t,e){return(0,o.pipe)(t,a(e))}}};var r=n(4616),o=n(3644),i=n(1690)},4616:function(t,e,n){var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.ap=function(t,e){return function(n){return function(r){return t.ap(t.map(r,function(t){return function(n){return e.ap(t,n)}}),n)}}},e.apFirst=function(t){return function(e){return function(n){return t.ap(t.map(n,function(t){return function(){return t}}),e)}}},e.apSecond=function(t){return function(e){return function(n){return t.ap(t.map(n,function(){return function(t){return t}}),e)}}},e.apS=function(t){return function(e,n){return function(r){return t.ap(t.map(r,function(t){return function(n){var r;return Object.assign({},t,((r={})[e]=n,r))}}),n)}}},e.getApplySemigroup=function(t){return function(e){return{concat:function(n,r){return t.ap(t.map(n,function(t){return function(n){return e.concat(t,n)}}),r)}}}},e.sequenceT=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r=e.length,o=(u.has.call(c,r)||(c[r]=s(a.tuple,r-1,[])),c[r]),i=t.map(e[0],o),l=1;l<r;l++)i=t.ap(i,e[l]);return i}},e.sequenceS=function(t){return function(e){for(var n=Object.keys(e),r=n.length,o=function(t){var e=t.length;switch(e){case 1:return function(e){var n;return(n={})[t[0]]=e,n};case 2:return function(e){return function(n){var r;return(r={})[t[0]]=e,r[t[1]]=n,r}};case 3:return function(e){return function(n){return function(r){var o;return(o={})[t[0]]=e,o[t[1]]=n,o[t[2]]=r,o}}};case 4:return function(e){return function(n){return function(r){return function(o){var i;return(i={})[t[0]]=e,i[t[1]]=n,i[t[2]]=r,i[t[3]]=o,i}}}};case 5:return function(e){return function(n){return function(r){return function(o){return function(i){var a;return(a={})[t[0]]=e,a[t[1]]=n,a[t[2]]=r,a[t[3]]=o,a[t[4]]=i,a}}}}};default:return s(function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(var o={},i=0;i<e;i++)o[t[i]]=n[i];return o},e-1,[])}}(n),i=t.map(e[n[0]],o),a=1;a<r;a++)i=t.ap(i,e[n[a]]);return i}};var a=n(3644),u=i(n(3469));function s(t,e,n){return function(r){for(var o=Array(n.length+1),i=0;i<n.length;i++)o[i]=n[i];return o[n.length]=r,0===e?t.apply(null,o):s(t,e-1,o)}}var c={1:function(t){return[t]},2:function(t){return function(e){return[t,e]}},3:function(t){return function(e){return function(n){return[t,e,n]}}},4:function(t){return function(e){return function(n){return function(r){return[t,e,n,r]}}}},5:function(t){return function(e){return function(n){return function(r){return function(o){return[t,e,n,r,o]}}}}}}},1896:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.chainFirst=function(t){var e=n(t);return function(t){return function(n){return e(n,t)}}},e.tap=n,e.bind=function(t){return function(e,n){return function(r){return t.chain(r,function(r){return t.map(n(r),function(t){var n;return Object.assign({},r,((n={})[e]=t,n))})})}}};function n(t){return function(e,n){return t.chain(e,function(e){return t.map(n(e),function(){return e})})}}},8940:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.eqDate=e.eqNumber=e.eqString=e.eqBoolean=e.eq=e.strictEqual=e.getStructEq=e.getTupleEq=e.Contravariant=e.getMonoid=e.getSemigroup=e.eqStrict=e.URI=e.contramap=e.tuple=e.struct=e.fromEquals=void 0;var r=n(3644);e.fromEquals=function(t){return{equals:function(e,n){return e===n||t(e,n)}}},e.struct=function(t){return(0,e.fromEquals)(function(e,n){for(var r in t)if(!t[r].equals(e[r],n[r]))return!1;return!0})},e.tuple=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(0,e.fromEquals)(function(e,n){return t.every(function(t,r){return t.equals(e[r],n[r])})})},e.contramap=function(t){return function(n){return(0,e.fromEquals)(function(e,r){return n.equals(t(e),t(r))})}},e.URI="Eq",e.eqStrict={equals:function(t,e){return t===e}};var o={equals:function(){return!0}};e.getSemigroup=function(){return{concat:function(t,n){return(0,e.fromEquals)(function(e,r){return t.equals(e,r)&&n.equals(e,r)})}}},e.getMonoid=function(){return{concat:(0,e.getSemigroup)().concat,empty:o}},e.Contravariant={URI:e.URI,contramap:function(t,n){return(0,r.pipe)(t,(0,e.contramap)(n))}},e.getTupleEq=e.tuple,e.getStructEq=e.struct,e.strictEqual=e.eqStrict.equals,e.eq=e.Contravariant,e.eqBoolean=e.eqStrict,e.eqString=e.eqStrict,e.eqNumber=e.eqStrict,e.eqDate={equals:function(t,e){return t.valueOf()===e.valueOf()}}},1133:function(t,e,n){var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.fromOption=c,e.fromPredicate=function(t){return function(e,n){return function(r){return t.fromEither(e(r)?s.right(r):s.left(n(r)))}}},e.fromOptionK=l,e.chainOptionK=function(t,e){var n=l(t);return function(t){var r=n(t);return function(t){return function(n){return e.chain(n,r(t))}}}},e.fromEitherK=f,e.chainEitherK=function(t,e){var n=f(t);return function(t){return function(r){return e.chain(r,n(t))}}},e.chainFirstEitherK=function(t,e){var n=d(t,e);return function(t){return function(e){return n(e,t)}}},e.filterOrElse=function(t,e){return function(n,r){return function(o){return e.chain(o,function(e){return t.fromEither(n(e)?s.right(e):s.left(r(e)))})}}},e.tapEither=d;var a=n(1896),u=n(3644),s=i(n(3469));function c(t){return function(e){return function(n){return t.fromEither(s.isNone(n)?s.left(e()):s.right(n.value))}}}function l(t){var e=c(t);return function(t){var n=e(t);return function(t){return(0,u.flow)(t,n)}}}function f(t){return function(e){return(0,u.flow)(e,t.fromEither)}}function d(t,e){var n=f(t),r=(0,a.tap)(e);return function(t,e){return r(t,n(e))}}},1690:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.map=o,e.flap=function(t){return function(e){return function(n){return t.map(n,function(t){return t(e)})}}},e.bindTo=function(t){return function(e){return function(n){return t.map(n,function(t){var n;return(n={})[e]=t,n})}}},e.let=function(t){return function(e,n){return function(r){return t.map(r,function(t){var r;return Object.assign({},t,((r={})[e]=n(t),r))})}}},e.getFunctorComposition=function(t,e){var n=o(t,e);return{map:function(t,e){return(0,r.pipe)(t,n(e))}}},e.as=i,e.asUnit=function(t){var e=i(t);return function(t){return e(t,void 0)}};var r=n(3644);function o(t,e){return function(n){return function(r){return t.map(r,function(t){return e.map(t,n)})}}}function i(t){return function(e,n){return t.map(e,function(){return n})}}},1437:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.concatAll=e.endo=e.filterSecond=e.filterFirst=e.reverse=void 0,e.reverse=function(t){return{concat:function(e,n){return t.concat(n,e)}}},e.filterFirst=function(t){return function(e){return{concat:function(n,r){return t(n)?e.concat(n,r):r}}}},e.filterSecond=function(t){return function(e){return{concat:function(n,r){return t(r)?e.concat(n,r):n}}}},e.endo=function(t){return function(e){return{concat:function(n,r){return e.concat(t(n),t(r))}}}},e.concatAll=function(t){return function(e){return function(n){return n.reduce(function(e,n){return t.concat(e,n)},e)}}}},7901:function(t,e,n){var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.throwError=e.Witherable=e.wilt=e.wither=e.Traversable=e.sequence=e.traverse=e.Filterable=e.partitionMap=e.partition=e.filterMap=e.filter=e.Compactable=e.separate=e.compact=e.Extend=e.extend=e.Alternative=e.guard=e.Zero=e.zero=e.Alt=e.alt=e.altW=e.orElse=e.Foldable=e.reduceRight=e.foldMap=e.reduce=e.Monad=e.Chain=e.flatMap=e.Applicative=e.Apply=e.ap=e.Pointed=e.of=e.asUnit=e.as=e.Functor=e.map=e.getMonoid=e.getOrd=e.getEq=e.getShow=e.URI=e.getRight=e.getLeft=e.some=e.none=void 0,e.getLastMonoid=e.getFirstMonoid=e.getApplyMonoid=e.getApplySemigroup=e.option=e.mapNullable=e.chainFirst=e.chain=e.sequenceArray=e.traverseArray=e.traverseArrayWithIndex=e.traverseReadonlyArrayWithIndex=e.traverseReadonlyNonEmptyArrayWithIndex=e.ApT=e.apS=e.bind=e.let=e.bindTo=e.Do=e.exists=e.toUndefined=e.toNullable=e.chainNullableK=e.fromNullableK=e.tryCatchK=e.tryCatch=e.fromNullable=e.chainFirstEitherK=e.chainEitherK=e.fromEitherK=e.duplicate=e.tapEither=e.tap=e.flatten=e.apSecond=e.apFirst=e.flap=e.getOrElse=e.getOrElseW=e.fold=e.match=e.foldW=e.matchW=e.isNone=e.isSome=e.FromEither=e.fromEither=e.MonadThrow=void 0,e.fromPredicate=function(t){return function(n){return t(n)?(0,e.some)(n):e.none}},e.elem=function t(n){return function(r,o){if(void 0===o){var i=t(n);return function(t){return i(r,t)}}return!(0,e.isNone)(o)&&n.equals(r,o.value)}},e.getRefinement=function(t){return function(n){return(0,e.isSome)(t(n))}};var a=n(2061),u=n(4616),s=i(n(1896)),c=n(1133),l=n(3644),f=n(1690),d=i(n(3469)),p=n(3893),h=n(7264),g=n(6566),m=n(7341),y=n(1049);e.none=d.none,e.some=d.some,e.getLeft=function(t){return"Right"===t._tag?e.none:(0,e.some)(t.left)},e.getRight=function(t){return"Left"===t._tag?e.none:(0,e.some)(t.right)};var v=function(t,n){return(0,l.pipe)(t,(0,e.map)(n))},x=function(t,n){return(0,l.pipe)(t,(0,e.ap)(n))},S=function(t,n,r){return(0,l.pipe)(t,(0,e.reduce)(n,r))},b=function(t){var n=(0,e.foldMap)(t);return function(t,e){return(0,l.pipe)(t,n(e))}},_=function(t,n,r){return(0,l.pipe)(t,(0,e.reduceRight)(n,r))},M=function(t){var n=(0,e.traverse)(t);return function(t,e){return(0,l.pipe)(t,n(e))}},E=function(t,n){return(0,l.pipe)(t,(0,e.alt)(n))},w=function(t,n){return(0,l.pipe)(t,(0,e.filter)(n))},O=function(t,n){return(0,l.pipe)(t,(0,e.filterMap)(n))},j=function(t,n){return(0,l.pipe)(t,(0,e.extend)(n))},R=function(t,n){return(0,l.pipe)(t,(0,e.partition)(n))},I=function(t,n){return(0,l.pipe)(t,(0,e.partitionMap)(n))};e.URI="Option",e.getShow=function(t){return{show:function(n){return(0,e.isNone)(n)?"none":"some(".concat(t.show(n.value),")")}}},e.getEq=function(t){return{equals:function(n,r){return n===r||((0,e.isNone)(n)?(0,e.isNone)(r):!(0,e.isNone)(r)&&t.equals(n.value,r.value))}}},e.getOrd=function(t){return{equals:(0,e.getEq)(t).equals,compare:function(n,r){return n===r?0:(0,e.isSome)(n)?(0,e.isSome)(r)?t.compare(n.value,r.value):1:-1}}},e.getMonoid=function(t){return{concat:function(n,r){return(0,e.isNone)(n)?r:(0,e.isNone)(r)?n:(0,e.some)(t.concat(n.value,r.value))},empty:e.none}},e.map=function(t){return function(n){return(0,e.isNone)(n)?e.none:(0,e.some)(t(n.value))}},e.Functor={URI:e.URI,map:v},e.as=(0,l.dual)(2,(0,f.as)(e.Functor)),e.asUnit=(0,f.asUnit)(e.Functor),e.of=e.some,e.Pointed={URI:e.URI,of:e.of},e.ap=function(t){return function(n){return(0,e.isNone)(n)||(0,e.isNone)(t)?e.none:(0,e.some)(n.value(t.value))}},e.Apply={URI:e.URI,map:v,ap:x},e.Applicative={URI:e.URI,map:v,ap:x,of:e.of},e.flatMap=(0,l.dual)(2,function(t,n){return(0,e.isNone)(t)?e.none:n(t.value)}),e.Chain={URI:e.URI,map:v,ap:x,chain:e.flatMap},e.Monad={URI:e.URI,map:v,ap:x,of:e.of,chain:e.flatMap},e.reduce=function(t,n){return function(r){return(0,e.isNone)(r)?t:n(t,r.value)}},e.foldMap=function(t){return function(n){return function(r){return(0,e.isNone)(r)?t.empty:n(r.value)}}},e.reduceRight=function(t,n){return function(r){return(0,e.isNone)(r)?t:n(r.value,t)}},e.Foldable={URI:e.URI,reduce:S,foldMap:b,reduceRight:_},e.orElse=(0,l.dual)(2,function(t,n){return(0,e.isNone)(t)?n():t}),e.altW=e.orElse,e.alt=e.orElse,e.Alt={URI:e.URI,map:v,alt:E},e.zero=function(){return e.none},e.Zero={URI:e.URI,zero:e.zero},e.guard=(0,y.guard)(e.Zero,e.Pointed),e.Alternative={URI:e.URI,map:v,ap:x,of:e.of,alt:E,zero:e.zero},e.extend=function(t){return function(n){return(0,e.isNone)(n)?e.none:(0,e.some)(t(n))}},e.Extend={URI:e.URI,map:v,extend:j},e.compact=(0,e.flatMap)(l.identity);var T=(0,g.separated)(e.none,e.none);e.separate=function(t){return(0,e.isNone)(t)?T:(0,g.separated)((0,e.getLeft)(t.value),(0,e.getRight)(t.value))},e.Compactable={URI:e.URI,compact:e.compact,separate:e.separate},e.filter=function(t){return function(n){return(0,e.isNone)(n)?e.none:t(n.value)?n:e.none}},e.filterMap=function(t){return function(n){return(0,e.isNone)(n)?e.none:t(n.value)}},e.partition=function(t){return function(e){return(0,g.separated)(w(e,(0,p.not)(t)),w(e,t))}},e.partitionMap=function(t){return(0,l.flow)((0,e.map)(t),e.separate)},e.Filterable={URI:e.URI,map:v,compact:e.compact,separate:e.separate,filter:w,filterMap:O,partition:R,partitionMap:I},e.traverse=function(t){return function(n){return function(r){return(0,e.isNone)(r)?t.of(e.none):t.map(n(r.value),e.some)}}},e.sequence=function(t){return function(n){return(0,e.isNone)(n)?t.of(e.none):t.map(n.value,e.some)}},e.Traversable={URI:e.URI,map:v,reduce:S,foldMap:b,reduceRight:_,traverse:M,sequence:e.sequence};var A=(0,m.witherDefault)(e.Traversable,e.Compactable),D=(0,m.wiltDefault)(e.Traversable,e.Compactable);e.wither=function(t){var e=A(t);return function(t){return function(n){return e(n,t)}}},e.wilt=function(t){var e=D(t);return function(t){return function(n){return e(n,t)}}},e.Witherable={URI:e.URI,map:v,reduce:S,foldMap:b,reduceRight:_,traverse:M,sequence:e.sequence,compact:e.compact,separate:e.separate,filter:w,filterMap:O,partition:R,partitionMap:I,wither:A,wilt:D},e.throwError=function(){return e.none},e.MonadThrow={URI:e.URI,map:v,ap:x,of:e.of,chain:e.flatMap,throwError:e.throwError},e.fromEither=e.getRight,e.FromEither={URI:e.URI,fromEither:e.fromEither},e.isSome=d.isSome,e.isNone=function(t){return"None"===t._tag},e.matchW=function(t,n){return function(r){return(0,e.isNone)(r)?t():n(r.value)}},e.foldW=e.matchW,e.match=e.matchW,e.fold=e.match,e.getOrElseW=function(t){return function(n){return(0,e.isNone)(n)?t():n.value}},e.getOrElse=e.getOrElseW,e.flap=(0,f.flap)(e.Functor),e.apFirst=(0,u.apFirst)(e.Apply),e.apSecond=(0,u.apSecond)(e.Apply),e.flatten=e.compact,e.tap=(0,l.dual)(2,s.tap(e.Chain)),e.tapEither=(0,l.dual)(2,(0,c.tapEither)(e.FromEither,e.Chain)),e.duplicate=(0,e.extend)(l.identity),e.fromEitherK=(0,c.fromEitherK)(e.FromEither),e.chainEitherK=(0,c.chainEitherK)(e.FromEither,e.Chain),e.chainFirstEitherK=e.tapEither,e.fromNullable=function(t){return null==t?e.none:(0,e.some)(t)},e.tryCatch=function(t){try{return(0,e.some)(t())}catch(t){return e.none}},e.tryCatchK=function(t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return(0,e.tryCatch)(function(){return t.apply(void 0,n)})}},e.fromNullableK=function(t){return(0,l.flow)(t,e.fromNullable)},e.chainNullableK=function(t){return function(n){return(0,e.isNone)(n)?e.none:(0,e.fromNullable)(t(n.value))}},e.toNullable=(0,e.match)(l.constNull,l.identity),e.toUndefined=(0,e.match)(l.constUndefined,l.identity),e.exists=function(t){return function(n){return!(0,e.isNone)(n)&&t(n.value)}},e.Do=(0,e.of)(d.emptyRecord),e.bindTo=(0,f.bindTo)(e.Functor);var N=(0,f.let)(e.Functor);e.let=N,e.bind=s.bind(e.Chain),e.apS=(0,u.apS)(e.Apply),e.ApT=(0,e.of)(d.emptyReadonlyArray),e.traverseReadonlyNonEmptyArrayWithIndex=function(t){return function(n){var r=t(0,d.head(n));if((0,e.isNone)(r))return e.none;for(var o=[r.value],i=1;i<n.length;i++){var a=t(i,n[i]);if((0,e.isNone)(a))return e.none;o.push(a.value)}return(0,e.some)(o)}},e.traverseReadonlyArrayWithIndex=function(t){var n=(0,e.traverseReadonlyNonEmptyArrayWithIndex)(t);return function(t){return d.isNonEmpty(t)?n(t):e.ApT}},e.traverseArrayWithIndex=e.traverseReadonlyArrayWithIndex,e.traverseArray=function(t){return(0,e.traverseReadonlyArrayWithIndex)(function(e,n){return t(n)})},e.sequenceArray=(0,e.traverseArray)(l.identity),e.chain=e.flatMap,e.chainFirst=e.tap,e.mapNullable=e.chainNullableK,e.option={URI:e.URI,map:v,of:e.of,ap:x,chain:e.flatMap,reduce:S,foldMap:b,reduceRight:_,traverse:M,sequence:e.sequence,zero:e.zero,alt:E,extend:j,compact:e.compact,separate:e.separate,filter:w,filterMap:O,partition:R,partitionMap:I,wither:A,wilt:D,throwError:e.throwError},e.getApplySemigroup=(0,u.getApplySemigroup)(e.Apply),e.getApplyMonoid=(0,a.getApplicativeMonoid)(e.Applicative),e.getFirstMonoid=function(){return(0,e.getMonoid)((0,h.first)())},e.getLastMonoid=function(){return(0,e.getMonoid)((0,h.last)())}},1706:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.ordDate=e.ordNumber=e.ordString=e.ordBoolean=e.ord=e.getDualOrd=e.getTupleOrd=e.between=e.clamp=e.max=e.min=e.geq=e.leq=e.gt=e.lt=e.equals=e.trivial=e.Contravariant=e.getMonoid=e.getSemigroup=e.URI=e.contramap=e.reverse=e.tuple=e.fromCompare=e.equalsDefault=void 0;var r=n(8940),o=n(3644);e.equalsDefault=function(t){return function(e,n){return e===n||0===t(e,n)}},e.fromCompare=function(t){return{equals:(0,e.equalsDefault)(t),compare:function(e,n){return e===n?0:t(e,n)}}},e.tuple=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(0,e.fromCompare)(function(e,n){for(var r=0;r<t.length-1;r++){var o=t[r].compare(e[r],n[r]);if(0!==o)return o}return t[r].compare(e[r],n[r])})},e.reverse=function(t){return(0,e.fromCompare)(function(e,n){return t.compare(n,e)})},e.contramap=function(t){return function(n){return(0,e.fromCompare)(function(e,r){return n.compare(t(e),t(r))})}},e.URI="Ord",e.getSemigroup=function(){return{concat:function(t,n){return(0,e.fromCompare)(function(e,r){var o=t.compare(e,r);return 0!==o?o:n.compare(e,r)})}}},e.getMonoid=function(){return{concat:(0,e.getSemigroup)().concat,empty:(0,e.fromCompare)(function(){return 0})}},e.Contravariant={URI:e.URI,contramap:function(t,n){return(0,o.pipe)(t,(0,e.contramap)(n))}},e.trivial={equals:o.constTrue,compare:(0,o.constant)(0)},e.equals=function(t){return function(e){return function(n){return n===e||0===t.compare(n,e)}}},e.lt=function(t){return function(e,n){return -1===t.compare(e,n)}},e.gt=function(t){return function(e,n){return 1===t.compare(e,n)}},e.leq=function(t){return function(e,n){return 1!==t.compare(e,n)}},e.geq=function(t){return function(e,n){return -1!==t.compare(e,n)}},e.min=function(t){return function(e,n){return e===n||1>t.compare(e,n)?e:n}},e.max=function(t){return function(e,n){return e===n||t.compare(e,n)>-1?e:n}},e.clamp=function(t){var n=(0,e.min)(t),r=(0,e.max)(t);return function(t,e){return function(o){return r(n(o,e),t)}}},e.between=function(t){var n=(0,e.lt)(t),r=(0,e.gt)(t);return function(t,e){return function(o){return!(n(o,t)||r(o,e))}}},e.getTupleOrd=e.tuple,e.getDualOrd=e.reverse,e.ord=e.Contravariant;var i={equals:r.eqStrict.equals,compare:function(t,e){return t<e?-1:+(t>e)}};e.ordBoolean=i,e.ordString=i,e.ordNumber=i,e.ordDate=(0,o.pipe)(e.ordNumber,(0,e.contramap)(function(t){return t.valueOf()}))},3893:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.and=e.or=e.not=e.Contravariant=e.getMonoidAll=e.getSemigroupAll=e.getMonoidAny=e.getSemigroupAny=e.URI=e.contramap=void 0;var r=n(3644);e.contramap=function(t){return function(e){return(0,r.flow)(t,e)}},e.URI="Predicate",e.getSemigroupAny=function(){return{concat:function(t,n){return(0,r.pipe)(t,(0,e.or)(n))}}},e.getMonoidAny=function(){return{concat:(0,e.getSemigroupAny)().concat,empty:r.constFalse}},e.getSemigroupAll=function(){return{concat:function(t,n){return(0,r.pipe)(t,(0,e.and)(n))}}},e.getMonoidAll=function(){return{concat:(0,e.getSemigroupAll)().concat,empty:r.constTrue}},e.Contravariant={URI:e.URI,contramap:function(t,n){return(0,r.pipe)(t,(0,e.contramap)(n))}},e.not=function(t){return function(e){return!t(e)}},e.or=function(t){return function(e){return function(n){return e(n)||t(n)}}},e.and=function(t){return function(e){return function(n){return e(n)&&t(n)}}}},7264:function(t,e,n){var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.semigroupProduct=e.semigroupSum=e.semigroupString=e.getFunctionSemigroup=e.semigroupAny=e.semigroupAll=e.getIntercalateSemigroup=e.getMeetSemigroup=e.getJoinSemigroup=e.getDualSemigroup=e.getStructSemigroup=e.getTupleSemigroup=e.getFirstSemigroup=e.getLastSemigroup=e.getObjectSemigroup=e.semigroupVoid=e.concatAll=e.last=e.first=e.intercalate=e.tuple=e.struct=e.reverse=e.constant=e.max=e.min=void 0,e.fold=function(t){var n=(0,e.concatAll)(t);return function(t,e){return void 0===e?n(t):n(t)(e)}};var a=n(3644),u=i(n(3469)),s=i(n(1437)),c=i(n(1706));e.min=function(t){return{concat:c.min(t)}},e.max=function(t){return{concat:c.max(t)}},e.constant=function(t){return{concat:function(){return t}}},e.reverse=s.reverse,e.struct=function(t){return{concat:function(e,n){var r={};for(var o in t)u.has.call(t,o)&&(r[o]=t[o].concat(e[o],n[o]));return r}}},e.tuple=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return{concat:function(e,n){return t.map(function(t,r){return t.concat(e[r],n[r])})}}},e.intercalate=function(t){return function(e){return{concat:function(n,r){return e.concat(n,e.concat(t,r))}}}},e.first=function(){return{concat:a.identity}},e.last=function(){return{concat:function(t,e){return e}}},e.concatAll=s.concatAll,e.semigroupVoid=(0,e.constant)(void 0),e.getObjectSemigroup=function(){return{concat:function(t,e){return Object.assign({},t,e)}}},e.getLastSemigroup=e.last,e.getFirstSemigroup=e.first,e.getTupleSemigroup=e.tuple,e.getStructSemigroup=e.struct,e.getDualSemigroup=e.reverse,e.getJoinSemigroup=e.max,e.getMeetSemigroup=e.min,e.getIntercalateSemigroup=e.intercalate,e.semigroupAll={concat:function(t,e){return t&&e}},e.semigroupAny={concat:function(t,e){return t||e}},e.getFunctionSemigroup=a.getSemigroup,e.semigroupString={concat:function(t,e){return t+e}},e.semigroupSum={concat:function(t,e){return t+e}},e.semigroupProduct={concat:function(t,e){return t*e}}},6566:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.right=e.left=e.flap=e.Functor=e.Bifunctor=e.URI=e.bimap=e.mapLeft=e.map=e.separated=void 0;var r=n(3644),o=n(1690);e.separated=function(t,e){return{left:t,right:e}},e.map=function(t){return function(n){return(0,e.separated)((0,e.left)(n),t((0,e.right)(n)))}},e.mapLeft=function(t){return function(n){return(0,e.separated)(t((0,e.left)(n)),(0,e.right)(n))}},e.bimap=function(t,n){return function(r){return(0,e.separated)(t((0,e.left)(r)),n((0,e.right)(r)))}},e.URI="Separated",e.Bifunctor={URI:e.URI,mapLeft:function(t,n){return(0,r.pipe)(t,(0,e.mapLeft)(n))},bimap:function(t,n,o){return(0,r.pipe)(t,(0,e.bimap)(n,o))}},e.Functor={URI:e.URI,map:function(t,n){return(0,r.pipe)(t,(0,e.map)(n))}},e.flap=(0,o.flap)(e.Functor),e.left=function(t){return t.left},e.right=function(t){return t.right}},7341:function(t,e,n){var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.wiltDefault=function(t,e){return function(n){var r=t.traverse(n);return function(t,o){return n.map(r(t,o),e.separate)}}},e.witherDefault=function(t,e){return function(n){var r=t.traverse(n);return function(t,o){return n.map(r(t,o),e.compact)}}},e.filterE=function(t){return function(e){var n=t.wither(e);return function(t){return function(r){return n(r,function(n){return e.map(t(n),function(t){return t?a.some(n):a.none})})}}}};var a=i(n(3469))},1049:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.guard=function(t,e){return function(n){return n?e.of(void 0):t.zero()}}},3644:function(t,e){var n=this&&this.__spreadArray||function(t,e,n){if(n||2==arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};function r(t){return t}function o(t){return function(){return t}}function i(t,e,n,r,o,i,a,u,s){switch(arguments.length){case 1:return t;case 2:return function(){return e(t.apply(this,arguments))};case 3:return function(){return n(e(t.apply(this,arguments)))};case 4:return function(){return r(n(e(t.apply(this,arguments))))};case 5:return function(){return o(r(n(e(t.apply(this,arguments)))))};case 6:return function(){return i(o(r(n(e(t.apply(this,arguments))))))};case 7:return function(){return a(i(o(r(n(e(t.apply(this,arguments)))))))};case 8:return function(){return u(a(i(o(r(n(e(t.apply(this,arguments))))))))};case 9:return function(){return s(u(a(i(o(r(n(e(t.apply(this,arguments)))))))))}}}function a(t){throw Error("Called `absurd` function which should be uncallable")}Object.defineProperty(e,"__esModule",{value:!0}),e.dual=e.getEndomorphismMonoid=e.SK=e.hole=e.constVoid=e.constUndefined=e.constNull=e.constFalse=e.constTrue=e.unsafeCoerce=e.apply=e.getRing=e.getSemiring=e.getMonoid=e.getSemigroup=e.getBooleanAlgebra=void 0,e.identity=r,e.constant=o,e.flip=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.length>1?t(e[1],e[0]):function(n){return t(n)(e[0])}}},e.flow=i,e.tuple=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t},e.increment=function(t){return t+1},e.decrement=function(t){return t-1},e.absurd=a,e.tupled=function(t){return function(e){return t.apply(void 0,e)}},e.untupled=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t(e)}},e.pipe=function(t,e,n,r,o,i,a,u,s){switch(arguments.length){case 1:return t;case 2:return e(t);case 3:return n(e(t));case 4:return r(n(e(t)));case 5:return o(r(n(e(t))));case 6:return i(o(r(n(e(t)))));case 7:return a(i(o(r(n(e(t))))));case 8:return u(a(i(o(r(n(e(t)))))));case 9:return s(u(a(i(o(r(n(e(t))))))));default:for(var c=arguments[0],l=1;l<arguments.length;l++)c=arguments[l](c);return c}},e.not=function(t){return function(e){return!t(e)}},e.getBooleanAlgebra=function(t){return function(){return{meet:function(e,n){return function(r){return t.meet(e(r),n(r))}},join:function(e,n){return function(r){return t.join(e(r),n(r))}},zero:function(){return t.zero},one:function(){return t.one},implies:function(e,n){return function(r){return t.implies(e(r),n(r))}},not:function(e){return function(n){return t.not(e(n))}}}}},e.getSemigroup=function(t){return function(){return{concat:function(e,n){return function(r){return t.concat(e(r),n(r))}}}}},e.getMonoid=function(t){var n=(0,e.getSemigroup)(t);return function(){return{concat:n().concat,empty:function(){return t.empty}}}},e.getSemiring=function(t){return{add:function(e,n){return function(r){return t.add(e(r),n(r))}},zero:function(){return t.zero},mul:function(e,n){return function(r){return t.mul(e(r),n(r))}},one:function(){return t.one}}},e.getRing=function(t){var n=(0,e.getSemiring)(t);return{add:n.add,mul:n.mul,one:n.one,zero:n.zero,sub:function(e,n){return function(r){return t.sub(e(r),n(r))}}}},e.apply=function(t){return function(e){return e(t)}},e.unsafeCoerce=r,e.constTrue=o(!0),e.constFalse=o(!1),e.constNull=o(null),e.constUndefined=o(void 0),e.constVoid=e.constUndefined,e.hole=a,e.SK=function(t,e){return e},e.getEndomorphismMonoid=function(){return{concat:function(t,e){return i(t,e)},empty:r}},e.dual=function(t,e){var r="number"==typeof t?function(e){return e.length>=t}:t;return function(){var t=Array.from(arguments);return r(arguments)?e.apply(this,t):function(r){return e.apply(void 0,n([r],t,!1))}}}},3469:function(t,e,n){var r=this&&this.__spreadArray||function(t,e,n){if(n||2==arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.flatMapReader=e.flatMapTask=e.flatMapIO=e.flatMapEither=e.flatMapOption=e.flatMapNullable=e.liftOption=e.liftNullable=e.fromReadonlyNonEmptyArray=e.has=e.emptyRecord=e.emptyReadonlyArray=e.tail=e.head=e.isNonEmpty=e.singleton=e.right=e.left=e.isRight=e.isLeft=e.some=e.none=e.isSome=e.isNone=void 0;var o=n(3644);e.isNone=function(t){return"None"===t._tag},e.isSome=function(t){return"Some"===t._tag},e.none={_tag:"None"},e.some=function(t){return{_tag:"Some",value:t}},e.isLeft=function(t){return"Left"===t._tag},e.isRight=function(t){return"Right"===t._tag},e.left=function(t){return{_tag:"Left",left:t}},e.right=function(t){return{_tag:"Right",right:t}},e.singleton=function(t){return[t]},e.isNonEmpty=function(t){return t.length>0},e.head=function(t){return t[0]},e.tail=function(t){return t.slice(1)},e.emptyReadonlyArray=[],e.emptyRecord={},e.has=Object.prototype.hasOwnProperty,e.fromReadonlyNonEmptyArray=function(t){return r([t[0]],t.slice(1),!0)},e.liftNullable=function(t){return function(n,r){return function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var a=n.apply(void 0,o);return t.fromEither(null==a?(0,e.left)(r.apply(void 0,o)):(0,e.right)(a))}}},e.liftOption=function(t){return function(n,r){return function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var a=n.apply(void 0,o);return t.fromEither((0,e.isNone)(a)?(0,e.left)(r.apply(void 0,o)):(0,e.right)(a.value))}}},e.flatMapNullable=function(t,n){return(0,o.dual)(3,function(r,o,i){return n.flatMap(r,(0,e.liftNullable)(t)(o,i))})},e.flatMapOption=function(t,n){return(0,o.dual)(3,function(r,o,i){return n.flatMap(r,(0,e.liftOption)(t)(o,i))})},e.flatMapEither=function(t,e){return(0,o.dual)(2,function(n,r){return e.flatMap(n,function(e){return t.fromEither(r(e))})})},e.flatMapIO=function(t,e){return(0,o.dual)(2,function(n,r){return e.flatMap(n,function(e){return t.fromIO(r(e))})})},e.flatMapTask=function(t,e){return(0,o.dual)(2,function(n,r){return e.flatMap(n,function(e){return t.fromTask(r(e))})})},e.flatMapReader=function(t,e){return(0,o.dual)(2,function(n,r){return e.flatMap(n,function(e){return t.fromReader(r(e))})})}},3078:function(t,e,n){var r=n(4249),o="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},i=r.useState,a=r.useEffect,u=r.useLayoutEffect,s=r.useDebugValue;function c(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!o(t,n)}catch(t){return!0}}var l="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(t,e){return e()}:function(t,e){var n=e(),r=i({inst:{value:n,getSnapshot:e}}),o=r[0].inst,l=r[1];return u(function(){o.value=n,o.getSnapshot=e,c(o)&&l({inst:o})},[t,n,e]),a(function(){return c(o)&&l({inst:o}),t(function(){c(o)&&l({inst:o})})},[t]),s(n),n};e.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},6140:function(t,e,n){var r=n(4249),o=n(807),i="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},a=o.useSyncExternalStore,u=r.useRef,s=r.useEffect,c=r.useMemo,l=r.useDebugValue;e.useSyncExternalStoreWithSelector=function(t,e,n,r,o){var f=u(null);if(null===f.current){var d={hasValue:!1,value:null};f.current=d}else d=f.current;var p=a(t,(f=c(function(){function t(t){if(!s){if(s=!0,a=t,t=r(t),void 0!==o&&d.hasValue){var e=d.value;if(o(e,t))return u=e}return u=t}if(e=u,i(a,t))return e;var n=r(t);return void 0!==o&&o(e,n)?(a=t,e):(a=t,u=n)}var a,u,s=!1,c=void 0===n?null:n;return[function(){return t(e())},null===c?void 0:function(){return t(c())}]},[e,n,r,o]))[0],f[1]);return s(function(){d.hasValue=!0,d.value=p},[p]),l(p),p}},807:function(t,e,n){t.exports=n(3078)},6452:function(t,e,n){t.exports=n(6140)},6011:function(t,e,n){n.d(e,{p4:()=>s});var r,o=n(2662);let i="xstate.promise.resolve",a="xstate.promise.reject",u=new WeakMap;function s(t){return{config:t,transition:(t,e,n)=>{if("active"!==t.status)return t;switch(e.type){case i:{let n=e.data;return{...t,status:"done",output:n,input:void 0}}case a:return{...t,status:"error",error:e.data,input:void 0};case o.X:return u.get(n.self)?.abort(),{...t,status:"stopped",input:void 0};default:return t}},start:(e,{self:n,system:r,emit:o})=>{if("active"!==e.status)return;let s=new AbortController;u.set(n,s),Promise.resolve(t({input:e.input,system:r,self:n,signal:s.signal,emit:o})).then(t=>{"active"===n.getSnapshot().status&&(u.delete(n),r._relay(n,n,{type:i,data:t}))},t=>{"active"===n.getSnapshot().status&&(u.delete(n),r._relay(n,n,{type:a,data:t}))})},getInitialSnapshot:(t,e)=>({status:"active",output:void 0,error:void 0,input:e}),getPersistedSnapshot:t=>t,restoreSnapshot:t=>t}}r=void 0,t=>t},5582:function(t,e,n){n.d(e,{a:()=>g,e:()=>s});var r,o=n(2662),i=n(64);function a(t,e,n,r,{event:o}){return[e,{event:"function"==typeof o?o(n,r):o},void 0]}function u(t,{event:e}){t.defer(()=>t.emit(e))}function s(t){function e(t,e){}return e.type="xstate.emit",e.event=t,e.resolve=a,e.execute=u,e}let c=((r={}).Parent="#_parent",r.Internal="#_internal",r);function l(t,e,n,r,{to:o,event:i,id:a,delay:u},s){let l,f,d=e.machine.implementations.delays;if("string"==typeof i)throw Error(`Only event objects may be used with sendTo; use sendTo({ type: "${i}" }) instead`);let p="function"==typeof i?i(n,r):i;if("string"==typeof u){let t=d&&d[u];l="function"==typeof t?t(n,r):t}else l="function"==typeof u?u(n,r):u;let h="function"==typeof o?o(n,r):o;if("string"==typeof h){if(!(f=h===c.Parent?t.self._parent:h===c.Internal?t.self:h.startsWith("#_")?e.children[h.slice(2)]:s.deferredActorIds?.includes(h)?h:e.children[h]))throw Error(`Unable to send event to actor '${h}' from machine '${e.machine.id}'.`)}else f=h||t.self;return[e,{to:f,targetId:"string"==typeof h?h:void 0,event:p,id:a,delay:l},void 0]}function f(t,e,n){"string"==typeof n.to&&(n.to=e.children[n.to])}function d(t,e){t.defer(()=>{let{to:n,event:r,delay:i,id:a}=e;if("number"==typeof i)return void t.system.scheduler.schedule(t.self,n,r,i,a);t.system._relay(t.self,n,r.type===o.T?(0,o.U)(t.self.id,r.data):r)})}function p(t,e,n){function r(t,e){}return r.type="xstate.sendTo",r.to=t,r.event=e,r.id=n?.id,r.delay=n?.delay,r.resolve=l,r.retryResolve=f,r.execute=d,r}function h(t,e,n,r,{collect:a}){let u=[],l=function(t){u.push(t)};return l.assign=(...t)=>{u.push((0,i.a)(...t))},l.cancel=(...t)=>{u.push((0,o.f)(...t))},l.raise=(...t)=>{u.push((0,o.r)(...t))},l.sendTo=(...t)=>{u.push(p(...t))},l.sendParent=(...t)=>{u.push(function(t,e){return p(c.Parent,t,e)}(...t))},l.spawnChild=(...t)=>{u.push((0,o.h)(...t))},l.stopChild=(...t)=>{u.push((0,o.k)(...t))},l.emit=(...t)=>{u.push(s(...t))},a({context:n.context,event:n.event,enqueue:l,check:t=>(0,o.w)(t,e.context,n.event,e),self:t.self,system:t.system},r),[e,void 0,u]}function g(t){function e(t,e){}return e.type="xstate.enqueueActions",e.collect=t,e.resolve=h,e}},2662:function(t,e,n){n.d(e,{$:()=>T,B:()=>tr,C:()=>tj,D:()=>J,E:()=>tN,F:()=>te,G:()=>tE,H:()=>function t(e,n,r,o){if("string"==typeof n){let t=td(e,n).next(r,o);return t&&t.length?t:e.next(r,o)}if(1===Object.keys(n).length){let i=Object.keys(n),a=t(td(e,i[0]),n[i[0]],r,o);return a&&a.length?a:e.next(r,o)}let i=[];for(let a of Object.keys(n)){let u=n[a];if(!u)continue;let s=t(td(e,a),u,r,o);s&&i.push(...s)}return i.length?i:e.next(r,o)},I:()=>tM,J:()=>p,K:()=>tS,L:()=>tf,M:()=>m,N:()=>u,O:()=>tn,P:()=>tp,Q:()=>tk,R:()=>O,S:()=>a,T:()=>c,U:()=>d,V:()=>A,W:()=>tC,X:()=>l,a:()=>H,c:()=>C,f:()=>$,g:()=>th,h:()=>W,k:()=>F,l:()=>v,n:()=>Y,q:()=>ta,r:()=>tz,t:()=>x,u:()=>_,v:()=>ti,w:()=>B,x:()=>w,y:()=>to,z:()=>tu});var r,o=n(1857);class i{constructor(t){this._process=t,this._active=!1,this._current=null,this._last=null}start(){this._active=!0,this.flush()}clear(){this._current&&(this._current.next=null,this._last=this._current)}enqueue(t){let e={value:t,next:null};if(this._current){this._last.next=e,this._last=e;return}this._current=e,this._last=e,this._active&&this.flush()}flush(){for(;this._current;){let t=this._current;this._process(t.value),this._current=t.next}this._last=null}}let a=".",u="",s="xstate.init",c="xstate.error",l="xstate.stop";function f(t,e){return{type:`xstate.done.state.${t}`,output:e}}function d(t,e){return{type:`xstate.error.actor.${t}`,error:e,actorId:t}}function p(t){return{type:s,input:t}}function h(t){setTimeout(()=>{throw t})}let g="function"==typeof Symbol&&Symbol.observable||"@@observable";function m(t){if(b(t))return t;let e=[],n="";for(let r=0;r<t.length;r++){switch(t.charCodeAt(r)){case 92:n+=t[r+1],r++;continue;case 46:e.push(n),n="";continue}n+=t[r]}return e.push(n),e}function y(t){var e;return(e=t)&&"object"==typeof e&&"machine"in e&&"value"in e?t.value:"string"!=typeof t?t:function(t){if(1===t.length)return t[0];let e={},n=e;for(let e=0;e<t.length-1;e++)if(e===t.length-2)n[t[e]]=t[e+1];else{let r=n;n={},r[t[e]]=n}return e}(m(t))}function v(t,e){let n={},r=Object.keys(t);for(let o=0;o<r.length;o++){let i=r[o];n[i]=e(t[i],i,t,o)}return n}function x(t){var e;return void 0===t?[]:b(e=t)?e:[e]}function S(t,e,n,r){return"function"==typeof t?t({context:e,event:n,self:r}):t}function b(t){return Array.isArray(t)}function _(t){var e;return(b(e=t)?e:[e]).map(t=>void 0===t||"string"==typeof t?{target:t}:t)}function M(t){if(void 0!==t&&""!==t)return x(t)}function E(t,e,n){let r="object"==typeof t,o=r?t:void 0;return{next:(r?t.next:t)?.bind(o),error:(r?t.error:e)?.bind(o),complete:(r?t.complete:n)?.bind(o)}}function w(t,e){return`${e}.${t}`}function O(t,e){let n=e.match(/^xstate\.invoke\.(\d+)\.(.*)/);if(!n)return t.implementations.actors[e];let[,r,o]=n,i=t.getStateNodeById(o).config.invoke;return(Array.isArray(i)?i[r]:i).src}function j(t,e){return`${t.sessionId}.${e}`}let R=0,I=!1,T=1,A=((r={})[r.NotStarted=0]="NotStarted",r[r.Running=1]="Running",r[r.Stopped=2]="Stopped",r),D={clock:{setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t)},logger:console.log.bind(console),devTools:!1};class N{constructor(t,e){this.logic=t,this._snapshot=void 0,this.clock=void 0,this.options=void 0,this.id=void 0,this.mailbox=new i(this._process.bind(this)),this.observers=new Set,this.eventListeners=new Map,this.logger=void 0,this._processingStatus=A.NotStarted,this._parent=void 0,this._syncSnapshot=void 0,this.ref=void 0,this._actorScope=void 0,this._systemId=void 0,this.sessionId=void 0,this.system=void 0,this._doneEvent=void 0,this.src=void 0,this._deferred=[];let n={...D,...e},{clock:r,logger:o,parent:a,syncSnapshot:u,id:s,systemId:c,inspect:l}=n;this.system=a?a.system:function(t,e){let n=new Map,r=new Map,o=new WeakMap,i=new Set,a={},{clock:u,logger:s}=e,c={schedule:(t,e,n,r,o=Math.random().toString(36).slice(2))=>{let i={source:t,target:e,event:n,delay:r,id:o,startedAt:Date.now()},s=j(t,o);l._snapshot._scheduledEvents[s]=i;let c=u.setTimeout(()=>{delete a[s],delete l._snapshot._scheduledEvents[s],l._relay(t,e,n)},r);a[s]=c},cancel:(t,e)=>{let n=j(t,e),r=a[n];delete a[n],delete l._snapshot._scheduledEvents[n],void 0!==r&&u.clearTimeout(r)},cancelAll:t=>{for(let e in l._snapshot._scheduledEvents){let n=l._snapshot._scheduledEvents[e];n.source===t&&c.cancel(t,n.id)}}},l={_snapshot:{_scheduledEvents:(e?.snapshot&&e.snapshot.scheduler)??{}},_bookId:()=>`x:${R++}`,_register:(t,e)=>(n.set(t,e),t),_unregister:t=>{n.delete(t.sessionId);let e=o.get(t);void 0!==e&&(r.delete(e),o.delete(t))},get:t=>r.get(t),_set:(t,e)=>{let n=r.get(t);if(n&&n!==e)throw Error(`Actor with system ID '${t}' already exists.`);r.set(t,e),o.set(e,t)},inspect:t=>{let e=E(t);return i.add(e),{unsubscribe(){i.delete(e)}}},_sendInspectionEvent:e=>{if(!i.size)return;let n={...e,rootId:t.sessionId};i.forEach(t=>t.next?.(n))},_relay:(t,e,n)=>{l._sendInspectionEvent({type:"@xstate.event",sourceRef:t,actorRef:e,event:n}),e._send(n)},scheduler:c,getSnapshot:()=>({_scheduledEvents:{...l._snapshot._scheduledEvents}}),start:()=>{let t=l._snapshot._scheduledEvents;for(let e in l._snapshot._scheduledEvents={},t){let{source:n,target:r,event:o,delay:i,id:a}=t[e];c.schedule(n,r,o,i,a)}},_clock:u,_logger:s};return l}(this,{clock:r,logger:o}),l&&!a&&this.system.inspect(E(l)),this.sessionId=this.system._bookId(),this.id=s??this.sessionId,this.logger=e?.logger??this.system._logger,this.clock=e?.clock??this.system._clock,this._parent=a,this._syncSnapshot=u,this.options=n,this.src=n.src??t,this.ref=this,this._actorScope={self:this,id:this.id,sessionId:this.sessionId,logger:this.logger,defer:t=>{this._deferred.push(t)},system:this.system,stopChild:t=>{if(t._parent!==this)throw Error(`Cannot stop child actor ${t.id} of ${this.id} because it is not a child`);t._stop()},emit:t=>{let e=this.eventListeners.get(t.type),n=this.eventListeners.get("*");if(e||n)for(let r of[...e?e.values():[],...n?n.values():[]])try{r(t)}catch(t){h(t)}},actionExecutor:t=>{let e=()=>{if(this._actorScope.system._sendInspectionEvent({type:"@xstate.action",actorRef:this,action:{type:t.type,params:t.params}}),!t.exec)return;let e=I;try{I=!0,t.exec(t.info,t.params)}finally{I=e}};this._processingStatus===A.Running?e():this._deferred.push(e)}},this.send=this.send.bind(this),this.system._sendInspectionEvent({type:"@xstate.actor",actorRef:this}),c&&(this._systemId=c,this.system._set(c,this)),this._initState(e?.snapshot??e?.state),c&&"active"!==this._snapshot.status&&this.system._unregister(this)}_initState(t){try{this._snapshot=t?this.logic.restoreSnapshot?this.logic.restoreSnapshot(t,this._actorScope):t:this.logic.getInitialSnapshot(this._actorScope,this.options?.input)}catch(t){this._snapshot={status:"error",output:void 0,error:t}}}update(t,e){let n;for(this._snapshot=t;n=this._deferred.shift();)try{n()}catch(e){this._deferred.length=0,this._snapshot={...t,status:"error",error:e}}switch(this._snapshot.status){case"active":for(let e of this.observers)try{e.next?.(t)}catch(t){h(t)}break;case"done":var r;for(let e of this.observers)try{e.next?.(t)}catch(t){h(t)}this._stopProcedure(),this._complete(),this._doneEvent=(r=this.id,{type:`xstate.done.actor.${r}`,output:this._snapshot.output,actorId:r}),this._parent&&this.system._relay(this,this._parent,this._doneEvent);break;case"error":this._error(this._snapshot.error)}this.system._sendInspectionEvent({type:"@xstate.snapshot",actorRef:this,event:e,snapshot:t})}subscribe(t,e,n){let r=E(t,e,n);if(this._processingStatus!==A.Stopped)this.observers.add(r);else switch(this._snapshot.status){case"done":try{r.complete?.()}catch(t){h(t)}break;case"error":{let t=this._snapshot.error;if(r.error)try{r.error(t)}catch(t){h(t)}else h(t)}}return{unsubscribe:()=>{this.observers.delete(r)}}}on(t,e){let n=this.eventListeners.get(t);n||(n=new Set,this.eventListeners.set(t,n));let r=e.bind(void 0);return n.add(r),{unsubscribe:()=>{n.delete(r)}}}start(){if(this._processingStatus===A.Running)return this;this._syncSnapshot&&this.subscribe({next:t=>{"active"===t.status&&this.system._relay(this,this._parent,{type:`xstate.snapshot.${this.id}`,snapshot:t})},error:()=>{}}),this.system._register(this.sessionId,this),this._systemId&&this.system._set(this._systemId,this),this._processingStatus=A.Running;let t=p(this.options.input);switch(this.system._sendInspectionEvent({type:"@xstate.event",sourceRef:this._parent,actorRef:this,event:t}),this._snapshot.status){case"done":return this.update(this._snapshot,t),this;case"error":return this._error(this._snapshot.error),this}if(this._parent||this.system.start(),this.logic.start)try{this.logic.start(this._snapshot,this._actorScope)}catch(t){return this._snapshot={...this._snapshot,status:"error",error:t},this._error(t),this}return this.update(this._snapshot,t),this.options.devTools&&this.attachDevTools(),this.mailbox.start(),this}_process(t){let e,n;try{e=this.logic.transition(this._snapshot,t,this._actorScope)}catch(t){n={err:t}}if(n){let{err:t}=n;this._snapshot={...this._snapshot,status:"error",error:t},this._error(t);return}this.update(e,t),t.type===l&&(this._stopProcedure(),this._complete())}_stop(){return this._processingStatus===A.Stopped||((this.mailbox.clear(),this._processingStatus===A.NotStarted)?this._processingStatus=A.Stopped:this.mailbox.enqueue({type:l})),this}stop(){if(this._parent)throw Error("A non-root actor cannot be stopped directly.");return this._stop()}_complete(){for(let t of this.observers)try{t.complete?.()}catch(t){h(t)}this.observers.clear()}_reportError(t){if(!this.observers.size){this._parent||h(t);return}let e=!1;for(let n of this.observers){let r=n.error;e||=!r;try{r?.(t)}catch(t){h(t)}}this.observers.clear(),e&&h(t)}_error(t){this._stopProcedure(),this._reportError(t),this._parent&&this.system._relay(this,this._parent,d(this.id,t))}_stopProcedure(){return this._processingStatus!==A.Running||(this.system.scheduler.cancelAll(this),this.mailbox.clear(),this.mailbox=new i(this._process.bind(this)),this._processingStatus=A.Stopped,this.system._unregister(this)),this}_send(t){this._processingStatus!==A.Stopped&&this.mailbox.enqueue(t)}send(t){this.system._relay(void 0,this,t)}attachDevTools(){let{devTools:t}=this.options;t&&("function"==typeof t?t:o.tm)(this)}toJSON(){return{xstate$$type:T,id:this.id}}getPersistedSnapshot(t){return this.logic.getPersistedSnapshot(this._snapshot,t)}[g](){return this}getSnapshot(){return this._snapshot}}function C(t,...[e]){return new N(t,e)}function k(t,e,n,r,{sendId:o}){return[e,{sendId:"function"==typeof o?o(n,r):o},void 0]}function L(t,e){t.defer(()=>{t.system.scheduler.cancel(t.self,e.sendId)})}function $(t){function e(t,e){}return e.type="xstate.cancel",e.sendId=t,e.resolve=k,e.execute=L,e}function z(t,e,n,r,{id:o,systemId:i,src:a,input:u,syncSnapshot:s}){let c,l,f="string"==typeof a?O(e.machine,a):a,d="function"==typeof o?o(n):o;return f&&(l="function"==typeof u?u({context:e.context,event:n.event,self:t.self}):u,c=C(f,{id:d,src:a,parent:t.self,syncSnapshot:s,systemId:i,input:l})),[tC(e,{children:{...e.children,[d]:c}}),{id:o,systemId:i,actorRef:c,src:a,input:l},void 0]}function U(t,{actorRef:e}){e&&t.defer(()=>{e._processingStatus!==A.Stopped&&e.start()})}function W(...[t,{id:e,systemId:n,input:r,syncSnapshot:o=!1}={}]){function i(t,e){}return i.type="xstate.spawnChild",i.id=e,i.systemId=n,i.src=t,i.input=r,i.syncSnapshot=o,i.resolve=z,i.execute=U,i}function P(t,e,n,r,{actorRef:o}){let i="function"==typeof o?o(n,r):o,a="string"==typeof i?e.children[i]:i,u=e.children;return a&&(u={...u},delete u[a.id]),[tC(e,{children:u}),a,void 0]}function q(t,e){if(e){if(t.system._unregister(e),e._processingStatus!==A.Running)return void t.stopChild(e);t.defer(()=>{t.stopChild(e)})}}function F(t){function e(t,e){}return e.type="xstate.stopChild",e.actorRef=t,e.resolve=P,e.execute=q,e}function Z(t,{context:e,event:n},{guards:r}){return!B(r[0],e,n,t)}function Y(t){function e(t,e){return!1}return e.check=Z,e.guards=[t],e}function G(t,{context:e,event:n},{guards:r}){return r.every(r=>B(r,e,n,t))}function H(t){function e(t,e){return!1}return e.check=G,e.guards=t,e}function B(t,e,n,r){let{machine:o}=r,i="function"==typeof t,a=i?t:o.implementations.guards["string"==typeof t?t:t.type];if(!i&&!a)throw Error(`Guard '${"string"==typeof t?t:t.type}' is not implemented.'.`);if("function"!=typeof a)return B(a,e,n,r);let u={context:e,event:n},s=i||"string"==typeof t?void 0:"params"in t?"function"==typeof t.params?t.params({context:e,event:n}):t.params:void 0;return"check"in a?a.check(r,u,a):a(u,s)}let K=t=>"atomic"===t.type||"final"===t.type;function X(t){return Object.values(t.states).filter(t=>"history"!==t.type)}function V(t,e){let n=[];if(e===t)return n;let r=t.parent;for(;r&&r!==e;)n.push(r),r=r.parent;return n}function J(t){let e=new Set(t),n=Q(e);for(let t of e)if("compound"!==t.type||n.get(t)&&n.get(t).length){if("parallel"===t.type){for(let n of X(t))if("history"!==n.type&&!e.has(n))for(let t of tl(n))e.add(t)}}else tl(t).forEach(t=>e.add(t));for(let t of e){let n=t.parent;for(;n;)e.add(n),n=n.parent}return e}function Q(t){let e=new Map;for(let n of t)e.has(n)||e.set(n,[]),n.parent&&(e.has(n.parent)||e.set(n.parent,[]),e.get(n.parent).push(n));return e}function tt(t,e){return function t(e,n){let r=n.get(e);if(!r)return{};if("compound"===e.type){let t=r[0];if(!t)return{};if(K(t))return t.key}let o={};for(let e of r)o[e.key]=t(e,n);return o}(t,Q(J(e)))}function te(t,e){return"compound"===e.type?X(e).some(e=>"final"===e.type&&t.has(e)):"parallel"===e.type?X(e).every(e=>te(t,e)):"final"===e.type}let tn=t=>"#"===t[0];function tr(t,e){return t.transitions.get(e)||[...t.transitions.keys()].filter(t=>{if("*"===t)return!0;if(!t.endsWith(".*"))return!1;let n=t.split("."),r=e.split(".");for(let t=0;t<n.length;t++){let e=n[t],o=r[t];if("*"===e)return t===n.length-1;if(e!==o)return!1}return!0}).sort((t,e)=>e.length-t.length).flatMap(e=>t.transitions.get(e))}function to(t){let e=t.config.after;return e?Object.keys(e).flatMap(n=>{let r=e[n],o=Number.isNaN(+n)?n:+n,i=(e=>{var n;let r=(n=t.id,{type:`xstate.after.${e}.${n}`}),o=r.type;return t.entry.push(tz(r,{id:o,delay:e})),t.exit.push($(o)),o})(o);return x("string"==typeof r?{target:r}:r).map(t=>({...t,event:i,delay:o}))}).map(e=>{let{delay:n}=e;return{...ti(t,e.event,e),delay:n}}):[]}function ti(t,e,n){let r=M(n.target),o=n.reenter??!1,i=function(t,e){if(void 0!==e)return e.map(e=>{if("string"!=typeof e)return e;if(tn(e))return t.machine.getStateNodeById(e);let n=e[0]===a;if(n&&!t.parent)return tp(t,e.slice(1));let r=n?t.key+e:e;if(t.parent)try{return tp(t.parent,r)}catch(e){throw Error(`Invalid transition definition for state node '${t.id}':
${e.message}`)}throw Error(`Invalid target: "${e}" is not a valid target from the root node. Did you mean ".${e}"?`)})}(t,r),u={...n,actions:x(n.actions),guard:n.guard,target:i,source:t,reenter:o,eventType:e,toJSON:()=>({...u,source:`#${t.id}`,target:i?i.map(t=>`#${t.id}`):void 0})};return u}function ta(t){let e=new Map;if(t.config.on)for(let n of Object.keys(t.config.on)){if(n===u)throw Error('Null events ("") cannot be specified as a transition key. Use `always: { ... }` instead.');let r=t.config.on[n];e.set(n,_(r).map(e=>ti(t,n,e)))}if(t.config.onDone){let n=`xstate.done.state.${t.id}`;e.set(n,_(t.config.onDone).map(e=>ti(t,n,e)))}for(let n of t.invoke){if(n.onDone){let r=`xstate.done.actor.${n.id}`;e.set(r,_(n.onDone).map(e=>ti(t,r,e)))}if(n.onError){let r=`xstate.error.actor.${n.id}`;e.set(r,_(n.onError).map(e=>ti(t,r,e)))}if(n.onSnapshot){let r=`xstate.snapshot.${n.id}`;e.set(r,_(n.onSnapshot).map(e=>ti(t,r,e)))}}for(let n of t.after){let t=e.get(n.eventType);t||(t=[],e.set(n.eventType,t)),t.push(n)}return e}function tu(t,e){let n="string"==typeof e?t.states[e]:e?t.states[e.target]:void 0;if(!n&&e)throw Error(`Initial state node "${e}" not found on parent state node #${t.id}`);let r={source:t,actions:e&&"string"!=typeof e?x(e.actions):[],eventType:null,reenter:!1,target:n?[n]:[],toJSON:()=>({...r,source:`#${t.id}`,target:n?[`#${n.id}`]:[]})};return r}function ts(t){let e=M(t.config.target);return e?{target:e.map(e=>"string"==typeof e?tp(t.parent,e):e)}:t.parent.initial}function tc(t){return"history"===t.type}function tl(t){let e=tf(t);for(let n of e)for(let r of V(n,t))e.add(r);return e}function tf(t){let e=new Set;return!function t(n){if(!e.has(n)){if(e.add(n),"compound"===n.type)t(n.initial.target[0]);else if("parallel"===n.type)for(let e of X(n))t(e)}}(t),e}function td(t,e){if(tn(e))return t.machine.getStateNodeById(e);if(!t.states)throw Error(`Unable to retrieve child state '${e}' from '${t.id}'; no child states exist.`);let n=t.states[e];if(!n)throw Error(`Child state '${e}' does not exist on '${t.id}'`);return n}function tp(t,e){if("string"==typeof e&&tn(e))try{return t.machine.getStateNodeById(e)}catch{}let n=m(e).slice(),r=t;for(;n.length;){let t=n.shift();if(!t.length)break;r=td(r,t)}return r}function th(t,e){if("string"==typeof e){let n=t.states[e];if(!n)throw Error(`State '${e}' does not exist on '${t.id}'`);return[t,n]}let n=Object.keys(e),r=n.map(e=>td(t,e)).filter(Boolean);return[t.machine.root,t].concat(r,n.reduce((n,r)=>{let o=td(t,r);if(!o)return n;let i=th(o,e[r]);return n.concat(i)},[]))}function tg(t,e){let n=t;for(;n.parent&&n.parent!==e;)n=n.parent;return n.parent===e}function tm(t,e,n){let r=new Set;for(let o of t){let t=!1,i=new Set;for(let a of r)if(function(t,e){let n=new Set(t),r=new Set(e);for(let t of n)if(r.has(t))return!0;for(let t of r)if(n.has(t))return!0;return!1}(tx([o],e,n),tx([a],e,n)))if(tg(o.source,a.source))i.add(a);else{t=!0;break}if(!t){for(let t of i)r.delete(t);r.add(o)}}return Array.from(r)}function ty(t,e){if(!t.target)return[];let n=new Set;for(let r of t.target)if(tc(r))if(e[r.id])for(let t of e[r.id])n.add(t);else for(let t of ty(ts(r),e))n.add(t);else n.add(r);return[...n]}function tv(t,e){let n=ty(t,e);if(!n)return;if(!t.reenter&&n.every(e=>e===t.source||tg(e,t.source)))return t.source;let r=function(t){let[e,...n]=t;for(let t of V(e,void 0))if(n.every(e=>tg(e,t)))return t}(n.concat(t.source));return r||(t.reenter?void 0:t.source.machine.root)}function tx(t,e,n){let r=new Set;for(let o of t)if(o.target?.length){let t=tv(o,n);for(let n of(o.reenter&&o.source===t&&r.add(t),e))tg(n,t)&&r.add(n)}return[...r]}function tS(t,e,n,r,o,i){if(!t.length)return e;let a=new Set(e._nodes),u=e.historyValue,s=tm(t,a,u),c=e;o||([c,u]=function(t,e,n,r,o,i,a,u){let s,c=t,l=tx(r,o,i);for(let t of(l.sort((t,e)=>e.order-t.order),l))for(let e of function(t){return Object.keys(t.states).map(e=>t.states[e]).filter(t=>"history"===t.type)}(t)){let n;n="deep"===e.history?e=>K(e)&&tg(e,t):e=>e.parent===t,(s??={...i})[e.id]=Array.from(o).filter(n)}for(let t of l)c=tM(c,e,n,[...t.exit,...t.invoke.map(t=>F(t.id))],a,void 0),o.delete(t);return[c,s||i]}(c,r,n,s,a,u,i,n.actionExecutor)),c=function(t,e,n,r,o,i,a,u){let s=t,c=new Set,l=new Set;(function(t,e,n,r){for(let o of t){let t=tv(o,e);for(let i of o.target||[])!tc(i)&&(o.source!==i||o.source!==t||o.reenter)&&(r.add(i),n.add(i)),tb(i,e,n,r);for(let i of ty(o,e)){let a=V(i,t);t?.type==="parallel"&&a.push(t),t_(r,e,n,a,!o.source.parent&&o.reenter?void 0:t)}}})(r,a,l,c),u&&l.add(t.machine.root);let d=new Set;for(let t of[...c].sort((t,e)=>t.order-e.order)){o.add(t);let r=[];for(let e of(r.push(...t.entry),t.invoke))r.push(W(e.src,{...e,syncSnapshot:!!e.onSnapshot}));if(l.has(t)){let e=t.initial.actions;r.push(...e)}if(s=tM(s,e,n,r,i,t.invoke.map(t=>t.id)),"final"===t.type){let r=t.parent,a=r?.type==="parallel"?r:r?.parent,u=a||t;for(r?.type==="compound"&&i.push(f(r.id,void 0!==t.output?S(t.output,s.context,e,n.self):void 0));a?.type==="parallel"&&!d.has(a)&&te(o,a);)d.add(a),i.push(f(a.id)),u=a,a=a.parent;if(a)continue;s=tC(s,{status:"done",output:function(t,e,n,r,o){if(void 0===r.output)return;let i=f(o.id,void 0!==o.output&&o.parent?S(o.output,t.context,e,n.self):void 0);return S(r.output,t.context,i,n.self)}(s,e,n,s.machine.root,u)})}}return s}(c=tM(c,r,n,s.flatMap(t=>t.actions),i,void 0),r,n,s,a,i,u,o);let l=[...a];"done"===c.status&&(c=tM(c,r,n,l.sort((t,e)=>e.order-t.order).flatMap(t=>t.exit),i,void 0));try{if(u===e.historyValue&&function(t,e){if(t.length!==e.size)return!1;for(let n of t)if(!e.has(n))return!1;return!0}(e._nodes,a))return c;return tC(c,{_nodes:l,historyValue:u})}catch(t){throw t}}function tb(t,e,n,r){var o,i,a,u;if(tc(t))if(e[t.id]){let a=e[t.id];for(let t of a)r.add(t),tb(t,e,n,r);for(let u of a){o=u,i=t.parent,t_(r,e,n,V(o,i))}}else{let o=ts(t);for(let i of o.target)r.add(i),o===t.parent?.initial&&n.add(t.parent),tb(i,e,n,r);for(let i of o.target){a=i,u=t.parent,t_(r,e,n,V(a,u))}}else if("compound"===t.type){let[o]=t.initial.target;tc(o)||(r.add(o),n.add(o)),tb(o,e,n,r),t_(r,e,n,V(o,t))}else if("parallel"===t.type)for(let o of X(t).filter(t=>!tc(t)))[...r].some(t=>tg(t,o))||(tc(o)||(r.add(o),n.add(o)),tb(o,e,n,r))}function t_(t,e,n,r,o){for(let i of r)if((!o||tg(i,o))&&t.add(i),"parallel"===i.type)for(let r of X(i).filter(t=>!tc(t)))[...t].some(t=>tg(t,r))||(t.add(r),tb(r,e,n,t))}function tM(t,e,n,r,o,i){let a=i?[]:void 0,u=function t(e,n,r,o,i,a){let{machine:u}=e,s=e;for(let e of o){var c;let o="function"==typeof e,l=o?e:(c="string"==typeof e?e:e.type,u.implementations.actions[c]),f={context:s.context,event:n,self:r.self,system:r.system},d=o||"string"==typeof e?void 0:"params"in e?"function"==typeof e.params?e.params({context:s.context,event:n}):e.params:void 0;if(!l||!("resolve"in l)){r.actionExecutor({type:"string"==typeof e?e:"object"==typeof e?e.type:e.name||"(anonymous)",info:f,params:d,exec:l});continue}let[p,h,g]=l.resolve(r,s,f,d,l,i);s=p,"retryResolve"in l&&a?.push([l,h]),"execute"in l&&r.actionExecutor({type:l.type,info:f,params:h,exec:l.execute.bind(null,r,h)}),g&&(s=t(s,n,r,g,i,a))}return s}(t,e,n,r,{internalQueue:o,deferredActorIds:i},a);return a?.forEach(([t,e])=>{t.retryResolve(n,u,e)}),u}function tE(t,e,n,r){let o=t,i=[];function a(t,e,r){n.system._sendInspectionEvent({type:"@xstate.microstep",actorRef:n.self,event:e,snapshot:t,_transitions:r}),i.push(t)}if(e.type===l)return a(o=tC(tw(o,e,n),{status:"stopped"}),e,[]),{snapshot:o,microstates:i};let u=e;if(u.type!==s){let e=u,s=e.type.startsWith("xstate.error.actor"),c=tO(e,o);if(s&&!c.length)return a(o=tC(t,{status:"error",error:e.error}),e,[]),{snapshot:o,microstates:i};a(o=tS(c,t,n,u,!1,r),e,c)}let c=!0;for(;"active"===o.status;){let t=c?function(t,e){let n=new Set;for(let r of t._nodes.filter(K))e:for(let o of[r].concat(V(r,void 0)))if(o.always){for(let r of o.always)if(void 0===r.guard||B(r.guard,t.context,e,t)){n.add(r);break e}}return tm(Array.from(n),new Set(t._nodes),t.historyValue)}(o,u):[],e=t.length?o:void 0;if(!t.length){if(!r.length)break;t=tO(u=r.shift(),o)}c=(o=tS(t,o,n,u,!1,r))!==e,a(o,u,t)}return"active"!==o.status&&tw(o,u,n),{snapshot:o,microstates:i}}function tw(t,e,n){return tM(t,e,n,Object.values(t.children).map(t=>F(t)),[],void 0)}function tO(t,e){return e.machine.getTransitionData(e,t)}function tj(t,e){let n=J(th(t,e));return tt(t,[...n])}let tR=function(t){return function t(e,n){let r=y(e),o=y(n);return"string"==typeof o?"string"==typeof r&&o===r:"string"==typeof r?r in o:Object.keys(r).every(e=>e in o&&t(r[e],o[e]))}(t,this.value)},tI=function(t){return this.tags.has(t)},tT=function(t){let e=this.machine.getTransitionData(this,t);return!!e?.length&&e.some(t=>void 0!==t.target||t.actions.length)},tA=function(){let{_nodes:t,tags:e,machine:n,getMeta:r,toJSON:o,can:i,hasTag:a,matches:u,...s}=this;return{...s,tags:Array.from(e)}},tD=function(){return this._nodes.reduce((t,e)=>(void 0!==e.meta&&(t[e.id]=e.meta),t),{})};function tN(t,e){return{status:t.status,output:t.output,error:t.error,machine:e,context:t.context,_nodes:t._nodes,value:tt(e.root,t._nodes),tags:new Set(t._nodes.flatMap(t=>t.tags)),children:t.children,historyValue:t.historyValue||{},matches:tR,hasTag:tI,can:tT,getMeta:tD,toJSON:tA}}function tC(t,e={}){return tN({...t,...e},t.machine)}function tk(t,e){let{_nodes:n,tags:r,machine:o,children:i,context:a,can:u,hasTag:s,matches:c,getMeta:l,toJSON:f,...d}=t,p={};for(let t in i){let n=i[t];p[t]={snapshot:n.getPersistedSnapshot(e),src:n.src,systemId:n._systemId,syncSnapshot:n._syncSnapshot}}return{...d,context:function t(e){let n;for(let r in e){let o=e[r];if(o&&"object"==typeof o)if("sessionId"in o&&"send"in o&&"ref"in o)(n??=Array.isArray(e)?e.slice():{...e})[r]={xstate$$type:T,id:o.id};else{let i=t(o);i!==o&&((n??=Array.isArray(e)?e.slice():{...e})[r]=i)}}return n??e}(a),children:p,historyValue:function(t){if("object"!=typeof t||null===t)return{};let e={};for(let n in t){let r=t[n];Array.isArray(r)&&(e[n]=r.map(t=>({id:t.id})))}return e}(d.historyValue)}}function tL(t,e,n,r,{event:o,id:i,delay:a},{internalQueue:u}){let s,c=e.machine.implementations.delays;if("string"==typeof o)throw Error(`Only event objects may be used with raise; use raise({ type: "${o}" }) instead`);let l="function"==typeof o?o(n,r):o;if("string"==typeof a){let t=c&&c[a];s="function"==typeof t?t(n,r):t}else s="function"==typeof a?a(n,r):a;return"number"!=typeof s&&u.push(l),[e,{event:l,id:i,delay:s},void 0]}function t$(t,e){let{event:n,delay:r,id:o}=e;if("number"==typeof r)return void t.defer(()=>{let e=t.self;t.system.scheduler.schedule(e,e,n,r,o)})}function tz(t,e){function n(t,e){}return n.type="xstate.raise",n.event=t,n.id=e?.id,n.delay=e?.delay,n.resolve=tL,n.execute=t$,n}},7234:function(t,e,n){n.d(e,{W:()=>i});var r=n(8586);n(4249),n(4428),n(8542),n(1213);var o=n(2988);function i(){let t=(0,o.xX)(),e=(0,o.bM)(),n=(0,o.BO)(),i=t.fontSize*(.5+.5*Math.log2(Math.max(1,n)))*e,a=`
use,
.map-symbols,
.map-markers {
  --map-symbol-size: ${i/72};
}
`;return(0,r.jsx)(r.Fragment,{children:a})}},3675:function(t,e,n){n.d(e,{O:()=>i});var r=n(4249);let o={type:"",name:"",crs:{type:"",properties:{name:""}},features:[]},i={root:"root",map:"map",href:"map.svg",width:0,height:0,fontSize:16,origViewBox:{x:0,y:0,width:0,height:0},title:"svgmapviewer",subtitle:"svgmapviewer - An (opinionated) interactive offline SVG map viewer",copyright:"@ Daiji Maps",zoomFactor:3,isContainerRendered:()=>!0,isUiRendered:()=>!0,getMapLayers:()=>[],getMapObjects:()=>[],getMapSymbols:()=>[],getMapMarkers:()=>[],getMapNames:()=>[],searchEntries:[],renderInfo:function(t){return(0,r.createElement)("p",{},t.info.title)},mapSvgStyle:"",renderMap:function(){return(0,r.createElement)("div")},isMapRendered:()=>!0,mapData:{areas:o,internals:o,origin:o,measures:o,viewbox:o,points:o,lines:o,multilinestrings:o,multipolygons:o},mapMap:{pointMap:new Map,lineMap:new Map,multilinestringMap:new Map,multipolygonMap:new Map},mapCoord:{matrix:new DOMMatrixReadOnly}}},8542:function(t,e,n){n.d(e,{A7:()=>y,CB:()=>S,Dj:()=>u,E4:()=>o,F_:()=>U,G6:()=>s,GU:()=>f,Js:()=>d,Oc:()=>F,Rd:()=>h,U1:()=>w,XV:()=>v,XW:()=>c,aL:()=>z,aU:()=>Z,bQ:()=>l,bT:()=>N,cR:()=>O,df:()=>P,er:()=>j,hp:()=>b,iZ:()=>D,j7:()=>R,jg:()=>m,k3:()=>k,l4:()=>Y,lJ:()=>a,lw:()=>$,lz:()=>E,mI:()=>L,oC:()=>T,r6:()=>q,rA:()=>x,rH:()=>W,tZ:()=>_,u5:()=>p,uo:()=>I,vh:()=>C,wG:()=>A,zC:()=>M});let r=new Set,o=new Set,i=new Set,a=new Set,u=new Set,s=new Set,c=new Set,l=new Set,f=new Set,d=new Set,p=new Set,h=new Set,g=new Set,m=new Set,y=new Set,v=new Set,x=new Set,S=new Set,b=new Set,_=new Set,M=new Set,E=new Set,w=new Set,O=new Set,j=new Set,R=new Set,I=new Set;function T(t){r.forEach(e=>e(t))}function A(t){o.forEach(e=>e(t))}function D(t,e){i.forEach(n=>n({psvg:t,info:e}))}function N(t,e){a.forEach(n=>n({psvg:t,info:e}))}function C(t,e,n){u.forEach(r=>r(t,e,n))}function k(t,e,n){s.forEach(r=>r(t,e,n))}function L(t){c.forEach(e=>e(t))}function $(){f.forEach(t=>t())}function z(t,e){y.forEach(n=>n(t,e))}function U(t,e){v.forEach(n=>n(t,e))}function W(t,e,n){x.forEach(r=>r(t,e,n))}function P(t,e){S.forEach(n=>n(t,e))}function q(t){b.forEach(e=>e(t))}function F(t){_.forEach(e=>e(t))}function Z(t){p.forEach(e=>e(t))}function Y(){g.forEach(t=>t())}},360:function(t,e,n){n.d(e,{Ow:()=>r.O,mN:()=>l});var r=n(3675),o=n(8542),i=n(8586),a=n(4649),u=n(9701);let s={context:{ids:new Set}},c=(0,a.a)({context:function(){let t=function(t){if(!t)return;let e=JSON.parse(t);if("context"in e&&"ids"in e.context)return{...e,context:{...e.context,ids:new Set(e.context.ids)}}}(localStorage.getItem("svgmapviewer:likes"));return void 0===t?s:t}().context,on:{like:(t,e)=>({...t,ids:new Set(Array.from(t.ids.add(e.id)))}),unlike:(t,e)=>(t.ids.delete(e.id),{...t,ids:new Set(Array.from(t.ids))})}});function l(t){let{_id:e}=t;return(0,u.v9)(c,t=>t.context.ids).has(e)?(0,i.jsx)("span",{className:"like liked",onClick:()=>c.trigger.unlike({id:e}),children:"★"}):(0,i.jsx)("span",{className:"like not-liked",onClick:()=>c.trigger.like({id:e}),children:"☆"})}c.subscribe(function(t){localStorage.setItem("svgmapviewer:likes",JSON.stringify({...t,context:{...t.context,ids:Array.from(t.context.ids.keys())}}))}),n(4249);var f=n(9621),d=n(64),p=n(2662),h=n(1213);let g=(0,f.cY)({types:{context:{},events:{}}}).createMachine({id:"floors1",context:{fidx:0,prevFidx:null},initial:"Idle",states:{Idle:{on:{SELECT:[{guard:({event:t})=>t.force??!1,actions:(0,d.a)({fidx:({event:t})=>t.fidx})},{guard:({context:t,event:e})=>t.fidx!==e.fidx,actions:(0,d.a)({fidx:({event:t})=>t.fidx,prevFidx:({context:t})=>t.fidx}),target:"Animating"}]}},Animating:{on:{DONE:{actions:(0,d.a)({prevFidx:null}),target:"Idle"}}}}}),m=(0,p.c)(g);m.start(),o.u5.add(function(t){m.send({type:"SELECT",fidx:t})}),o.Rd.add(function(t){m.send({type:"DONE",fidx:t})});var y=n(2638);n(2955);let v=new Worker(new URL(n.p+n.u("547"),n.b),Object.assign({},{type:"module"},{type:void 0}));v.onmessage=t=>{let e=t.data;"INIT.DONE"===e.type||"SEARCH.DONE"===e.type&&function(t){let e=function(t,e,n){let r=Number(n.address),o=(0,y.Ls)(r,t);if(null===o)return null;let i=o.properties,a=e.flatMap(t=>t.filter(i)?[t.getInfo(i,n.address)]:[]);return 0===a.length?null:a[0]}(r.O.mapMap,r.O.searchEntries,t);if(null===e)return;let n=r.O.mapCoord.matrix.transformPoint(t.lonlat);(0,o.iZ)(n,e)}(e.res)},v.onerror=t=>{console.log("error",t)},v.onmessageerror=t=>{console.log("messageerror",t)},o.E4.add(function(t){let e=r.O.mapCoord.matrix.inverse().transformPoint(t);v.postMessage({type:"SEARCH",pgeo:e})});var x=n(5582);let S=(0,f.cY)({types:{},actions:{}}).createMachine({id:"search",context:{},initial:"Idle",states:{Idle:{on:{SEARCH:{actions:(0,x.e)(({event:t})=>t),target:"Searching"}}},Searching:{on:{"SEARCH.DONE":{actions:(0,x.e)(({event:t})=>t),target:"Done"},"SEARCH.CANCEL":{target:"Done"}}},Done:{always:"Idle"}}}),b=(0,p.c)(S);b.on("SEARCH",({psvg:t})=>(0,o.wG)(t)),b.on("SEARCH.DONE",({psvg:t,info:e})=>(0,o.bT)(t,e)),b.start();var _=n(8439);n(2247);var M=n(3030),E=n(1662);function w(t){return{open:t,animating:!1}}function O(t){return t.open||t.animating?null:{open:!0,animating:!0}}function j(t){return t.open&&t.animating?{open:!0,animating:!1}:null}function R(t){return!t.open||t.animating?null:{open:!1,animating:!0}}function I(t){return t.open||!t.animating?null:{open:!1,animating:!1}}let T={p:M.kh,psvg:M.kh,layout:E.MN,info:{title:""}};function A(t){return function(e,n){let r=e[n],o=t(r);return e[n]=null===o?r:o,e}}function D(t,e){return function({open:t,animating:e}){return t||e}(t[e])}let N=(0,f.cY)({types:{},guards:{isHeaderVisible:({context:{m:t}})=>D(t,"header"),isDetailVisible:({context:{m:t}})=>D(t,"detail"),animationEnded:({context:{animationEnded:t}})=>t.header&&t.detail},actions:{startCancel:(0,d.a)({canceling:()=>!0}),endCancel:(0,d.a)({canceling:()=>!1}),open:(0,d.a)({m:({context:{m:t}},{part:e})=>A(O)(t,e)}),close:(0,d.a)({m:({context:{m:t}},{part:e})=>A(R)(t,e)}),handle:(0,d.a)({m:({context:{m:t}},{part:e})=>A(t[e].open?j:I)(t,e)})}}).createMachine({type:"parallel",id:"ui",context:({input:t})=>({...t,all:{open:!1,animating:!1},canceling:!1,detail:T,m:{header:w(!0),detail:w(!1)},animationEnded:{header:!0,detail:!0}}),states:{Ui:{initial:"Idle",states:{Idle:{on:{FLOOR:{target:"Floor"},MENU:{target:"Menu"},DETAIL:{actions:(0,d.a)({detail:({event:{psvg:t,info:e,layout:n}})=>({psvg:t,p:(0,E.vT)(n).transformPoint(t),info:e,layout:n})}),target:"Detail"},HELP:{target:"Help"}}},Floor:{},Menu:{},Detail:{initial:"Waiting",onDone:"Idle",states:{Waiting:{on:{OPEN:[{guard:(0,p.n)("animationEnded")},{actions:(0,d.a)({all:{open:!0,animating:!0},animationEnded:{header:!1,detail:!1}}),target:"Opening"}],CANCEL:{target:"Closed"}}},Opening:{entry:[{type:"close",params:{part:"header"}},{type:"open",params:{part:"detail"}}],on:{DONE:[{guard:"isHeaderVisible"},{guard:(0,p.n)("isDetailVisible")},{actions:(0,d.a)({all:{open:!0,animating:!1}}),target:"Opened"}]}},Opened:{on:{CANCEL:[{guard:(0,p.n)("animationEnded")},{actions:(0,d.a)({all:{open:!1,animating:!0},animationEnded:{header:!1,detail:!1}}),target:"Closing"}]}},Closing:{entry:["startCancel",{type:"open",params:{part:"header"}},{type:"close",params:{part:"detail"}}],exit:"endCancel",on:{DONE:[{guard:(0,p.n)("isHeaderVisible")},{guard:"isDetailVisible"},{actions:(0,d.a)({all:{open:!1,animating:!1}}),target:"Closed"}]}},Closed:{entry:(0,x.e)({type:"CLOSE.DONE"}),type:"final"}}},Help:{}}},Handler:{on:{"HEADER.ANIMATION.END":{actions:[{type:"handle",params:{part:"header"}},(0,d.a)({animationEnded:({context:t})=>({...t.animationEnded,header:!0})}),(0,p.r)({type:"DONE"})]},"DETAIL.ANIMATION.END":{actions:[{type:"handle",params:{part:"detail"}},(0,d.a)({animationEnded:({context:t})=>({...t.animationEnded,detail:!0})}),(0,p.r)({type:"DONE"})]}}}}}),C=(0,p.c)(N);C.on("CLOSE.DONE",o.lw),C.start(),o.Dj.add(function(t,e,n){C.send({type:"DETAIL",psvg:t,info:e,layout:n})}),o.XW.add(function(t){C.send({type:t?"OPEN":"CANCEL"})}),o.bQ.add(function(){C.send({type:"CANCEL"})}),o.GU.add(function(){requestAnimationFrame(()=>(function(){let t=_.eM.get("detail");if(void 0===t)return;let e=t.querySelector(".detail");null!==e&&e.scroll(0,0)})())}),h.sF,h.lm,h.X2;var k=n(4449),L=n(8945),$=n(8113),z=n(4136);function U(t){return"=+iI".indexOf(t)>=0?1:"-_oO".indexOf(t)>=0?-1:0}var W=n(5707),P=n(6011);let q=(0,f.cY)({types:{},actions:{getScroll:(0,d.a)({scroll:()=>(0,W.O_)()}),syncScroll:(t,{pos:e})=>(0,W.Zt)(e)},actors:{syncScrollLogic:(0,P.p4)(async({input:t})=>{if(null===t)throw Error("input is null");if(!(0,W.Zt)(t))throw Error("syncScroll failed");return!0})}}).createMachine({id:"scroll",initial:"Idle",context:{dest:null,scroll:null},states:{Idle:{on:{SYNC:{actions:[{type:"syncScroll",params:({event:t})=>({pos:t.pos})}]},GET:{actions:["getScroll",(0,x.e)(({context:{scroll:t}})=>({type:"SCROLL.GET.DONE",scroll:t}))]},SYNCSYNC:{actions:(0,d.a)({dest:({event:t})=>t.pos}),target:"Syncing"}}},Syncing:{invoke:[{src:"syncScrollLogic",systemId:"syncscroll1",input:({context:t})=>t.dest,onDone:{actions:["getScroll",(0,x.e)(({context:{scroll:t}})=>({type:"SCROLL.SYNCSYNC.DONE",scroll:t})),(0,d.a)({dest:null})],target:"Idle"},onError:{target:"Retrying"}}]},Retrying:{after:{1e3:{target:"Syncing"}}}}}),F={slideDoneCbs:new Set,getDoneCbs:new Set,syncSyncDoneCbs:new Set},Z=(0,p.c)(q,{systemId:"system-scroll1"});function Y(t){Z.send(t)}Z.on("SCROLL.SLIDE.DONE",t=>F.slideDoneCbs.forEach(e=>e(t))),Z.on("SCROLL.GET.DONE",t=>F.getDoneCbs.forEach(e=>e(t))),Z.on("SCROLL.SYNCSYNC.DONE",t=>F.syncSyncDoneCbs.forEach(e=>e(t)));let G="panning",H=(0,f.cY)({types:{},guards:{shouldReset:(t,{ev:e})=>"r"===e.key,shouldRecenter:(t,{ev:e})=>"c"===e.key,shouldRotate:(t,{ev:e})=>"t"===e.key,shouldZoom:(t,{ev:e})=>0!==U(e.key),isTouching:({context:{touching:t}})=>t,isHoming:({context:{homing:t}})=>t,isZoomWanted:({context:{want_animation:t}})=>"zoom"===t,isRotateWanted:({context:{want_animation:t}})=>"rotate"===t,isContainerRendered:()=>null!==document.querySelector(".container"),isMapRendered:()=>r.O.isMapRendered(),isUiRendered:()=>r.O.isUiRendered()},actions:{syncScroll:({context:{layout:t}})=>Y({type:"SYNC",pos:t.scroll}),syncScrollSync:({context:{layout:t}})=>Y({type:"SYNCSYNC",pos:t.scroll}),getScroll:()=>Y({type:"GET"}),zoomKey:(0,d.a)({z:(t,{ev:e})=>U(e.key)}),zoomHome:(0,d.a)({z:()=>null,zoom:()=>1,homing:()=>!0}),zoomEvent:(0,d.a)({z:(t,{z:e})=>e,cursor:({context:{cursor:t}},{p:e})=>null===e?t:e}),startZoom:(0,d.a)({animation:({context:{layout:t,cursor:e,z:n}})=>null===n?function(t,e){let n=(0,k.be)(e.config.svg),r=(0,E.vT)(t).transformPoint(n),o=e.svgScale.s/t.svgScale.s,i=(0,k.be)(t.container),a=new DOMMatrixReadOnly().translate(i.x,i.y).scale(1/o).translate(-r.x,-r.y);return{move:null,zoom:{svg:e.svg,svgScale:e.svgScale,q:a,o:null},rotate:null}}(t,(0,z.nl)(t)):function(t,e,n){var o,i;let a=(0,E.vT)(t).inverse().transformPoint(n),u=1/(i=e,Math.pow(r.O.zoomFactor,i)),s=new DOMMatrixReadOnly().scale(1/u,1/u);return{move:null,zoom:{svg:(0,$.x2)(t.svg,u,a.x,a.y),svgScale:(o=t.svgScale,"x"in o?{x:o.x*u,y:o.y*u}:{s:o.s*u}),q:s,o:n},rotate:null}}(t,n,e)}),startRotate:(0,d.a)({animation:({context:{layout:t,cursor:e}})=>{var n,r;return n=0,r=e,{move:null,zoom:null,rotate:{deg:90,q:new DOMMatrixReadOnly().rotate(90),o:r}}}}),updateZoom:(0,d.a)({prevLayout:({context:{layout:t}})=>t,layout:({context:{layout:t,animation:e}})=>null===e?t:(0,L.zG)(t,t=>null===e.move?t:(0,z.v4)(t,e.move.move),t=>null===e.zoom?t:(0,z.J8)(t,e.zoom.svg,e.zoom.svgScale),t=>null===e.rotate?t:(0,z.vY)(t,e.rotate.deg))}),endZoom:(0,d.a)({prevLayout:null,want_animation:null,animation:null,z:null,zoom:({context:{z:t,zoom:e}})=>null===t?e:e*Math.pow(2,t)}),endRotate:(0,d.a)({prevLayout:null,want_animation:null,animation:null}),wantZoom:(0,d.a)({want_animation:"zoom"}),wantRotate:(0,d.a)({want_animation:"rotate"}),syncAnimation:({context:{animation:t}})=>{let e=t?.move?.q??t?.zoom?.q??t?.rotate?.q??null,n=t?.move?.o??t?.zoom?.o??t?.rotate?.o??null;null!==e&&(0,o.r6)({matrix:e,origin:n})},syncLayout:({context:{layout:t,rendered:e}})=>(0,o.F_)(t,e),resetCursor:(0,d.a)({cursor:({context:{layout:t}})=>(0,k.be)(t.container)}),cursor:(0,d.a)({cursor:(t,{ev:e})=>(0,M.lM)(e.pageX,e.pageY)}),setModeToPanning:(0,d.a)({mode:G,cursor:({context:{layout:t}})=>(0,k.be)(t.container)}),setModeToTouching:(0,d.a)({mode:"touching"}),setModeToLocked:(0,d.a)({mode:"locked"}),startTouching:(0,d.a)({touching:!0}),endTouching:(0,d.a)({touching:!1}),notifyTouching:(0,p.r)({type:"TOUCHING"}),notifyTouchingDone:(0,p.r)({type:"TOUCHING.DONE"}),startAnimating:(0,d.a)({animating:()=>!0}),stopAnimating:(0,d.a)({animating:()=>!1}),resizeLayout:(0,d.a)({rendered:!1,origLayout:(t,{layout:e})=>e,layout:(t,{layout:e})=>(0,z.Ul)(e,9)}),updateLayoutFromScroll:(0,d.a)({layout:({context:t})=>{let{scroll:e}=(0,W.so)();return(0,z.p1)(t.layout,e)}}),notifyZoomStart:(0,x.e)(({context:{layout:t,zoom:e,z:n}})=>({type:"ZOOM.START",layout:t,zoom:e,z:null===n?0:n})),notifyZoomEnd:(0,x.e)(({context:{layout:t,zoom:e}})=>({type:"ZOOM.END",layout:t,zoom:e})),notifySearch:(0,x.e)(({context:t})=>{let{scroll:e}=(0,W.so)(),n=(0,z.p1)(t.layout,e);return{type:"SEARCH",psvg:(0,E.vT)(n).inverse().transformPoint(t.cursor)}}),notifySearchDone:(0,p.r)({type:"SEARCH.DONE"}),notifySearchEndDone:(0,x.e)(({context:t},{res:e})=>{let{scroll:n}=(0,W.so)(),r=(0,z.p1)(t.layout,n);return{type:"SEARCH.END.DONE",psvg:e.psvg,info:e.info,layout:r}}),endHoming:(0,d.a)({cursor:({context:t})=>(0,k.be)(t.origLayout.container),layout:({context:t})=>(0,z.vY)((0,z.Ul)(t.origLayout,9),(0,z.lQ)(t.layout)),homing:()=>!1}),notifyMode:(0,x.e)(({context:{mode:t}})=>({type:"MODE",mode:t})),notifyLock:(0,x.e)({type:"LOCK",ok:!0}),setRendered:(0,d.a)({rendered:!0}),notifySwitch:(0,x.e)((t,{fidx:e})=>({type:"SWITCH",fidx:e})),notifySwitchDone:(0,x.e)(()=>({type:"SWITCH.DONE"}))}}).createMachine({id:"viewer",initial:"Resizing",context:{origLayout:z.qF,layout:z.qF,prevLayout:null,cursor:(0,k.be)(z.qF.container),z:null,zoom:1,homing:!1,want_animation:null,animation:null,mode:G,touching:!1,animating:!1,rendered:!1},on:{"TOUCH.LOCK":{actions:["startTouching","notifyTouching","setModeToTouching","notifyMode"]},"TOUCH.UNLOCK":{actions:["endTouching","notifyTouchingDone","setModeToPanning","notifyMode"]},"SEARCH.LOCK":{actions:["notifyLock","setModeToLocked","notifyMode"]},"SEARCH.UNLOCK":{actions:["setModeToPanning","notifyMode","notifySearchDone"]}},states:{Resizing:{initial:"WaitingForResizeRequest",onDone:"Appearing",states:{WaitingForResizeRequest:{on:{RESIZE:{actions:{type:"resizeLayout",params:({event:t})=>t},target:"WaitingForMapRendered"}}},WaitingForWindowStabilized:{id:"Resizing-WaitingForWindowStabilized",after:{500:{target:"WaitingForMapRendered"}}},WaitingForMapRendered:{after:{250:{target:"WaitingForMapRendered",reenter:!0}},always:{guard:(0,p.a)(["isContainerRendered","isMapRendered","isUiRendered"]),target:"Layouting"}},Layouting:{entry:"syncLayout",on:{RENDERED:{actions:["setRendered","syncLayout","resetCursor"],target:"Syncing"}}},Syncing:{entry:"syncScrollSync",on:{"SCROLL.SYNCSYNC.DONE":{target:"Done"}}},Done:{type:"final"}}},Appearing:{on:{"ANIMATION.END":{target:"Panning"}}},Panning:{on:{RESIZE:{actions:[{type:"resizeLayout",params:({event:t})=>t}],target:"#Resizing-WaitingForWindowStabilized"},"LAYOUT.RESET":{actions:["zoomHome","wantZoom"],target:"Zooming"},"KEY.UP":[{guard:{type:"shouldZoom",params:({event:t})=>({ev:t.ev})},actions:[{type:"zoomKey",params:({event:t})=>({ev:t.ev})},"wantZoom"],target:"Zooming"},{guard:{type:"shouldRotate",params:({event:t})=>({ev:t.ev})},actions:"wantRotate",target:"Zooming"}],CLICK:{guard:()=>r.O.searchEntries.length>0,actions:[{type:"cursor",params:({event:t})=>({ev:t.ev})}],target:"Searching"},SWITCH:{actions:{type:"notifySwitch",params:({event:t})=>t},target:"Switching"},CONTEXTMENU:{target:"Recentering"},ROTATE:{actions:"wantRotate",target:"Zooming"},RECENTER:{target:"Recentering"},"ZOOM.ZOOM":{actions:[{type:"zoomEvent",params:({event:{z:t,p:e}})=>({z:t,p:e})},"wantZoom"],target:"Zooming"},TOUCHING:{target:"Touching"}}},Touching:{initial:"Stopping",onDone:"Panning",states:{Stopping:{entry:"getScroll",on:{"SCROLL.GET.DONE":{target:"Waiting"}}},Waiting:{on:{"TOUCHING.DONE":{target:"Done"},"ZOOM.ZOOM":{actions:[{type:"zoomEvent",params:({event:{z:t,p:e}})=>({z:t,p:e})},"wantZoom"],target:"#Zooming"}}},Done:{type:"final"}}},Searching:{initial:"Starting",onDone:"Panning",states:{Starting:{always:{actions:"notifySearch",target:"WaitingForSearchEnd"}},WaitingForSearchEnd:{on:{"SEARCH.END":{actions:{type:"notifySearchEndDone",params:({event:t})=>t},target:"WaitingForSearchUnlock"}}},WaitingForSearchUnlock:{on:{"SEARCH.DONE":{target:"Done"}}},Done:{type:"final"}}},Switching:{initial:"Animating",onDone:"Panning",states:{Animating:{on:{"SWITCH.DONE":{actions:{type:"notifySwitchDone"},target:"Done"}}},Done:{type:"final"}}},Recentering:{initial:"Stopping",onDone:"Panning",states:{Stopping:{entry:"getScroll",on:{"SCROLL.GET.DONE":{target:"Rendering"}}},Rendering:{after:{50:{target:"Layouting"}}},Layouting:{always:{actions:["updateLayoutFromScroll","syncLayout","syncScroll"],target:"Done"}},Done:{type:"final"}}},Zooming:{id:"Zooming",initial:"Stopping",onDone:"Panning",states:{Stopping:{entry:"getScroll",on:{"SCROLL.GET.DONE":{target:"Rendering"}}},Rendering:{after:{50:{target:"Starting"}}},Starting:{always:[{guard:"isZoomWanted",actions:["updateLayoutFromScroll","startZoom","updateZoom","notifyZoomStart"],target:"Animating"},{guard:"isRotateWanted",actions:["updateLayoutFromScroll","startRotate","updateZoom","notifyZoomStart"],target:"Animating"}]},Animating:{initial:"Starting",onDone:"Done",states:{Starting:{always:{actions:["startAnimating","syncAnimation"],target:"Ending"}},Ending:{on:{"ANIMATION.END":[{guard:"isZoomWanted",actions:["endZoom","syncLayout","syncScroll","notifyZoomEnd","stopAnimating","syncAnimation"],target:"Homing"},{guard:"isRotateWanted",actions:["endRotate","syncLayout","syncScroll","notifyZoomEnd","stopAnimating","syncAnimation"],target:"Homing"}]}},Homing:{always:[{guard:"isHoming",actions:["endHoming","syncLayout","syncScroll"],target:"Done"},{target:"Done"}]},Done:{type:"final"}}},Done:{type:"final"}}}}});function B(t){K.send(t)}let K=(0,p.c)(H,{systemId:"system-viewer1"});K.on("SEARCH",({psvg:t})=>(0,o.oC)(t)),K.on("SEARCH.END.DONE",({psvg:t,info:e,layout:n})=>{(0,o.vh)(t,e,n),(0,o.k3)(t,e,n)}),K.on("LOCK",({ok:t})=>(0,o.mI)(t)),K.on("ZOOM.START",({layout:t,zoom:e,z:n})=>(0,o.rH)(t,e,n)),K.on("ZOOM.END",({layout:t,zoom:e})=>(0,o.df)(t,e)),K.on("LAYOUT",({layout:t})=>(0,o.df)(t,1)),K.on("MODE",({mode:t})=>(0,o.Oc)(t)),K.on("SWITCH",({fidx:t})=>(0,o.aU)(t)),K.on("SWITCH.DONE",()=>(0,o.l4)()),K.start(),o.Js.add(function(t){B({type:"SWITCH",fidx:t})}),o.Rd.add(function(){B({type:"SWITCH.DONE"})}),o.lJ.add(function(t){K.send({type:"SEARCH.END",res:t})}),o.G6.add(function(t){K.send({type:"SEARCH.LOCK",psvg:t})}),o.GU.add(function(){K.send({type:"SEARCH.UNLOCK"})}),o.A7.add(function(t,e){B({type:"RESIZE",layout:t,force:e})}),F.getDoneCbs.add(function(t){null!==t.scroll&&B({type:"SCROLL.GET.DONE",scroll:t.scroll})}),F.syncSyncDoneCbs.add(function(t){null!==t.scroll&&B({type:"SCROLL.SYNCSYNC.DONE",scroll:t.scroll})}),o.tZ.add(function(t){}),o.rA.add(function(){}),o.CB.add(function(){}),o.U1.add(function(){B({type:"LAYOUT.RESET"})}),o.cR.add(function(){B({type:"RECENTER"})}),o.er.add(function(){B({type:"ROTATE"})}),o.lz.add(function(){B({type:"ZOOM.ZOOM",z:-1,p:null})}),o.zC.add(function(){B({type:"ZOOM.ZOOM",z:1,p:null})}),o.jg.add(function(){B({type:"RENDERED"})}),h.sF,h.R$,h.QG,h.Ru,h.jg,h.jg,h.sP,h.fD,h.jg,n(2988),h.sF,h.sY,h.lm,h.sr,h.jg,h.Kp,h.Bp,h.Bp,h.sF,h.fD,h.jg,h.R$,h.sF,h.b8,h.lm,h.Kv,h.b8,h.lm,h.fD,h.R$,h.Kp;let X=3*Math.sqrt(2),V=X+6;`
M 0,0
m 0,${V/2}
l -3,-3
a ${X},${X} 0,1,1 6,0
z
m 0,${-V+X+X/2}
a ${X/2},${X/2} 0,1,0 0,${-X}
a ${X/2},${X/2} 0,1,0 0,${X}
`.replaceAll(/([.]\d\d)\d*/g,"$1"),h.sF,h.sY,h.Bt;var J=n(6058),Q=n(8544),tt=n(592),te=n(5185),tn=n(5311);let tr=J.pR(M.a4),to=Q.YH(tt.Df),ti=Q.qO(),ta=Q.uZ(tt.Eq,J.jG());function tu(t){return(0,L.zG)(t,Q.VO(tr),J.DZ(t=>0===t.length?te.YP:te.G(t[0])))}function ts(t){return t.length<2?null:(0,M.oe)(t)}function tc(t){return new Map((0,L.zG)(t.changedTouches,Array.from,J.UI(t=>[t.identifier,[{x:t.clientX,y:t.clientY}]])))}let tl=(0,f.cY)({types:{context:{},events:{},emitted:{}},guards:{isAllEnding:({context:{touches:t}})=>0===t.vecs.size,isSingleTouching:({context:{touches:t}})=>1===t.vecs.size,isDoubleTouching:({context:{touches:t}})=>2===t.vecs.size,isManyTouching:({context:{touches:t}})=>t.vecs.size>2,isZooming:({context:{touches:t}})=>null!==t.z},actions:{handleTouchStart:(0,x.a)(({enqueue:t})=>{t.assign({touches:({context:{touches:t},event:e})=>"TOUCH.START"!==e.type?t:function(t,e){let n=ta.concat(t.vecs,tc(e)),r=tu(n),o=ts(r),i=2!==r.length?null:.5>Math.abs((0,M.$B)(r[0],r[1]));return{...t,vecs:n,points:r,cursor:o,horizontal:i}}(t,e.ev)}),t.raise({type:"STARTED"})}),handleTouchMove:(0,x.a)(({enqueue:t})=>{t.assign({touches:({context:{touches:t},event:e})=>"TOUCH.MOVE"!==e.type?t:function(t,e,n){let r=tc(e),o=to.mapWithIndex(t.vecs,(t,e)=>(0,L.zG)(r.get(t),te.ij,te.g_(()=>e,J.zo(e)))),i=tu(o),a=ts(i),[u,s]=i;if(null===a||(0,tn.o8)(u)||(0,tn.o8)(s))return{...t,vecs:o,points:i,cursor:a};let c=function(t,e,n){let r=Math.pow((t.length>0?t[0]:e)-e,2);return 0===t.length||r>0?[e,...t]:t}(t.dists,(0,M.$k)(u,s),0),l=function([t,e,n,r]){return(0,tn.o8)(t)||(0,tn.o8)(e)||(0,tn.o8)(n)||(0,tn.o8)(r)?null:t<e&&e<n&&n<r?-1:t>e&&e>n&&n>r?1:null}(c);return{vecs:o,points:i,cursor:a,dists:c,z:l,horizontal:t.horizontal}}(t,e.ev,0)}),t.raise({type:"MOVED"})}),handleTouchEnd:(0,x.a)(({enqueue:t})=>{t.assign({touches:({context:{touches:t},event:e})=>"TOUCH.END"!==e.type?t:function(t,e){let n=tc(e),r=ti.filterMapWithIndex(t.vecs,(t,e)=>n.has(t)?te.YP:te.G(e)),o=tu(r),i=ts(o);return{vecs:r,points:o,cursor:i,dists:0===r.size?[]:t.dists,z:0===r.size?null:t.z,horizontal:t.horizontal}}(t,e.ev)}),t.raise({type:"ENDED"})}),resetTouches:(0,d.a)({touches:()=>({vecs:new Map,points:[],cursor:null,dists:[],z:null,horizontal:null})}),notifyTouching:(0,x.a)(({enqueue:t,context:e})=>t.emit(2===e.touches.vecs.size?{type:"MULTI.START"}:{type:"MULTI.END"})),notifyZoom:(0,x.a)(({context:t,enqueue:e})=>{let n=t.touches.cursor,r=t.touches.z;null!==n&&null!==r&&e.emit({type:"ZOOM",p:n,z:r})})}}).createMachine({id:"touch1",initial:"Idle",context:{touches:{vecs:new Map,points:[],cursor:null,dists:[],z:null,horizontal:null}},on:{"TOUCH.START":{actions:"handleTouchStart"},"TOUCH.MOVE":{actions:"handleTouchMove"},"TOUCH.END":{actions:"handleTouchEnd"},CANCEL:{target:".Canceling"}},states:{Idle:{entry:"resetTouches",on:{STARTED:[{guard:"isSingleTouching",target:"SingleTouching"},{guard:"isDoubleTouching",target:"DoubleTouching"},{guard:"isManyTouching",target:"ManyTouching"}]}},SingleTouching:{on:{STARTED:[{guard:"isDoubleTouching",target:"DoubleTouching"},{guard:"isManyTouching",target:"ManyTouching"}],ENDED:[{guard:"isAllEnding",target:"Idle"}]}},DoubleTouching:{entry:"notifyTouching",exit:"notifyTouching",on:{STARTED:[{guard:"isManyTouching",target:"ManyTouching"}],MOVED:{guard:"isZooming",actions:"notifyZoom"},ENDED:[{guard:"isAllEnding",target:"Idle"},{guard:"isSingleTouching",target:"SingleTouching"}]}},ManyTouching:{on:{ENDED:[{guard:"isAllEnding",target:"Idle"},{guard:"isSingleTouching",target:"SingleTouching"},{guard:"isDoubleTouching",target:"DoubleTouching"}]}},Canceling:{on:{ENDED:[{target:"Idle"}]}}}}),tf=(0,p.c)(tl);function td(){tf.send({type:"CANCEL"})}tf.on("MULTI.START",()=>{B({type:"TOUCH.LOCK"})}),tf.on("MULTI.END",()=>{B({type:"TOUCH.UNLOCK"})}),tf.on("ZOOM",({z:t,p:e})=>{B({type:"ZOOM.ZOOM",z:t>0?1:-1,p:e})}),tf.start(),o.U1.add(td),o.uo.add(td),o.j7.add(td),o.cR.add(td),o.lz.add(td),o.zC.add(td),h.sF,h.sY;let tp=(0,f.cY)({types:{context:{},events:{},emitted:{}}}).createMachine({id:"resize1",context:{prev:k.bf,next:k.bf,waited:0,first:!0},initial:"Uninited",states:{Uninited:{always:{target:"Waiting"}},Idle:{on:{RESIZE:{target:"Busy"}}},Busy:{after:{500:{actions:[(0,d.a)({next:()=>(0,tn.JX)()}),(0,p.r)({type:"EXPIRED"})]}},on:{EXPIRED:[{guard:({context:t})=>t.waited>1e4,target:"Aborting"},{guard:({context:{prev:t,next:e}})=>t.width===e.width&&.2>Math.abs(1-e.height/t.height),actions:()=>console.log("resize: ignoring height-only change"),target:"Idle"},{guard:({context:t})=>!(0,k.eq)(t.prev,t.next),actions:[(0,d.a)({prev:({context:t})=>t.next,waited:0}),(0,x.e)(({context:t})=>({type:"LAYOUT",layout:(0,z.D0)(r.O.origViewBox,r.O.fontSize,t.next),force:!t.first})),(0,d.a)({first:!1})],target:"Idle"},{target:"Waiting"}]}},Waiting:{always:{actions:[(0,d.a)({waited:({context:t})=>t.waited+500})],target:"Busy"}},Aborting:{}}}),th=(0,p.c)(tp);th.on("LAYOUT",({layout:t,force:e})=>(0,o.aL)(t,e)),th.start(),window.addEventListener("resize",()=>{th.send({type:"RESIZE"})}),n(4428),h.sF,h.sY,h.$i,h.QG,h.KA,n(7234)},4449:function(t,e,n){function r(t,e,n,r){return{x:t,y:e,width:n,height:r}}n.d(e,{Ao:()=>c,BZ:()=>r,JG:()=>a,M2:()=>f,be:()=>u,bf:()=>o,eq:()=>i,nE:()=>l,pB:()=>s});let o={x:0,y:0,width:1,height:1};function i(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function a(t){return{x:t.x,y:t.y,width:t.width,height:t.height}}function u(t){return{x:t.x+.5*t.width,y:t.y+.5*t.height}}function s(t,e){return{...t,x:t.x+e.x,y:t.y+e.y}}function c(t,e){return{...t,x:e.x,y:e.y}}function l(t){return function({x:t,y:e,width:n,height:r}){return`${t} ${e} ${n} ${r}`}(function({x:t,y:e,width:n,height:r},o){return{x:o(t),y:o(e),width:o(n),height:o(r)}}(t,function(t){return Math.round(100*t)/100}))}function f([t,e],n){return[n(t),n(e)]}},8113:function(t,e,n){n.d(e,{x2:()=>d});function r(t,e,n){return[function([t,e,n],[r,o],i){return t*r+e*o+n*i}(function([[t],[e],[n]]){return[t,e,n]}(t),e,n),function([t,e,n],[r,o],i){return t*r+e*o+n*i}(function([[,t],[,e],[,n]]){return[t,e,n]}(t),e,n)]}function o(t,e){return[r(t,function([t]){return t}(e),0),r(t,function([,t]){return t}(e),0),r(t,function([,,t]){return t}(e),1)]}function i([t,e]){return[[1,0],[0,1],[t,e]]}var a=n(8945),u=n(4449);function s({x:t,y:e,width:n,height:r}){return{tl:{x:t,y:e},br:{x:t+n,y:e+r}}}function c({tl:t,br:e}){return{x:t.x,y:t.y,width:e.x-t.x,height:e.y-t.y}}function l({tl:t,br:e}){return[[t.x,t.y],[e.x,e.y]]}function f([[t,e],[n,r]]){return{tl:{x:t,y:e},br:{x:n,y:r}}}function d(t,e,n,d){var p,h;return p=function(t,e){let[n,r]=e;return[i(e),function([t,e]){return[[t,0],[0,e],[0,0]]}(t),i([-n,-r])].reduce(o)}("number"==typeof(h=e)?[h,h]:"x"in h?[h.x,h.y]:h,[n,d]),(0,a.zG)(t,s,l,t=>(0,u.M2)(t,t=>r(p,t,1)),f,c)}},2247:function(t,e,n){n.d(e,{FP:()=>i});var r=n(8586),o=n(1725);function i(){return(0,r.jsx)("g",{className:"assets",children:(0,r.jsx)(a,{})})}function a(){return(0,r.jsxs)("g",{className:"symbols",children:[(0,r.jsx)(o.Gc,{}),(0,r.jsx)(o.rw,{}),(0,r.jsx)(o.qD,{}),(0,r.jsx)(o.cH,{}),(0,r.jsx)(o.d,{}),(0,r.jsx)(o.Ue,{}),(0,r.jsx)(o.Qc,{}),(0,r.jsx)(o.AW,{})]})}},2270:function(t,e,n){n.d(e,{bY:()=>s,iW:()=>E,YD:()=>O,Qs:()=>b,op:()=>m});var r=n(8586),o=n(4249),i=n(3675),a=n(2638);function u({x:t,y:e}){return`${t},${e}`}function s(t){return(0,r.jsx)("g",{className:"map-layers",children:t.mapLayers.map((e,n)=>(0,r.jsx)(o.Fragment,{children:"line"===e.type?function(t,e){var n;let s=void 0!==e.filter?(n=e.filter,i.O.mapData.lines.features.filter(t=>n(t.properties)).map(t=>({name:d(t.properties.name),id:(0,a.Mh)(t.properties)+"",tags:l(t.properties),width:c(t.properties),vs:t.geometry.coordinates}))):void 0!==e.data?e.data.map(t=>({tags:[],vs:t})):[];return 0===s.length?(0,r.jsx)(r.Fragment,{}):(0,r.jsx)("g",{className:e.name,style:{contain:"content"},children:s.map((n,i)=>(0,r.jsx)(o.Fragment,{children:function(t,{id:e,tags:n,width:o,widthScale:i,vs:a},s,c,l){return(0,r.jsx)("path",{id:void 0===e?void 0:`path${e}`,className:[s,...n].join(" ").replaceAll(/;/g,"_"),strokeWidth:(o??c??1)*(i??l??1),d:function(e){return(function(t,e){let[n,r]=t[0];return`M${u(e.transformPoint({x:n,y:r}))}`+t.slice(1).map(([t,n])=>e.transformPoint({x:t,y:n})).map(t=>`L${u(t)}`)})(e,t).replaceAll(/([.]\d\d)\d*/g,"$1")}(a)})}(t,n,e.name,e.width,e.widthScale)},i))})}(t.m,e):function(t,e){var n;let s=void 0!==e.filter?(n=e.filter,i.O.mapData.multipolygons.features.filter(t=>n(t.properties)).map(t=>({name:d(t.properties.name),id:(0,a.Mh)(t.properties)+"",tags:l(t.properties),width:c(t.properties),vs:t.geometry.coordinates}))):void 0!==e.data?e.data.map(t=>({tags:[],vs:t})):[];return 0===s.length?(0,r.jsx)(r.Fragment,{}):(0,r.jsx)("g",{className:e.name,children:s.map((n,i)=>(0,r.jsx)(o.Fragment,{children:function(t,{id:e,tags:n,width:o,widthScale:i,vs:a},s,c,l){return(0,r.jsx)("path",{id:e,className:[s,...n].join(" ").replaceAll(/;/g,"_"),strokeWidth:(o??c??1)*(i??l??1),d:function(e){return e.map(e=>e.map(e=>(function(t,e){let[n,r]=t[0];return`M${u(e.transformPoint({x:n,y:r}))}`+t.slice(1,-1).map(([t,n])=>e.transformPoint({x:t,y:n})).map(t=>`L${u(t)}`)+"Z"})(e,t)).join("")).join("").replaceAll(/([.]\d\d)\d*/g,"$1")}(a)})}(t,n,e.name,e.width,e.widthScale)},i))})}(t.m,e)},n))})}function c(t){let e=t?.other_tags?.match(/"width"=>"([1-9][.0-9]*)"/);return e?Math.round(Number(e[1])):void 0}function l(t){return f.flatMap(e=>e(t))}let f=[function(t){let e=t?.other_tags?.match(/"access"=>"([^"][^"]*)"/);return e?[`access-${e[1]}`]:[]},function(t){let e=t?.other_tags?.match(/"service"=>"([^"][^"]*)"/);return e?[`service-${e[1]}`]:[]},function(t){let e=t?.other_tags?.match(/"surface"=>"([^"][^"]*)"/);return e?[`surface-${e[1]}`]:[]},function(t){let e=t?.other_tags?.match(/"lanes"=>"([^"][^"]*)"/);return e?[`lanes-${e[1]}`]:[]},function(t){let e=t?.other_tags?.match(/"tunnel"=>"([^"][^"]*)"/);return e?[`tunnel-${e[1]}`]:[]},function(t){let e=t?.other_tags?.match(/"building"=>"([^"][^"]*)"/);return e?[`building-${e[1]}`]:[]},function(t){let e=t?.other_tags?.match(/"level"=>"([^"][^"]*)"/);return e?[`level-${e[1]}`]:[]}];function d(t){return t===d||null===t?void 0:t}var p=n(5311);function h({pointsFilter:t,polygonsFilter:e,linesFilter:n,data:r}){var o,a,u,s,c,l;let f=i.O.mapData,d=void 0===t?[]:(o=f.points.features,a=t,o.filter(t=>a(t.properties)).flatMap(g)),p=void 0===n?[]:(u=f.lines.features,s=n,u.filter(t=>s(t.properties)).flatMap(g));return[...d,...p,...void 0===e?[]:(c=f.multipolygons.features,l=e,c.filter(t=>l(t.properties)).flatMap(g)),...void 0===r?[]:r]}function g(t){let e=t.properties.centroid_x,n=t.properties.centroid_y;return null===e||null===n?[]:[[e,n]]}function m(t){let e=25/t.fontSize;return(0,r.jsxs)("defs",{className:"map-markers",children:[t.mapMarkers.map((n,o)=>(0,r.jsx)("g",{children:(0,r.jsx)(y,{m:t.m,sz:e,name:n.name,href:n.name,vs:h(n)})},o)),(0,r.jsx)(v,{sz:e}),(0,r.jsx)(x,{sz:e}),(0,r.jsx)("style",{children:(0,r.jsx)(S,{...t})})]})}function y(t){return(0,r.jsx)(r.Fragment,{children:t.vs.map(([e,n])=>t.m.transformPoint({x:e,y:n})).map(({x:e,y:n},o)=>(0,r.jsx)("use",{className:`${t.name}-${o}`,href:t.href,style:{transform:`translate(${(0,p.mh)(e)}px, ${(0,p.mh)(n)}px)scale(var(${t.sz}))`}},o))})}function v(t){var e;let n=t.sz/2;return(0,r.jsx)("path",{id:"point-name-marker",fill:"white",fillOpacity:"0.5",stroke:"none",strokeWidth:n/20,d:(e=n,`
M 0,0
m ${-e},0
a ${e},${e} 0,1,1 ${2*e},0
a ${e},${e} 0,1,1 ${-2*e},0
z
`).replaceAll(/([.]\d\d)\d*/g,"$1")})}function x(t){let e=t.sz/2,n=e/Math.sqrt(2);return(0,r.jsx)("path",{id:"position",className:"position",fill:"red",fillOpacity:"1",stroke:"none",d:(function(t,e){return`

M 0,0
l ${-t},${-t}
a ${e},${e} 0,1,1 ${2*t},0
z

m 0,${-t-e/4}
a ${e/2},${e/2} 0,1,0 0,${-e}
a ${e/2},${e/2} 0,1,0 0,${e}
z
`})(n,e).replaceAll(/([.]\d\d)\d*/g,"$1")})}function S(t){let e=(0,a.Ki)(),n=t.s*t.fontSize*.9;if(null===e)return(0,r.jsx)(r.Fragment,{children:`
#position {
  display: none;
}`});let{x:o,y:u}=i.O.mapCoord.matrix.transformPoint({x:e.coords.longitude,y:e.coords.latitude});return(0,r.jsx)(r.Fragment,{children:`
#position {
  display: initial !important;
  transform: translate(${o}px, ${u}px) scale(${n});
}
`})}function b(){let t=i.O.cartoConfig?.skipNamePattern,e=i.O.cartoConfig?.splitNamePattern;return[...i.O.mapData.points.features.flatMap(({properties:n})=>{let r=(0,a.Mh)(n);if(null===n.centroid_x||null===n.centroid_y)return[];let o=function([t,e]){return{x:t,y:e}}([n.centroid_x,n.centroid_y]),i=_(n,t,e);return 0===i.length?[]:[{id:null===r?null:r,name:i,pos:o,size:0,area:void 0}]}),...i.O.mapData.multipolygons.features.flatMap(({properties:n})=>{let r=(0,a.Mh)(n);if(null===n.centroid_x||null===n.centroid_y)return[];let o=function([t,e]){return{x:t,y:e}}([n.centroid_x,n.centroid_y]),i=function t(e){return e===t||null===e?void 0:e}(n?.area),u=_(n,t,e);return 0===u.length?[]:[{id:null===r?null:r,name:u,pos:o,size:0,area:i}]})]}function _(t,e,n){let r=t.name;return null===r||"string"!=typeof r||void 0!==e&&r.match(e)?[]:(void 0===n?r:r.replace(n," $1 ")).trim().split(M).map(t=>t.trim())}let M=/[ 　][ 　]*/;function E(t){return(0,r.jsx)("g",{className:"map-objects",children:t.mapObjects.map((e,n)=>(0,r.jsx)("g",{children:(0,r.jsx)(w,{m:t.m,name:e.name,path:e.path,width:e.width,vs:h(e)})},n))})}function w(t){return(0,r.jsx)("path",{className:t.name,fill:"none",stroke:"black",strokeWidth:t.width,d:t.vs.map(([e,n])=>t.m.transformPoint({x:e,y:n})).map(({x:e,y:n})=>`M ${e},${n}`.replaceAll(/([.]\d\d)\d*/g,"$1")+t.path).join("")})}function O(t){return(0,r.jsx)("g",{className:"map-symbols",children:t.mapSymbols.map((e,n)=>(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("g",{className:e.name,children:(0,r.jsx)(j,{name:e.name,href:e.href,vs:h(e),m:t.m})})},n))})}function j(t){return(0,r.jsx)(r.Fragment,{children:t.vs.map(([e,n])=>t.m.transformPoint({x:e,y:n})).map(({x:e,y:n},o)=>(0,r.jsx)("use",{className:`${t.name}-${o}`,href:t.href,style:{transform:`translate(${e}px, ${n}px)`.replaceAll(/([.]\d\d)\d*/g,"$1")+"scale(var(--map-symbol-size))"}},o))})}},5092:function(t,e,n){n.d(e,{Yn:()=>c,Y0:()=>i,KX:()=>u,MX:()=>r,TP:()=>o,ps:()=>f,$Y:()=>s,Tw:()=>l,NQ:()=>a,R4:()=>d}),n(8586);let r="m -0.7,0 v -0.4 m 1.4,0.4 v -0.4 m 0.3,0 h -2",o="m 0,1 h -1 v -2 h 2 v 2 h -1 v -2 m -0.5,1 m -0.2,-0.2 l 0.2,0.2 l -0.2,0.2 m 0.2,-0.2 h -1",i="m 0,0 v -1.4 h -0.7 m 0,0.6 h 0.7 m 0,-0.3 h 0.7",a="m -0.4,0 v -0.7 m 0.8,0.7 v -0.7 m 0.1,0 h -1 v -0.7 h 1 z",u="m -0.5 0 v -0.3 h 1 v 0.3 m -0.75 -0.3 v -1.2 h 0.5 v 1.2",s="m -0.5 0 v -0.3 h 1 v 0.3 m -0.5 -0.3 s -0.4 -0.75 0 -0.75 h 0 a 0.125 0.125 0 0 1 0 -0.25 a 0.125 0.125 0 0 1 0 0.25 s 0.4 0 0 0.75",c="m -0.9 0 v -2 m 1.8 2 v -2 m -2.3 0 h 2.8 m -2.6 0.4 h 2.4",l="m 0,0 0,-4 m 0,2 c 3,0 2,-6 0,-6 c -2,0 -3,6 0,6 z",f="m -0.5,0 v -1.8 h 1 v 1.8 z m 0.1,-0.9 v -0.7 h 0.8 v 0.7 z m 0.6,0.2 h 0.2 m -0.7,0.5 v -0.2 h 0.6 v 0.2 z",d="m -0.5,-1 l 0.15,1 h 0.7 l 0.15,-1";Object.entries({bench:r,entrance:o,guide_post:i,info_board:a,monument:u,statue:s,torii:c,tree:l,vending_machine:f,waste_basket:d})},1725:function(t,e,n){n.d(e,{lm:()=>d,rw:()=>i,qD:()=>a,Qc:()=>l,AW:()=>f,Ue:()=>c,Gc:()=>o,d:()=>s,cH:()=>u});var r=n(8586);function o(){return(0,r.jsxs)("g",{id:"XBus",transform:"translate(-36, -36)",children:[(0,r.jsx)("rect",{x:"0.5",y:"0.5",width:"71",height:"71",ry:"6",stroke:"white"}),(0,r.jsx)("path",{d:"m 14,58 4,0 0,4 a 3,3 0 0 0 6,0 l 0,-4 24,0 0,4 a 3,3 0 0 0 6,0 l 0,-4 4,0 0,-23 -2,-16 a 8,8 0 0 0 -6,-6 40,40 0 0 0 -28,0 8,8 0 0 0 -6,6 l -2,16 0,23 z M 22,20 a 2.5,2.5 0 0 0 -2.5,2 L 18,35 a 1.5,1.75 0 0 0 1.5,2 l 33,0 A 1.5,1.75 0 0 0 54,35 L 52.5,22 A 2.5,2.5 0 0 0 50,20 z",fill:"white",stroke:"none",fillRule:"evenodd"}),(0,r.jsx)("path",{d:"m 27,16.5 18,0",fill:"none",strokeWidth:"3",strokeLinecap:"round"}),(0,r.jsx)("circle",{cx:"21",cy:"48",r:"3",stroke:"none"}),(0,r.jsx)("circle",{cx:"51",cy:"48",r:"3",stroke:"none"})]})}function i(){return(0,r.jsxs)("g",{id:"XDrinkingFountain",children:[(0,r.jsx)("rect",{x:"-35.5",y:"-35.5",width:"71",height:"71",rx:"6",ry:"6",fill:"black",stroke:"white"}),(0,r.jsxs)("g",{fill:"white",stroke:"none",children:[(0,r.jsx)("circle",{cx:"9",cy:"-20",r:"5.5",id:"circle1"}),(0,r.jsx)("path",{d:"m -2,-7.5 v 5 a 2.5,2.5 0 0 0 0.75,1.75 l 6.5,6.5 a 2.475,2.475 0 0 0 3.5,-3.5 L 3,-3.5 v -10 a 5.5,5.5 0 0 0 -8,-5 l -12,6.5 a 5,5 0 0 0 -3,5 v 32.5 a 4,4 0 0 0 8,0 v -27 z",id:"path1"}),(0,r.jsx)("path",{d:"m 18.5,9 h 7 V -7 h -17 a 2.5,2.5 0 0 0 -1.75,4.25 z",id:"path2"}),(0,r.jsx)("circle",{cx:"11.75",cy:"-8.75",r:"0.7",id:"circle2"}),(0,r.jsx)("circle",{cx:"13.5",cy:"-8.75",r:"0.7",id:"circle3"}),(0,r.jsx)("circle",{cx:"11.75",cy:"-10.75",r:"0.7",id:"circle4"}),(0,r.jsx)("circle",{cx:"13.75",cy:"-10.75",r:"0.7",id:"circle5"}),(0,r.jsx)("circle",{cx:"12.5",cy:"-12.75",r:"0.7",id:"circle6"}),(0,r.jsx)("circle",{cx:"14.75",cy:"-12.25",r:"0.7",id:"circle7"}),(0,r.jsx)("circle",{cx:"13.75",cy:"-14.25",r:"0.75",id:"circle8"}),(0,r.jsx)("circle",{cx:"15.5",cy:"-15",r:"0.75",id:"circle9"}),(0,r.jsx)("circle",{cx:"15.5",cy:"-15",r:"0.75",id:"circle10"}),(0,r.jsx)("circle",{cx:"16.5",cy:"-13",r:"0.75",id:"circle11"}),(0,r.jsx)("circle",{cx:"17.75",cy:"-15",r:"0.85",id:"circle12"}),(0,r.jsx)("circle",{cx:"18.25",cy:"-12.5",r:"0.85",id:"circle13"}),(0,r.jsx)("circle",{cx:"19.5",cy:"-14",r:"0.9",id:"circle14"}),(0,r.jsx)("circle",{cx:"19.75",cy:"-10.75",r:"0.9",id:"circle15"}),(0,r.jsx)("circle",{cx:"21.25",cy:"-12.5",r:"0.9",id:"circle16"})]})]})}function a(){return(0,r.jsxs)("g",{id:"XElevator",transform:"translate(-36, -36)",children:[(0,r.jsx)("rect",{x:"0.5",y:"0.5",width:"71",height:"71",ry:"6",stroke:"white"}),(0,r.jsxs)("g",{fill:"none",stroke:"white",strokeWidth:"5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"m 26.5,23.5 0,-17 M 20,14 26.5,6.5 33,14"}),(0,r.jsx)("path",{d:"m 45.5,6.5 0,17 M 39,16 45.5,23.5 52,16"})]}),(0,r.jsx)("rect",{x:"17",y:"28",width:"38",height:"38",ry:"5",fill:"white",stroke:"none"}),(0,r.jsx)("rect",{x:"22",y:"33",width:"28",height:"28",stroke:"none"}),(0,r.jsxs)("g",{id:"_person2",fill:"white",stroke:"none",children:[(0,r.jsx)("circle",{cx:"27.5",cy:"38.75",r:"1.75"}),(0,r.jsx)("path",{d:"m 24.5,41 a 1,1 0 0 0 -1,1 l 0,7 a 1,1 0 0 0 1,1 l 0.25,0 0,8.5 a 1.25,1.25 0 1 0 2.5,0 l 0,-8.5 0.5,0 0,8.5 a 1.25,1.25 0 1 0 2.5,0 l 0,-8.5 0.25,0 a 1,1 0 0 0 1,-1 l 0,-7 a 1,1 0 0 0 -1,-1 l -6,0 z"})]}),(0,r.jsx)("use",{x:"8.5",href:"#_person2"}),(0,r.jsx)("use",{x:"17",href:"#_person2"})]})}function u(){return(0,r.jsxs)("g",{id:"XEscalator",transform:"translate(-36, -36)",children:[(0,r.jsx)("rect",{x:"0.5",y:"0.5",width:"71",height:"71",ry:"6",stroke:"white"}),(0,r.jsx)("path",{d:"m 55,28 c -1,0 -2,0 -3,1 L 27,54 c -2,2 -4,3 -6,3 l -9,0 a 6,6 270 1 1 0,-12 l 5,0 c 1,0 2,0 3,-1 L 45,19 c 2,-2 4,-3 6,-3 l 9,0 a 6,6 90 1 1 0,12 z",fill:"none",stroke:"white",strokeWidth:"4"}),(0,r.jsx)("path",{d:"m 27,35 9,-9 0,-3 a 4.5,4.5 0 0 0 -9,0 z",fill:"white",stroke:"none"}),(0,r.jsx)("circle",{cx:"31.5",cy:"13.5",r:"4.5",fill:"white",stroke:"none"})]})}function s(){return(0,r.jsxs)("g",{id:"XInformation",transform:"translate(-36, -36)",children:[(0,r.jsx)("rect",{x:"0.5",y:"0.5",width:"71",height:"71",ry:"6",stroke:"white"}),(0,r.jsx)("circle",{cx:"36",cy:"36",r:"24",fill:"none",stroke:"white",strokeWidth:"6"}),(0,r.jsx)("path",{d:"m 27,32 c 0,-5 1,-11 9,-11 4,0 8,3 8,7 0,4 -2,6 -4,7 -2,1 -4,2 -4,5 0,3 0,6 0,6",fill:"none",stroke:"white",strokeWidth:"6"}),(0,r.jsx)("rect",{x:"33",y:"48",width:"6",height:"6",fill:"white",stroke:"none"})]})}function c(){return(0,r.jsxs)("g",{id:"XParking",children:[(0,r.jsx)("rect",{x:"-35.5",y:"-35.5",width:"71",height:"71",rx:"6",ry:"6",fill:"black",stroke:"white"}),(0,r.jsx)("path",{d:"M -11,24 V -21 H 3 A 12.5,12.5 0 0 1 3,4 h -9",fill:"none",stroke:"white",strokeWidth:10})]})}function l(){return(0,r.jsxs)("g",{id:"XStairs",transform:"translate(-36, -36)",children:[(0,r.jsx)("rect",{x:"0.5",y:"0.5",width:"71",height:"71",ry:"6",stroke:"white"}),(0,r.jsx)("path",{d:"m 9,56.5 12,0 0,-10 10,0 0,-10 10,0 0,-10 10,0 0,-10 12,0",fill:"none",stroke:"white",strokeWidth:"5"})]})}function f(){return(0,r.jsxs)("g",{id:"XToilets",transform:"translate(-36,-36)",children:[(0,r.jsx)("rect",{x:"0.5",y:"0.5",width:"71",height:"71",ry:"6",stroke:"white"}),(0,r.jsxs)("g",{fill:"white",stroke:"none",children:[(0,r.jsx)("rect",{x:"33.5",y:"12",width:"5",height:"48"}),(0,r.jsx)("circle",{cx:"19.5",cy:"15",r:"4"}),(0,r.jsx)("path",{d:"m 19,44.5 0,14 a 2,2 0 0 1 -4,0 l 0,-14 -5,0 5.5,-18.5 -1,0 -3,10.5 A 1.821,1.821 0 0 1 8,35.5 l 3.5,-12 A 5.7,4.6 0 0 1 17,20 l 5,0 a 5.7,4.6 0 0 1 5.5,3.5 l 3.5,12 a 1.821,1.821 0 0 1 -3.5,1 l -3,-10.5 -1,0 5.5,18.5 -5,0 0,14 a 2,2 0 0 1 -4,0 l 0,-14 z"}),(0,r.jsx)("circle",{cx:"52.5",cy:"15",r:"4"}),(0,r.jsx)("path",{d:"m 43,25 0,13 a 1.75,1.75 0 0 0 3.5,0 l 0,-11.5 1,0 0,31.75 a 2.25,2.25 0 0 0 4.5,0 l 0,-18.75 1,0 0,18.75 a 2.25,2.25 0 0 0 4.5,0 l 0,-31.75 1,0 0,11.5 a 1.75,1.75 0 0 0 3.5,0 l 0,-13 a 5,5 0 0 0 -5,-5 l -9,0 a 5,5 0 0 0 -5,5 z"})]})]})}let d=new Map(Object.entries({bus:"#XBus",elevator:"#XElevator",escalator:"#XEscalator",information:"#XInformation",parking:"#XParking",stairs:"#XStairs",toilets:"#XToilets",water:"#XDrinkingFountain"}))},1213:function(t,e,n){n.d(e,{$i:()=>s,Bp:()=>_,Bt:()=>x,KA:()=>h,Kp:()=>y,Kv:()=>o,QG:()=>c,R$:()=>m,Ru:()=>b,X2:()=>S,b8:()=>d,fD:()=>f,jg:()=>p,lm:()=>g,sF:()=>r,sP:()=>i,sY:()=>l,sr:()=>v});let r=`
position: absolute;
left: 0;
top: 0;
`,o=`
position: absolute;
right: 0;
top: 0;
`,i=`
position: absolute;
left: 0;
bottom: 0;
`,a=`
margin: 0;
`,u=`
padding: 0;
`,s=`
${a} ${u}
`,c=`
box-sizing: border-box;
`,l=`
width: 100vw;
height: 100vh;
height: 100svh;
`,f=`
display: flex;
flex-direction: column;
align-items: center;
justify-content: center;
`,d=`
display: flex;
flex-direction: column;
align-items: center;
justify-content: center;
`,p=`
-webkit-user-select: none;
user-select: none;
`,h=`
touch-action: none;
`,g=`
pointer-events: none;
`,m=`
pointer-events: initial;
`,y=`
background-color: rgba(255, 255, 255, 0.5);
`,v=2,x=5,S=10,b=11,_="250ms"},8439:function(t,e,n){n.d(e,{eM:()=>i,kq:()=>u,pR:()=>a});var r=n(4249),o=n(4428);let i=new Map;function a(t,e,n){(0,r.useEffect)(()=>(function(t,e,n){let r=void 0===n?document:i.get(n)??null;if(null===r)return;let a=r.querySelector(`#${t}`)??null;if(null===a||null!==a.shadowRoot)return;let u=a.attachShadow({mode:"open"});i.set(t,u),(0,o.createRoot)(u).render(e)})(t,e,n),[t,n,e])}function u(t){let e=document.querySelector(`#${t}`)?.shadowRoot?.children?.length??null;return null!==e&&e>0}},2638:function(t,e,n){n.d(e,{Ty:()=>g,Ls:()=>h,Mh:()=>m,Ki:()=>p,SX:()=>y}),n(3030);var r=n(2158),o=n(9621),i=n(6011),a=n(64),u=n(5582),s=n(2662),c=n(8542);async function l(){return new Promise((t,e)=>{navigator.geolocation.getCurrentPosition(function(e){t(e)},function(t){e(t)},{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})})}let f=(0,o.cY)({types:{events:{},emitted:{}},actors:{api:(0,i.p4)(l)},delays:{TIMEOUT:5e3}}).createMachine({id:"geoloc",context:{position:null,error:null},initial:"Idle",states:{Idle:{on:{GET:{target:"Getting"}}},Getting:{invoke:{src:"api",onDone:{actions:[(0,a.a)({position:({event:t})=>t.output}),(0,u.e)(({event:t})=>({type:"POSITION",position:t.output}))],target:"Idle"},onError:{actions:(0,a.a)({error:({event:t})=>JSON.stringify(t)}),target:"Retrying"}}},Retrying:{after:{TIMEOUT:{target:"Getting"}}}}}),d=(0,s.c)(f);function p(){return(0,r.v9)(d,t=>t.context.position)}function h(t,e){if(void 0===t)return null;let n=e.pointMap.get(t);if(void 0!==n)return n;let r=e.lineMap.get(t);if(void 0!==r)return r;let o=e.multipolygonMap.get(t);return void 0!==o?o:null}function g(t,e){return h(t,e)?.properties??null}function m(t){let e="osm_id"in t&&"string"==typeof t.osm_id?t.osm_id:"osm_way_id"in t&&"string"==typeof t.osm_way_id?t.osm_way_id:null;return null===e?null:Number(e)}function y(t,e){let n=RegExp(`\\"${e}\\"=>\\"([^"][^"]*)\\"`);if(null===t.other_tags)return null;let r=n.exec(String(t.other_tags));return null===r?null:r[1]}d.start(),c.j7.add(function(){d.send({type:"GET"})})},5641:function(t,e,n){n.d(e,{W:()=>to,d:()=>tr});var r=n(8586),o=n(2270),i=n(8439);let a="map-svg-layers",u="map-svg-objects",s="map-svg-symbols",c="map-svg-markers",l="map-svg-labels",f="map-html";var d=n(3675),p=n(2988),h=n(5311),g=n(1662),m=n(2955);function y(){return(0,i.pR)(f,(0,r.jsx)(v,{})),(0,r.jsx)("div",{id:f,className:"content svg"})}function v(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{id:"map-html-content",children:(0,r.jsx)(S,{})}),(0,r.jsx)(x,{})]})}function x(){let t=(0,p.$Y)(),{scroll:e}=t,n=(0,g.YL)(t),o=`
#map-html-content {
  position: absolute;
  left: 0;
  top: 0;
  width: ${(0,h.mh)(e.width)}px;
  height: ${(0,h.mh)(e.height)}px;
  transform: ${n.toString()};
  transform-origin: left top;
}
`;return(0,r.jsx)("style",{children:o})}function S(){let{pointNames:t}=(0,m.ux)(),e=d.O.mapCoord.matrix;return(0,r.jsx)(r.Fragment,{children:t.map(t=>({...t,pos:e.transformPoint(t.pos)})).map((t,e)=>(0,r.jsx)("div",{style:{position:"absolute",left:0,top:0,transform:`translate(${t.pos.x}px, ${t.pos.y}px) scale(0.025) translate(-50%, -50%)`,transformOrigin:"left top"},children:t.name.map((t,e)=>(0,r.jsx)("p",{style:{margin:0,textAlign:"center",width:"20em"},children:t},e))},e))})}var b=n(4249),_=n(4449);function M(t,e){return(-.5*t+(e+.5))*1.2}function E(){return(0,i.pR)(l,(0,r.jsx)(w,{})),(0,r.jsx)("div",{id:l,className:"content svg"})}function w(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(T,{}),(0,r.jsx)(A,{}),(0,r.jsx)(R,{}),(0,r.jsx)(I,{}),(0,r.jsx)("style",{children:O})]})}let O=`
#map-svg-labels-svg,
#map-svg-labels1 {
  contain: content;
  pointer-events: none;
}
#map-svg-labels-defs {
  display: none;
}
text, tspan {
  contain: layout;
}
`;function j(){let{pointNames:t,areaNames:e}=(0,m.ux)(),n=d.O.mapCoord.matrix;return(0,r.jsxs)("g",{id:"map-svg-labels1",children:[(0,r.jsx)("g",{children:t.map(t=>({...t,pos:n.transformPoint(t.pos)})).map(({id:t,pos:{x:e,y:n},size:o},i)=>(0,r.jsx)("use",{href:`#name-${t}`,style:{transform:`translate(${(0,h.mh)(e)}px, ${(0,h.mh)(n)}px) scale(${Math.round(o/10)/16})`}},i))}),(0,r.jsx)("g",{children:e.map(t=>({...t,pos:n.transformPoint(t.pos)})).map(({id:t,pos:{x:e,y:n},size:o},i)=>(0,r.jsx)("use",{id:`use-${t}`,href:`#name-${t}`,style:{transform:`translate(${(0,h.mh)(e)}px, ${(0,h.mh)(n)}px) scale(${Math.round(o/10)/16})`}},i))})]})}function R(){let{areaRange:t}=(0,m.fF)(),e=Array.from(t.insides.keys()).map(t=>`#use-${t}`).join(", "),n=Array.from(t.outsides.keys()).map(t=>`#use-${t}`).join(", ");return(0,r.jsx)("style",{children:`
${e} {
  display: initial;
}
${n} {
  display: none;
}
/* define these to kick style re-calculation */
use {
  --n-insides: ${e.length};
  --n-outsides: ${n.length};
}
`})}function I(){let{sizes:t}=(0,m.ux)(),e=(0,p.bM)(),n=(0,b.useMemo)(()=>{var n,r;return n=t,r=e,n.map(t=>{let e=Math.pow(2,t)/r;return{size:t,opacity:(0,h.mh)(Math.pow(e>1e3?0:e<0?1:(1e3-e)/1e3,2))}})},[e,t]);return(0,r.jsx)("style",{children:`
${n.map(({size:t,opacity:e})=>`
.size-${t} {
  opacity: ${e};
}
`).reduce((t,e)=>t+e)}
`})}function T(){let{scroll:t,svg:e}=(0,p.$Y)();return(0,r.jsx)("svg",{id:"map-svg-labels-content",viewBox:(0,_.nE)(e),width:(0,h.mh)(t.width),height:(0,h.mh)(t.height),children:(0,r.jsx)("use",{href:"#map-svg-labels1"})})}function A(){let{pointNames:t,areaNames:e}=(0,m.ux)();return(0,r.jsx)("svg",{id:"map-svg-labels-defs",children:(0,r.jsxs)("defs",{children:[(0,r.jsx)("g",{children:t.map((t,e)=>(0,r.jsx)(b.Fragment,{children:(0,r.jsx)(D,{_poi:t})},e))}),(0,r.jsx)("g",{children:e.map((t,e)=>(0,r.jsx)(b.Fragment,{children:(0,r.jsx)(D,{_poi:t})},e))}),(0,r.jsx)(j,{})]})})}function D(t){let{id:e,name:n}=t._poi,{sizeMap:o}=(0,m.ux)(),i=null===e?void 0:o.get(e);return void 0===i?(0,r.jsx)(r.Fragment,{}):(0,r.jsx)("text",{id:`name-${e}`,className:`size-${i}`,children:n.map((t,e)=>(0,r.jsxs)(b.Fragment,{children:[(0,r.jsx)("tspan",{textAnchor:"middle",alignmentBaseline:"middle",x:"0",y:(0,h.mh)(16*M(n.length,e)),fill:"none",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:1,children:t}),(0,r.jsx)("tspan",{textAnchor:"middle",alignmentBaseline:"middle",x:"0",y:(0,h.mh)(16*M(n.length,e)),fill:"black",children:t})]},e))})}function N(){return(0,i.pR)(a,(0,r.jsx)(C,{})),(0,r.jsx)("div",{id:a,className:"content svg"})}function C(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(L,{}),(0,r.jsx)($,{}),(0,r.jsx)("style",{children:k})]})}let k=`
#map-svg-svg,
#map1 {
  contain: content;
  pointer-events: none;
}
#map-svg-defs {
  display: none;
}
`;function L(){let{scroll:t,svg:e}=(0,p.$Y)();return(0,r.jsx)("svg",{id:"map-svg-layers-content",viewBox:(0,_.nE)(e),width:(0,h.mh)(t.width),height:(0,h.mh)(t.height),children:(0,r.jsx)("use",{href:"#map1"})})}function $(){let t=d.O;return(0,r.jsxs)("svg",{id:"map-svg-defs",viewBox:"0 0 1 1",children:[(0,r.jsx)("defs",{children:(0,r.jsxs)("g",{id:t.map,className:"map",children:[(0,r.jsx)(o.bY,{m:d.O.mapCoord.matrix,mapLayers:t.getMapLayers()}),(0,r.jsx)("style",{children:t.mapSvgStyle})]})}),(0,r.jsx)("style",{children:`
.map-layers,
.map-objects,
.map-symbols,
path {
  contain: content;
}
`})]})}var z=n(7234);function U(){return(0,i.pR)(c,(0,r.jsx)(W,{})),(0,r.jsx)("div",{id:c,className:"content svg"})}function W(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(q,{}),(0,r.jsx)(F,{}),(0,r.jsx)("style",{children:P})]})}let P=`
#map-svg-markers-svg,
#map-svg-markers1 {
  contain: content;
  pointer-events: none;
}
#map-svg-markers-defs {
  display: none;
}
`;function q(){let{scroll:t,svg:e}=(0,p.$Y)();return(0,r.jsx)("svg",{id:"map-svg-markers-content",viewBox:(0,_.nE)(e),width:(0,h.mh)(t.width),height:(0,h.mh)(t.height),children:(0,r.jsx)("use",{href:"#map-svg-markers1"})})}function F(){let{fontSize:t}=(0,p.xX)(),e=(0,p.bM)();return(0,r.jsxs)("svg",{id:"map-svg-markers-defs",children:[(0,r.jsx)(o.op,{m:d.O.mapCoord.matrix,mapMarkers:d.O.getMapMarkers(),fontSize:t,s:e}),(0,r.jsxs)("g",{id:"map-svg-markers1",children:[(0,r.jsx)(Z,{}),(0,r.jsx)("style",{children:(0,r.jsx)(z.W,{})}),(0,r.jsx)("use",{href:"#position"})]})]})}function Z(){let{pointNames:t}=(0,m.ux)(),e=d.O.mapCoord.matrix;return(0,r.jsx)("g",{children:t.map(t=>({...t,pos:e.transformPoint(t.pos)})).map(({pos:t},e)=>(0,r.jsx)(b.Fragment,{children:(0,r.jsx)(Y,{pos:t})},e))})}function Y(t){let{pos:e}=t;return(0,r.jsx)("use",{href:"#point-name-marker",style:{transform:`translate(${(0,h.mh)(e.x)}px, ${(0,h.mh)(e.y)}px)`}})}function G(){return(0,i.pR)(u,(0,r.jsx)(H,{})),(0,r.jsx)("div",{id:u,className:"content svg"})}function H(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(K,{}),(0,r.jsx)(X,{}),(0,r.jsx)("style",{children:B})]})}let B=`
#map-svg-svg,
#map1 {
  contain: content;
  pointer-events: none;
}
#map-svg-defs {
  display: none;
}
`;function K(){let{scroll:t,svg:e}=(0,p.$Y)();return(0,r.jsx)("svg",{id:"map-svg-objects-content",viewBox:(0,_.nE)(e),width:(0,h.mh)(t.width),height:(0,h.mh)(t.height),children:(0,r.jsx)("use",{href:"#map-svg-objects1"})})}function X(){let t=d.O;return(0,r.jsxs)("svg",{id:"map-svg-objects-defs",viewBox:"0 0 1 1",children:[(0,r.jsx)("defs",{children:(0,r.jsx)("g",{id:"map-svg-objects1",children:(0,r.jsx)(o.iW,{m:d.O.mapCoord.matrix,mapObjects:t.getMapObjects()})})}),(0,r.jsx)("style",{children:`
.map-layers,
.map-objects,
.map-symbols,
path {
  contain: content;
}
`})]})}var V=n(2247);function J(){return(0,i.pR)(s,(0,r.jsx)(Q,{})),(0,r.jsx)("div",{id:s,className:"content svg"})}function Q(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(te,{}),(0,r.jsx)(tn,{}),(0,r.jsx)("style",{children:tt})]})}let tt=`
#map-svg-symbols-svg,
#map-svg-symbols1 {
  contain: content;
  pointer-events: none;
}
#map-svg-symbols-defs {
  display: none;
}
`;function te(){let{scroll:t,svg:e}=(0,p.$Y)();return(0,r.jsx)("svg",{id:"map-svg-symbols-content",viewBox:(0,_.nE)(e),width:(0,h.mh)(t.width),height:(0,h.mh)(t.height),children:(0,r.jsx)("use",{href:"#map-svg-symbols1"})})}function tn(){return(0,r.jsx)("svg",{id:"map-svg-symbols-defs",children:(0,r.jsxs)("g",{id:"map-svg-symbols1",children:[(0,r.jsx)("defs",{children:(0,r.jsx)(V.FP,{})}),(0,r.jsx)(o.YD,{m:d.O.mapCoord.matrix,mapSymbols:d.O.getMapSymbols()}),(0,r.jsx)("style",{children:(0,r.jsx)(z.W,{})})]})})}function tr(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(N,{}),(0,r.jsx)(G,{}),(0,r.jsx)(J,{}),(0,r.jsx)(U,{}),(0,r.jsx)(E,{}),(0,r.jsx)(y,{})]})}function to(){return(0,i.kq)(a)}},2955:function(t,e,n){n.d(e,{fF:()=>h,ux:()=>p});var r=n(4649),o=n(9701),i=n(6058),a=n(5185),u=n(592),s=n(8945),c=n(7901),l=n(4249),f=n(2988);let d=(0,r.a)({context:{names:[]},on:{set:(t,{names:e})=>({names:e})}});function p(){let t=(0,o.v9)(d,t=>t.context.names),e=(0,l.useMemo)(()=>t.filter(({id:t,area:e})=>void 0!==t&&void 0===e),[t]),n=(0,l.useMemo)(()=>t.flatMap(({id:t,name:e,pos:n,area:r})=>void 0===t||void 0===r?[]:[{id:t,name:e,pos:n,area:r,size:Math.sqrt(r)}]),[t]),{sizeMap:r,sizes:c}=(0,l.useMemo)(()=>(function(t){let e=new Map((0,s.zG)(t,i.DZ(({id:t,size:e})=>null===t?a.YP:a.G({id:t,size:e})),i.UI(({id:t,size:e})=>[t,Math.round(Math.log2(e))]))),n=(0,s.zG)(e.values(),t=>Array.from(t),i.DY(u.Df),i.jj(u.Eq));return{sizeMap:e,sizes:n}})(n),[n]);return{pointNames:e,areaNames:n,sizeMap:r,sizes:c}}function h(){let t=(0,f.hg)(),e=(0,f.bM)(),{sizes:n,sizeMap:r,pointNames:o,areaNames:a}=p(),u=(0,s.zG)(n,i.UI(t=>{let n=Math.pow(2,t)/10/4;return[t,n<e]}),t=>new Map(t));return{pointRange:(0,l.useMemo)(()=>g(o,t,r,u),[o,t,r,u]),areaRange:(0,l.useMemo)(()=>g(a,t,r,u),[a,t,r,u])}}function g(t,e,n,r){let o=(0,s.zG)(t,i.DZ(({id:t,pos:o})=>{if(null===t)return c.none;let i=n.get(t);if(void 0===i)return c.none;let a=r.get(i);if(void 0===a)return c.none;let u=function(t,e){let{start:n,end:r}=e;return function(t,e,n){return(e-t)*(n-e)>0}(n.x,t.x,r.x)&&function(t,e,n){return(e-t)*(n-e)>0}(n.y,t.y,r.y)}(o,e);return(0,c.some)({id:t,inout:u,small:a})}));return{insides:(0,s.zG)(o,i.DZ(({id:t,inout:e,small:n})=>e&&!n?(0,c.some)(t):c.none),t=>new Set(t)),outsides:(0,s.zG)(o,i.DZ(({id:t,inout:e,small:n})=>e&&!n?c.none:(0,c.some)(t)),t=>new Set(t))}}},5311:function(t,e,n){n.d(e,{JX:()=>i,mh:()=>a,o8:()=>o});let r=void 0,o=t=>t===r;function i(){return{x:0,y:0,width:document.body.clientWidth,height:document.body.clientHeight}}function a(t){return Math.round(100*t)/100}},3030:function(t,e,n){function r(t,e){let n=t.x+e.x,r=t.y+e.y;return{...t,x:n,y:r}}function o(t,e){let n=t.x-e.x,r=t.y-e.y;return{...t,x:n,y:r}}function i(t,e){let n=o(t,e);return n.y/n.x}function a(t,e){var n,r;return Math.sqrt((n=t,r=e,Math.pow(n.x-r.x,2)+Math.pow(n.y-r.y,2)))}n.d(e,{$B:()=>i,ip:()=>f,m7:()=>o,uI:()=>r,$k:()=>a,kh:()=>l,oe:()=>d,lM:()=>c,a4:()=>s});var u=n(592);let s=n(6750).Zt(function(t,e){return u.Df.compare(t.x,e.x)||u.Df.compare(t.y,e.y)});function c(t,e){return{x:t,y:e}}let l={x:0,y:0};function f(t,e){let n="number"==typeof e?e:e instanceof Array?e[0]:e.x,r="number"==typeof e?e:e instanceof Array?e[1]:e.y,o=t.x*n,i=t.y*r;return{...t,x:o,y:i}}function d(t){let e=0===t.length?null:t.reduce((t,e)=>({x:t.x+e.x,y:t.y+e.y}));return null===e?null:f(e,1/t.length)}},1662:function(t,e,n){n.d(e,{$l:()=>l,EL:()=>a,MN:()=>i,YL:()=>u,vT:()=>c,wS:()=>s});var r=n(4449),o=n(3030);let i={container:r.bf,scroll:r.bf,content:new DOMMatrixReadOnly,svgOffset:{x:0,y:0},svgScale:{s:1},svg:r.bf};function a({container:t,svgOffset:e,svgScale:n,svg:o}){return{container:(0,r.JG)(t),scroll:(0,r.JG)(t),content:new DOMMatrixReadOnly,svgOffset:e,svgScale:n,svg:(0,r.JG)(o)}}function u({svgOffset:t,svgScale:e,svg:n}){return new DOMMatrixReadOnly().translate(-t.x,-t.y).scale(1/e.s,1/e.s).translate(-n.x,-n.y)}function s({content:t,svgOffset:e,svgScale:n,svg:r}){return new DOMMatrixReadOnly().multiply(t).translate(-e.x,-e.y).scale(1/n.s,1/n.s).translate(-r.x,-r.y)}function c({scroll:t,content:e,svgOffset:n,svgScale:r,svg:o}){return new DOMMatrixReadOnly().translate(t.x,t.y).multiply(e).translate(-n.x,-n.y).scale(1/r.s,1/r.s).translate(-o.x,-o.y)}function l(t){return(0,o.ip)(t,-1)}},4136:function(t,e,n){n.d(e,{lQ:()=>d,p1:()=>v,nl:()=>l,vY:()=>y,qF:()=>c,v4:()=>g,Ul:()=>h,D0:()=>p,J8:()=>m});var r=n(8945),o=n(4449),i=n(8113),a=n(3030),u=n(1662);let s={fontSize:16,container:o.bf,svgOffset:{x:0,y:0},svgScale:{s:1},svg:o.bf},c={...u.MN,config:s};function l({config:t,content:e}){let n=(0,u.EL)(t),r=f(e);return y({config:t,...n},r)}function f({a:t,b:e,c:n,d:r}){let o=new DOMMatrixReadOnly([t,e,n,r,0,0]).transformPoint({x:1,y:0});return Math.atan2(o.y,o.x)/Math.PI*180}function d(t){return f(t.content)}function p(t,e,n){var r=function(t,e,n){let[[r,o],i]=function(t,e){let n=t.width/t.height,r=e.width/e.height,[o,i]=n>r?[(t.width-t.height*r)/2,0]:[0,(t.height-t.width/r)/2];return[[o,i],n>r?e.height/t.height:e.width/t.width]}(n,e);return{fontSize:t,container:n,svgOffset:{x:-r,y:-o},svgScale:{s:i},svg:e}}(e,t,n);let o=(0,u.EL)(r);return{config:r,...o}}function h(t,e){return function(t,e,n){let r=(0,u.vT)(t).inverse().transformPoint(n),o=t.container.width/t.container.height,s=o<1?e/o:e,c=o<1?e:e*o;return{...t,scroll:(0,i.x2)(t.scroll,[s,c],n.x,n.y),svgOffset:(0,a.ip)(t.svgOffset,[s,c]),svg:(0,i.x2)(t.svg,[s,c],r.x,r.y)}}(t,e,(0,o.be)(t.scroll))}function g(t,e){return{...t,scroll:(0,o.Ao)(t.scroll,e)}}function m(t,e,n){return{...t,svg:(0,o.JG)(e),svgScale:n}}function y(t,e){let n=t.scroll.width/2,r=t.scroll.height/2,o=new DOMMatrixReadOnly().translate(n,r).rotate(e).translate(-n,-r).multiply(t.content);return{...t,content:o}}function v(t,e){let n=(0,a.m7)((0,u.$l)(e),t.scroll);return(0,r.zG)(t,t=>({...t,scroll:(0,o.pB)(t.scroll,n)}),e=>(function(t,e){let n=t.content.inverse(),r=(0,a.lM)(t.scroll.width/2,t.scroll.height/2),i=(0,a.m7)(t.scroll,e),u=(0,a.uI)(r,i),s=n.transformPoint(r),c=n.transformPoint(u),l=(0,a.m7)(c,s),f=(0,a.ip)(l,-t.svgScale.s);return{...t,scroll:(0,o.Ao)(t.scroll,e),svg:(0,o.pB)(t.svg,f)}})(e,(0,o.JG)(t.scroll)))}},5707:function(t,e,n){n.d(e,{O_:()=>i,ZG:()=>s,Zt:()=>o,so:()=>u});var r=n(4449);function o(t){if(null===t)return!0;let e=document.querySelector(".container");if(null===e)return!1;let n=e.scrollLeft,r=e.scrollTop,o=e.scrollWidth,i=e.scrollHeight;if(null===n)return!1;let a=o-t.width,u=i-t.height;if(Math.abs(a)>1||Math.abs(u)>1)return console.log(`scroll: target ${a>0?"larger":"smaller"} than expected: target=[${o}, ${i}] vs. request=[${t.width}, ${t.height}]`),!1;let s=Math.round(-t.x),c=Math.round(-t.y);if(s<0||c<0)return console.error(`scroll: out-of-bound request: [${t.x}], [${t.y}]`),!1;n!==s&&(e.scrollLeft=s),r!==c&&(e.scrollTop=c);let l=e.scrollLeft;if(Math.abs(l-s)>1)return console.log(`scroll: scrollLeft not reflected: expected=${n} vs. real=${l}`),!1;let f=e.scrollTop;return!(Math.abs(f-c)>1)||(console.log(`scroll: scrollHeight not reflected: expected=${r} vs. real=${f}`),!1)}function i(){let t=document.querySelector(".container");if(null!==t){let e=t.scrollLeft,n=t.scrollTop,o=t.scrollWidth,i=t.scrollHeight;return t.scrollLeft=Number(e)+1,t.scrollLeft=Number(e),(0,r.BZ)(e,n,o,i)}return null}let a={scroll:r.bf,client:{width:0,height:0},timeStamp:0};function u(){return a}let s=new Set;s.add(function(t){let e=t.currentTarget;null!==e&&(a={scroll:{x:e.scrollLeft,y:e.scrollTop,width:e.scrollWidth,height:e.scrollHeight},client:{width:e.clientWidth,height:e.clientHeight},timeStamp:t.timeStamp})})},2988:function(t,e,n){n.d(e,{hg:()=>S,BO:()=>M,$Y:()=>x,bM:()=>_,xX:()=>b});var r=n(2158),o=n(9621),i=n(64),a=n(2662),u=n(3675),s=n(8542);let c=[1,2,2.5,5,10,15,20,25,30,40,50];var l=n(5582);let f=(0,o.cY)({types:{events:{},emitted:{},context:{}},actions:{clear:(0,i.a)({ticked:!1}),set:(0,i.a)({ticked:!0}),call:(0,l.e)({type:"CALL"})},delays:{DURATION:500}}).createMachine({id:"expire1",context:{ticked:!1},initial:"Idle",states:{Idle:{on:{TICK:{target:"Empty"}}},Empty:{after:{DURATION:{actions:["call","clear"],target:"Idle"}},on:{TICK:{guard:({context:t})=>!t.ticked,actions:{type:"set",params:({event:t})=>t},target:"Active"}}},Active:{after:{DURATION:{target:"Expired"}},on:{TICK:{actions:{type:"set",params:({event:t})=>t},target:"Restarting"}}},Restarting:{always:"Active"},Expired:{always:{actions:["call","clear"],target:"Idle"}}}});var d=n(3030),p=n(1662),h=n(4136),g=n(5707);let m=(0,o.cY)({types:{events:{},context:{}},actions:{updateZoom:(0,i.a)({zoom:(t,e)=>e.zoom,z:(t,e)=>e.z}),updateRotate:(0,i.a)({}),updateSvgMatrix:(0,i.a)({svgMatrix:({context:{layout:t}})=>(0,p.wS)(t)}),updateGeoMatrix:(0,i.a)({geoMatrix:({context:t})=>t.svgMatrix.multiply(u.O.mapCoord.matrix).inverse()}),updateDistanceRadius:(0,i.a)({distanceRadius:({context:{layout:t}})=>(function({container:t,svgScale:e}){var n;let r=Math.max(t.width,t.height)/2*e.s,o=Math.round(Math.log10(r)),i=(n=r/Math.pow(10,o-1),c.flatMap(t=>{let e=Math.floor(n/t);return e<3||e>=10?[]:[{u:t,n:e}]}));if(i.length<1)throw Error("findDiv");let{u:a}=i[0],u=a*Math.pow(10,o-1);return{svg:u,client:u/e.s}})(t)}),updateScroll:(0,i.a)({geoPoint:({context:t},{scroll:e,client:n})=>{let r=t.geoMatrix,o={x:e.x+n.width/2,y:e.y+n.height/2};return r.transformPoint(o)},geoRange:({context:t},{scroll:e,client:n})=>{let r=t.geoMatrix,o={x:e.x,y:e.y},i={x:e.x+n.width,y:e.y+n.height};return{start:r.transformPoint(o),end:r.transformPoint(i)}}})}}).createMachine({id:"style1",context:{rendered:!0,appearing:!1,shown:!1,animating:!1,layout:h.qF,zoom:1,z:null,rotate:null,svgMatrix:new DOMMatrixReadOnly,geoMatrix:new DOMMatrixReadOnly,geoPoint:d.kh,distanceRadius:{svg:0,client:0},geoRange:{start:d.kh,end:d.kh},mode:"panning",animation:null},on:{"STYLE.LAYOUT":{actions:[(0,i.a)({rendered:({event:t})=>t.rendered,layout:({event:t})=>t.layout}),"updateSvgMatrix","updateGeoMatrix","updateDistanceRadius",(0,a.r)(({event:{rendered:t}})=>({type:"LAYOUT.DONE",rendered:t}))]},"STYLE.ZOOM":{actions:{type:"updateZoom",params:({event:t})=>t}},"STYLE.SCROLL":{actions:{type:"updateScroll",params:({event:t})=>t.currentScroll}},"STYLE.MODE":{actions:(0,i.a)({mode:({event:t})=>t.mode})}},initial:"WaitingForLayout",states:{WaitingForLayout:{on:{"LAYOUT.DONE":{guard:({event:t})=>t.rendered,actions:(0,i.a)({appearing:!0}),target:"Appearing"}}},Appearing:{on:{"STYLE.ANIMATION.END":{actions:(0,i.a)({appearing:!1,shown:!0}),target:"Idle"}}},Idle:{on:{"STYLE.ANIMATION":{actions:(0,i.a)({animation:({event:{animation:t}})=>t,animating:!0}),target:"Animating"},"LAYOUT.DONE":{guard:({event:t})=>!t.rendered,actions:(0,i.a)({shown:!1}),target:"WaitingForLayout"}}},Animating:{on:{"STYLE.ANIMATION.END":{actions:(0,i.a)({animation:null,animating:!1}),target:"Idle"}}}}}),y=(0,a.c)(m,{systemId:"system-viewer1"});function v(t){y.send(t)}function x(){return(0,r.v9)(y,t=>t.context.layout)}function S(){return(0,r.v9)(y,t=>t.context.geoRange)}function b(){return(0,r.v9)(y,t=>t.context.layout.config)}function _(){return(0,r.v9)(y,t=>t.context.layout.svgScale.s)}function M(){return(0,r.v9)(y,t=>t.context.zoom)}function E(){v({type:"STYLE.SCROLL",currentScroll:(0,g.so)()})}y.start(),s.XV.add(function(t,e){v({type:"STYLE.LAYOUT",layout:t,rendered:e}),requestAnimationFrame(()=>E())}),s.rA.add(function(t,e,n){v({type:"STYLE.ZOOM",zoom:e,z:n})}),s.CB.add(function(t,e){v({type:"STYLE.ZOOM",zoom:e,z:null})}),s.hp.add(function(t){v({type:"STYLE.ANIMATION",animation:t})}),s.tZ.add(function(t){v({type:"STYLE.MODE",mode:t})});let w=function(t,e){let n=f.provide({delays:{DURATION:500}}),r=(0,a.c)(n);return r.on("CALL",e),r.start(),{machine:n,actor:r,tick:function(){r.send({type:"TICK"})}}}(0,E);g.ZG.add(w.tick)}}]);